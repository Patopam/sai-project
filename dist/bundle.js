/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={6199:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,s=n(5319),o=n(1635),a=n(5844),c=n(6336),u=n(6148),l=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((function(t){return t})).join(" ")},t}(),h="@firebase/app",d="0.9.26",f=new a.Logger("@firebase/app"),p="[DEFAULT]",m=((r={})[h]="fire-core",r["@firebase/app-compat"]="fire-core-compat",r["@firebase/analytics"]="fire-analytics",r["@firebase/analytics-compat"]="fire-analytics-compat",r["@firebase/app-check"]="fire-app-check",r["@firebase/app-check-compat"]="fire-app-check-compat",r["@firebase/auth"]="fire-auth",r["@firebase/auth-compat"]="fire-auth-compat",r["@firebase/database"]="fire-rtdb",r["@firebase/database-compat"]="fire-rtdb-compat",r["@firebase/functions"]="fire-fn",r["@firebase/functions-compat"]="fire-fn-compat",r["@firebase/installations"]="fire-iid",r["@firebase/installations-compat"]="fire-iid-compat",r["@firebase/messaging"]="fire-fcm",r["@firebase/messaging-compat"]="fire-fcm-compat",r["@firebase/performance"]="fire-perf",r["@firebase/performance-compat"]="fire-perf-compat",r["@firebase/remote-config"]="fire-rc",r["@firebase/remote-config-compat"]="fire-rc-compat",r["@firebase/storage"]="fire-gcs",r["@firebase/storage-compat"]="fire-gcs-compat",r["@firebase/firestore"]="fire-fst",r["@firebase/firestore-compat"]="fire-fst-compat",r["fire-js"]="fire-js",r.firebase="fire-js-all",r),g=new Map,y=new Map;function v(t,e){try{t.container.addComponent(e)}catch(n){f.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function b(t){var e,n,r=t.name;if(y.has(r))return f.debug("There were multiple attempts to register component ".concat(r,".")),!1;y.set(r,t);try{for(var i=o.__values(g.values()),s=i.next();!s.done;s=i.next())v(s.value,t)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return!0}function w(t,e){var n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var x=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call initializeApp() first",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["no-options"]="Need to provide options, when not being deployed to hosting via source.",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",i["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",i["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",i["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",i),_=new c.ErrorFactory("app","Firebase",x),E=function(){function t(t,e,n){var r=this;this._isDeleted=!1,this._options=o.__assign({},t),this._config=o.__assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s.Component("app",(function(){return r}),"PUBLIC"))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(t){this._isDeleted=t},enumerable:!1,configurable:!0}),t.prototype.checkDestroyed=function(){if(this.isDeleted)throw _.create("app-deleted",{appName:this._name})},t}();function I(t,e){var n,r;void 0===e&&(e={});var i=t;"object"!=typeof e&&(e={name:e});var a=o.__assign({name:p,automaticDataCollectionEnabled:!1},e),u=a.name;if("string"!=typeof u||!u)throw _.create("bad-app-name",{appName:String(u)});if(i||(i=c.getDefaultAppConfig()),!i)throw _.create("no-options");var l=g.get(u);if(l){if(c.deepEqual(i,l.options)&&c.deepEqual(a,l.config))return l;throw _.create("duplicate-app",{appName:u})}var h=new s.ComponentContainer(u);try{for(var d=o.__values(y.values()),f=d.next();!f.done;f=d.next()){var m=f.value;h.addComponent(m)}}catch(t){n={error:t}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var v=new E(i,a,h);return g.set(u,v),v}function S(t,e,n){var r,i=null!==(r=m[t])&&void 0!==r?r:t;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var c=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];return o&&c.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&c.push("and"),a&&c.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void f.warn(c.join(" "))}b(new s.Component("".concat(i,"-version"),(function(){return{library:i,version:e}}),"VERSION"))}var T="firebase-heartbeat-database",C=1,D="firebase-heartbeat-store",k=null;function A(){return k||(k=u.openDB(T,C,{upgrade:function(t,e){if(0===e)try{t.createObjectStore(D)}catch(t){console.warn(t)}}}).catch((function(t){throw _.create("idb-open",{originalErrorMessage:t.message})}))),k}function N(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,A()];case 1:return[4,r.sent().transaction(D).objectStore(D).get(M(t))];case 2:return[2,r.sent()];case 3:return(e=r.sent())instanceof c.FirebaseError?f.warn(e.message):(n=_.create("idb-get",{originalErrorMessage:null==e?void 0:e.message}),f.warn(n.message)),[3,4];case 4:return[2]}}))}))}function L(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,A()];case 1:return n=o.sent(),[4,(r=n.transaction(D,"readwrite")).objectStore(D).put(e,M(t))];case 2:return o.sent(),[4,r.done];case 3:return o.sent(),[3,5];case 4:return(i=o.sent())instanceof c.FirebaseError?f.warn(i.message):(s=_.create("idb-set",{originalErrorMessage:null==i?void 0:i.message}),f.warn(s.message)),[3,5];case 5:return[2]}}))}))}function M(t){return"".concat(t.name,"!").concat(t.options.appId)}var O=function(){function t(t){var e=this;this.container=t,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new P(n),this._heartbeatsCachePromise=this._storage.read().then((function(t){return e._heartbeatsCache=t,t}))}return t.prototype.triggerHeartbeat=function(){var t,e;return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return n=this.container.getProvider("platform-logger").getImmediate(),r=n.getPlatformInfoString(),i=R(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)?[3,2]:(s=this,[4,this._heartbeatsCachePromise]);case 1:if(s._heartbeatsCache=o.sent(),null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))return[2];o.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((function(t){return t.date===i}))?[2]:(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(t){var e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),[2,this._storage.overwrite(this._heartbeatsCache)])}}))}))},t.prototype.getHeartbeatsHeader=function(){var t;return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,s;return o.__generator(this,(function(a){switch(a.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:a.sent(),a.label=2;case 2:return null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length?[2,""]:(e=R(),n=function(t,e){var n,r;void 0===e&&(e=1024);var i=[],s=t.slice(),a=function(t){var n=i.find((function(e){return e.agent===t.agent}));if(n){if(n.dates.push(t.date),F(i)>e)return n.dates.pop(),"break"}else if(i.push({agent:t.agent,dates:[t.date]}),F(i)>e)return i.pop(),"break";s=s.slice(1)};try{for(var c=o.__values(t),u=c.next();!u.done&&"break"!==a(u.value);u=c.next());}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return{heartbeatsToSend:i,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,s=c.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return a.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),a.label=5;case 5:return[2,s]}}))}))},t}();function R(){return(new Date).toISOString().substring(0,10)}var P=function(){function t(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return t.prototype.runIndexedDBEnvironmentCheck=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return c.isIndexedDBAvailable()?[2,c.validateIndexedDBOpenable().then((function(){return!0})).catch((function(){return!1}))]:[2,!1]}))}))},t.prototype.read=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,N(this.app)];case 3:return(null==(t=e.sent())?void 0:t.heartbeats)?[2,t]:[2,{heartbeats:[]}];case 4:return[2]}}))}))},t.prototype.overwrite=function(t){var e;return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,L(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})]}}))}))},t.prototype.add=function(t){var e;return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,L(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:o.__spreadArray(o.__spreadArray([],o.__read(n.heartbeats),!1),o.__read(t.heartbeats),!1)})]}}))}))},t}();function F(t){return c.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}b(new s.Component("platform-logger",(function(t){return new l(t)}),"PRIVATE")),b(new s.Component("heartbeat",(function(t){return new O(t)}),"PRIVATE")),S(h,d,"node"),S(h,d,"cjs5"),S("fire-js",""),Object.defineProperty(e,"FirebaseError",{enumerable:!0,get:function(){return c.FirebaseError}}),e.SDK_VERSION="10.7.2",e._DEFAULT_ENTRY_NAME=p,e._addComponent=v,e._addOrOverwriteComponent=function(t,e){t.container.addOrOverwriteComponent(e)},e._apps=g,e._clearComponents=function(){y.clear()},e._components=y,e._getProvider=w,e._registerComponent=b,e._removeServiceInstance=function(t,e,n){void 0===n&&(n=p),w(t,e).clearInstance(n)},e.deleteApp=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return e=t.name,g.has(e)?(g.delete(e),[4,Promise.all(t.container.getProviders().map((function(t){return t.delete()})))]):[3,2];case 1:n.sent(),t.isDeleted=!0,n.label=2;case 2:return[2]}}))}))},e.getApp=function(t){void 0===t&&(t=p);var e=g.get(t);if(!e&&t===p&&c.getDefaultAppConfig())return I();if(!e)throw _.create("no-app",{appName:t});return e},e.getApps=function(){return Array.from(g.values())},e.initializeApp=I,e.onLog=function(t,e){if(null!==t&&"function"!=typeof t)throw _.create("invalid-log-argument");a.setUserLogHandler(t,e)},e.registerVersion=S,e.setLogLevel=function(t){a.setLogLevel(t)}},5319:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1635),i=n(6336),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}try{for(var i=r.__values(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=r.__read(s.value,2),c=a[0],u=a[1],l=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService({instanceIdentifier:l});u.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(r.__spreadArray(r.__spreadArray([],r.__read(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()}))),!1),r.__read(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))),!1))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=o),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error("".concat(this.name,"(").concat(o,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var c=r.__values(this.instancesDeferred.entries()),u=c.next();!u.done;u=c.next()){var l=r.__read(u.value,2),h=l[0],d=l[1];o===this.normalizeInstanceIdentifier(h)&&d.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=r.__values(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(t){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=s,e.ComponentContainer=c,e.Provider=a},1241:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6199),i=n(5319),s=n(5844),o=n(6336),a=n(3637);const c="@firebase/firestore";class u{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}u.UNAUTHENTICATED=new u(null),u.GOOGLE_CREDENTIALS=new u("google-credentials-uid"),u.FIRST_PARTY=new u("first-party-uid"),u.MOCK_USER=new u("mock-user");let l="10.7.2";const h=new s.Logger("@firebase/firestore");function d(){return h.logLevel}function f(t,...e){if(h.logLevel<=s.LogLevel.DEBUG){const n=e.map(g);h.debug(`Firestore (${l}): ${t}`,...n)}}function p(t,...e){if(h.logLevel<=s.LogLevel.ERROR){const n=e.map(g);h.error(`Firestore (${l}): ${t}`,...n)}}function m(t,...e){if(h.logLevel<=s.LogLevel.WARN){const n=e.map(g);h.warn(`Firestore (${l}): ${t}`,...n)}}function g(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function y(t="Unexpected state"){const e=`FIRESTORE (${l}) INTERNAL ASSERTION FAILED: `+t;throw p(e),new Error(e)}function v(t,e){t||y()}function b(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends o.FirebaseError{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class E{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(u.UNAUTHENTICATED)))}shutdown(){}}class S{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class T{constructor(t){this.t=t,this.currentUser=u.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new _;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{f("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(f("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(f("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(v("string"==typeof e.accessToken),new E(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return v(null===t||"string"==typeof t),new u(t)}}class C{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=u.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class D{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new C(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(u.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&f("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,f("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{f("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):f("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(v("string"==typeof t.token),this.R=t.token,new k(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function N(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class L{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=N(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function M(t,e){return t<e?-1:t>e?1:0}function O(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}function R(t){return t+"\0"}class P{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new x(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new x(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new x(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new x(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return P.fromMillis(Date.now())}static fromDate(t){return P.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new P(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?M(this.nanoseconds,t.nanoseconds):M(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class F{constructor(t){this.timestamp=t}static fromTimestamp(t){return new F(t)}static min(){return new F(new P(0,0))}static max(){return new F(new P(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class j{constructor(t,e,n){void 0===e?e=0:e>t.length&&y(),void 0===n?n=t.length-e:n>t.length-e&&y(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===j.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof j?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class V extends j{construct(t,e,n){return new V(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new x(w.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new V(e)}static emptyPath(){return new V([])}}const B=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class U extends j{construct(t,e,n){return new U(t,e,n)}static isValidIdentifier(t){return B.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),U.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new U(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new x(w.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new x(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new x(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new x(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new U(e)}static emptyPath(){return new U([])}}class z{constructor(t){this.path=t}static fromPath(t){return new z(V.fromString(t))}static fromName(t){return new z(V.fromString(t).popFirst(5))}static empty(){return new z(V.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===V.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return V.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new z(new V(t.slice()))}}class q{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}function $(t){return t.fields.find((t=>2===t.kind))}function G(t){return t.fields.filter((t=>2!==t.kind))}function H(t,e){let n=M(t.collectionGroup,e.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=Q(t.fields[r],e.fields[r]),0!==n)return n;return M(t.fields.length,e.fields.length)}q.UNKNOWN_ID=-1;class K{constructor(t,e){this.fieldPath=t,this.kind=e}}function Q(t,e){const n=U.comparator(t.fieldPath,e.fieldPath);return 0!==n?n:M(t.kind,e.kind)}class W{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new W(0,J.min())}}function Y(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=F.fromTimestamp(1e9===r?new P(n+1,0):new P(n,r));return new J(i,z.empty(),e)}function X(t){return new J(t.readTime,t.key,-1)}class J{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new J(F.min(),z.empty(),-1)}static max(){return new J(F.max(),z.empty(),-1)}}function Z(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=z.comparator(t.documentKey,e.documentKey),0!==n?n:M(t.largestBatchId,e.largestBatchId))}const tt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class et{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function nt(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==tt)throw t;f("LocalStore","Unexpectedly lost primary lease")}class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new rt(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof rt?e:rt.resolve(e)}catch(t){return rt.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.reject(e)}static resolve(t){return new rt(((e,n)=>{e(t)}))}static reject(t){return new rt(((e,n)=>{n(t)}))}static waitFor(t){return new rt(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=rt.resolve(!1);for(const n of t)e=e.next((t=>t?rt.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new rt(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new rt(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}class it{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new _,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new at(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=dt(e.target.error);this.V.reject(new at(t,n))}}static open(t,e,n,r){try{return new it(e,t.transaction(r,n))}catch(t){throw new at(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new ut(e)}}class st{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===st.S(o.getUA())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return f("SimpleDb","Removing database:",t),lt(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!o.isIndexedDBAvailable())return!1;if(st.C())return!0;const t=o.getUA(),e=st.S(t),n=0<e&&e<10,r=st.v(t),i=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||i)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(f("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=t=>{const n=t.target.result;e(n)},r.onblocked=()=>{n(new at(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=e=>{const r=e.target.error;"VersionError"===r.name?n(new x(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new x(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new at(t,r))},r.onupgradeneeded=t=>{f("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,r.transaction,t.oldVersion,this.version).next((()=>{f("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,r){const i="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=it.open(this.db,t,i?"readonly":"readwrite",n),s=r(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),rt.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(f("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ot{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return lt(this.k.delete())}}class at extends x{constructor(t,e){super(w.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ct(t){return"IndexedDbTransactionError"===t.name}class ut{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),lt(n)}add(t){return f("SimpleDb","ADD",this.store.name,t,t),lt(this.store.add(t))}get(t){return lt(this.store.get(t)).next((e=>(void 0===e&&(e=null),f("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return f("SimpleDb","DELETE",this.store.name,t),lt(this.store.delete(t))}count(){return f("SimpleDb","COUNT",this.store.name),lt(this.store.count())}W(t,e){const n=this.options(t,e),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const t=r.getAll(n.range);return new rt(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new rt(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){f("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const r=this.cursor(n);return this.G(r,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.G(r,e)}Z(t){const e=this.cursor({});return new rt(((n,r)=>{e.onerror=t=>{const e=dt(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next((t=>{t?r.continue():n()})):n()}}))}G(t,e){const n=[];return new rt(((r,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{const i=t.target.result;if(!i)return void r();const s=new ot(i),o=e(i.primaryKey,i.value,s);if(o instanceof rt){const t=o.catch((t=>(s.done(),rt.reject(t))));n.push(t)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>rt.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function lt(t){return new rt(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=dt(t.target.error);n(e)}}))}let ht=!1;function dt(t){const e=st.S(o.getUA());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ht||(ht=!0,setTimeout((()=>{throw t}),0)),t}}return t}class ft{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(t){f("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{f("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(t){ct(t)?f("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await nt(t)}await this.ee(6e4)}))}}class pt{constructor(t,e){this.localStore=t,this.persistence=e}async te(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.ne(e,t)))}ne(t,e){const n=new Set;let r=e,i=!0;return rt.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((e=>{if(null!==e&&!n.has(e))return f("IndexBackfiller",`Processing collection: ${e}`),this.re(t,e,r).next((t=>{r-=t,n.add(e)}));i=!1})))).next((()=>e-r))}re(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((r=>this.localStore.localDocuments.getNextDocuments(t,e,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(t,i).next((()=>this.ie(r,n))).next((n=>(f("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(t,e,n)))).next((()=>i.size))}))))}ie(t,e){let n=t;return e.changes.forEach(((t,e)=>{const r=X(e);Z(r,n)>0&&(n=r)})),new J(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}class mt{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function gt(t){return null==t}function yt(t){return 0===t&&1/t==-1/0}function vt(t){return"number"==typeof t&&Number.isInteger(t)&&!yt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xt(e)),e=wt(t.get(n),e);return xt(e)}function wt(t,e){let n=e;const r=t.length;for(let e=0;e<r;e++){const r=t.charAt(e);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function xt(t){return t+""}function _t(t){const e=t.length;if(v(e>=2),2===e)return v(""===t.charAt(0)&&""===t.charAt(1)),V.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const e=t.indexOf("",s);switch((e<0||e>n)&&y(),t.charAt(e+1)){case"":const n=t.substring(s,e);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=t.substring(s,e),i+="\0";break;case"":i+=t.substring(s,e+1);break;default:y()}s=e+2}return new V(r)}mt._e=-1;const Et=["userId","batchId"];function It(t,e){return[t,bt(e)]}function St(t,e,n){return[t,bt(e),n]}const Tt={},Ct=["prefixPath","collectionGroup","readTime","documentId"],Dt=["prefixPath","collectionGroup","documentId"],kt=["collectionGroup","readTime","prefixPath","documentId"],At=["canonicalId","targetId"],Nt=["targetId","path"],Lt=["path","targetId"],Mt=["collectionId","parent"],Ot=["indexId","uid"],Rt=["uid","sequenceNumber"],Pt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ft=["indexId","uid","orderedDocumentKey"],jt=["userId","collectionPath","documentId"],Vt=["userId","collectionPath","largestBatchId"],Bt=["userId","collectionGroup","largestBatchId"],Ut=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zt=[...Ut,"documentOverlays"],qt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$t=qt,Gt=[...$t,"indexConfiguration","indexState","indexEntries"];class Ht extends et{constructor(t,e){super(),this.ae=t,this.currentSequenceNumber=e}}function Kt(t,e){const n=b(t);return st.M(n.ae,e)}function Qt(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wt(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yt(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Xt{constructor(t,e){this.comparator=t,this.root=e||Zt.EMPTY}insert(t,e){return new Xt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(t){return new Xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jt(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jt(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jt(this.root,t,this.comparator,!0)}}class Jt{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Zt{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Zt.RED,this.left=null!=r?r:Zt.EMPTY,this.right=null!=i?i:Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new Zt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Zt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw y();if(this.right.isRed())throw y();const t=this.left.check();if(t!==this.right.check())throw y();return t+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1,Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw y()}get value(){throw y()}get color(){throw y()}get left(){throw y()}get right(){throw y()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Zt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class te{constructor(t){this.comparator=t,this.data=new Xt(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ee(this.data.getIterator())}getIteratorFrom(t){return new ee(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof te))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new te(this.comparator);return e.data=t,e}}class ee{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ne(t){return t.hasNext()?t.getNext():void 0}class re{constructor(t){this.fields=t,t.sort(U.comparator)}static empty(){return new re([])}unionWith(t){let e=new te(U.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new re(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return O(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class ie extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class se{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new ie("Invalid base64 string: "+t):t}}(t);return new se(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new se(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return M(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}se.EMPTY_BYTE_STRING=new se("");const oe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ae(t){if(v(!!t),"string"==typeof t){let e=0;const n=oe.exec(t);if(v(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ce(t.seconds),nanos:ce(t.nanos)}}function ce(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ue(t){return"string"==typeof t?se.fromBase64String(t):se.fromUint8Array(t)}function le(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function he(t){const e=t.mapValue.fields.__previous_value__;return le(e)?he(e):e}function de(t){const e=ae(t.mapValue.fields.__local_write_time__.timestampValue);return new P(e.seconds,e.nanos)}class fe{constructor(t,e,n,r,i,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class pe{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new pe("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof pe&&t.projectId===this.projectId&&t.database===this.database}}const me={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ge={nullValue:"NULL_VALUE"};function ye(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?le(t)?4:Le(t)?9007199254740991:10:y()}function ve(t,e){if(t===e)return!0;const n=ye(t);if(n!==ye(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return de(t).isEqual(de(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ae(t.timestampValue),r=ae(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ue(t.bytesValue).isEqual(ue(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ce(t.geoPointValue.latitude)===ce(e.geoPointValue.latitude)&&ce(t.geoPointValue.longitude)===ce(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ce(t.integerValue)===ce(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=ce(t.doubleValue),r=ce(e.doubleValue);return n===r?yt(n)===yt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return O(t.arrayValue.values||[],e.arrayValue.values||[],ve);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Qt(n)!==Qt(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!ve(n[t],r[t])))return!1;return!0}(t,e);default:return y()}}function be(t,e){return void 0!==(t.values||[]).find((t=>ve(t,e)))}function we(t,e){if(t===e)return 0;const n=ye(t),r=ye(e);if(n!==r)return M(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return M(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=ce(t.integerValue||t.doubleValue),r=ce(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return xe(t.timestampValue,e.timestampValue);case 4:return xe(de(t),de(e));case 5:return M(t.stringValue,e.stringValue);case 6:return function(t,e){const n=ue(t),r=ue(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=M(n[t],r[t]);if(0!==e)return e}return M(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=M(ce(t.latitude),ce(e.latitude));return 0!==n?n:M(ce(t.longitude),ce(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=we(n[t],r[t]);if(e)return e}return M(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===me.mapValue&&e===me.mapValue)return 0;if(t===me.mapValue)return 1;if(e===me.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=M(r[t],s[t]);if(0!==e)return e;const o=we(n[r[t]],i[s[t]]);if(0!==o)return o}return M(r.length,s.length)}(t.mapValue,e.mapValue);default:throw y()}}function xe(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return M(t,e);const n=ae(t),r=ae(e),i=M(n.seconds,r.seconds);return 0!==i?i:M(n.nanos,r.nanos)}function _e(t){return Ee(t)}function Ee(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ae(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return ue(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return z.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Ee(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Ee(t.fields[i])}`;return n+"}"}(t.mapValue):y()}function Ie(t){switch(ye(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=he(t);return e?16+Ie(e):16;case 5:return 2*t.stringValue.length;case 6:return ue(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce(((t,e)=>t+Ie(e)),0)}(t.arrayValue);case 10:return function(t){let e=0;return Wt(t.fields,((t,n)=>{e+=t.length+Ie(n)})),e}(t.mapValue);default:throw y()}}function Se(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Te(t){return!!t&&"integerValue"in t}function Ce(t){return!!t&&"arrayValue"in t}function De(t){return!!t&&"nullValue"in t}function ke(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ae(t){return!!t&&"mapValue"in t}function Ne(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wt(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Ne(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ne(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Le(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Me(t){return"nullValue"in t?ge:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Se(pe.empty(),z.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:y()}function Oe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Se(pe.empty(),z.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?me:y()}function Re(t,e){const n=we(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Pe(t,e){const n=we(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Fe{constructor(t){this.value=t}static empty(){return new Fe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ae(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ne(e)}setAll(t){let e=U.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=Ne(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());Ae(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ve(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Ae(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Wt(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Fe(Ne(this.value))}}function je(t){const e=[];return Wt(t.fields,((t,n)=>{const r=new U([t]);if(Ae(n)){const t=je(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new re(e)}class Ve{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Ve(t,0,F.min(),F.min(),F.min(),Fe.empty(),0)}static newFoundDocument(t,e,n,r){return new Ve(t,1,e,F.min(),n,r,0)}static newNoDocument(t,e){return new Ve(t,2,e,F.min(),F.min(),Fe.empty(),0)}static newUnknownDocument(t,e){return new Ve(t,3,e,F.min(),F.min(),Fe.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(F.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Fe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Fe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=F.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ve&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ve(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Be{constructor(t,e){this.position=t,this.inclusive=e}}function Ue(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?z.comparator(z.fromName(o.referenceValue),n.key):we(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ze(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ve(t.position[n],e.position[n]))return!1;return!0}class qe{constructor(t,e="asc"){this.field=t,this.dir=e}}function $e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ge{}class He extends Ge{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new nn(t,e,n):"array-contains"===e?new an(t,n):"in"===e?new cn(t,n):"not-in"===e?new un(t,n):"array-contains-any"===e?new ln(t,n):new He(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new rn(t,n):new sn(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(we(e,this.value)):null!==e&&ye(this.value)===ye(e)&&this.matchesComparison(we(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends Ge{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Ke(t,e)}matches(t){return Qe(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Qe(t){return"and"===t.op}function We(t){return"or"===t.op}function Ye(t){return Xe(t)&&Qe(t)}function Xe(t){for(const e of t.filters)if(e instanceof Ke)return!1;return!0}function Je(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+_e(t.value);if(Ye(t))return t.filters.map((t=>Je(t))).join(",");{const e=t.filters.map((t=>Je(t))).join(",");return`${t.op}(${e})`}}function Ze(t,e){return t instanceof He?function(t,e){return e instanceof He&&t.op===e.op&&t.field.isEqual(e.field)&&ve(t.value,e.value)}(t,e):t instanceof Ke?function(t,e){return e instanceof Ke&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&Ze(n,e.filters[r])),!0)}(t,e):void y()}function tn(t,e){const n=t.filters.concat(e);return Ke.create(n,t.op)}function en(t){return t instanceof He?function(t){return`${t.field.canonicalString()} ${t.op} ${_e(t.value)}`}(t):t instanceof Ke?function(t){return t.op.toString()+" {"+t.getFilters().map(en).join(" ,")+"}"}(t):"Filter"}class nn extends He{constructor(t,e,n){super(t,e,n),this.key=z.fromName(n.referenceValue)}matches(t){const e=z.comparator(t.key,this.key);return this.matchesComparison(e)}}class rn extends He{constructor(t,e){super(t,"in",e),this.keys=on(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class sn extends He{constructor(t,e){super(t,"not-in",e),this.keys=on(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function on(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>z.fromName(t.referenceValue)))}class an extends He{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ce(e)&&be(e.arrayValue,this.value)}}class cn extends He{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&be(this.value.arrayValue,e)}}class un extends He{constructor(t,e){super(t,"not-in",e)}matches(t){if(be(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!be(this.value.arrayValue,e)}}class ln extends He{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ce(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>be(this.value.arrayValue,t)))}}class hn{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function dn(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hn(t,e,n,r,i,s,o)}function fn(t){const e=b(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Je(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),gt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>_e(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>_e(t))).join(",")),e.ce=t}return e.ce}function pn(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ze(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ze(t.startAt,e.startAt)&&ze(t.endAt,e.endAt)}function mn(t){return z.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function gn(t,e){return t.filters.filter((t=>t instanceof He&&t.field.isEqual(e)))}function yn(t,e,n){let r=ge,i=!0;for(const n of gn(t,e)){let t=ge,e=!0;switch(n.op){case"<":case"<=":t=Me(n.value);break;case"==":case"in":case">=":t=n.value;break;case">":t=n.value,e=!1;break;case"!=":case"not-in":t=ge}Re({value:r,inclusive:i},{value:t,inclusive:e})<0&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];Re({value:r,inclusive:i},{value:t,inclusive:n.inclusive})<0&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}function vn(t,e,n){let r=me,i=!0;for(const n of gn(t,e)){let t=me,e=!0;switch(n.op){case">=":case">":t=Oe(n.value),e=!1;break;case"==":case"in":case"<=":t=n.value;break;case"<":t=n.value,e=!1;break;case"!=":case"not-in":t=me}Pe({value:r,inclusive:i},{value:t,inclusive:e})>0&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];Pe({value:r,inclusive:i},{value:t,inclusive:n.inclusive})>0&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}class bn{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function wn(t,e,n,r,i,s,o,a){return new bn(t,e,n,r,i,s,o,a)}function xn(t){return new bn(t)}function _n(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function En(t){return null!==t.collectionGroup}function In(t){const e=b(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new te(U.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.le.push(new qe(r,n))})),t.has(U.keyField().canonicalString())||e.le.push(new qe(U.keyField(),n))}return e.le}function Sn(t){const e=b(t);return e.he||(e.he=Tn(e,In(t))),e.he}function Tn(t,e){if("F"===t.limitType)return dn(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new qe(t.field,e)}));const n=t.endAt?new Be(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Be(t.startAt.position,t.startAt.inclusive):null;return dn(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cn(t,e){const n=t.filters.concat([e]);return new bn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dn(t,e,n){return new bn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kn(t,e){return pn(Sn(t),Sn(e))&&t.limitType===e.limitType}function An(t){return`${fn(Sn(t))}|lt:${t.limitType}`}function Nn(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>en(t))).join(", ")}]`),gt(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>_e(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>_e(t))).join(",")),`Target(${e})`}(Sn(t))}; limitType=${t.limitType})`}function Ln(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):z.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of In(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=Ue(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,In(t),e)||t.endAt&&!function(t,e,n){const r=Ue(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,In(t),e))}(t,e)}function Mn(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function On(t){return(e,n)=>{let r=!1;for(const i of In(t)){const t=Rn(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Rn(t,e,n){const r=t.field.isKeyField()?z.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?we(r,i):y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}class Pn{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Wt(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return Yt(this.inner)}size(){return this.innerSize}}const Fn=new Xt(z.comparator);function jn(){return Fn}const Vn=new Xt(z.comparator);function Bn(...t){let e=Vn;for(const n of t)e=e.insert(n.key,n);return e}function Un(t){let e=Vn;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function zn(){return $n()}function qn(){return $n()}function $n(){return new Pn((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Gn=new Xt(z.comparator),Hn=new te(z.comparator);function Kn(...t){let e=Hn;for(const n of t)e=e.add(n);return e}const Qn=new te(M);function Wn(){return Qn}function Yn(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yt(e)?"-0":e}}function Xn(t){return{integerValue:""+t}}function Jn(t,e){return vt(e)?Xn(e):Yn(t,e)}class Zn{constructor(){this._=void 0}}function tr(t,e,n){return t instanceof rr?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&le(e)&&(e=he(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ir?sr(t,e):t instanceof or?ar(t,e):function(t,e){const n=nr(t,e),r=ur(n)+ur(t.Ie);return Te(n)&&Te(t.Ie)?Xn(r):Yn(t.serializer,r)}(t,e)}function er(t,e,n){return t instanceof ir?sr(t,e):t instanceof or?ar(t,e):n}function nr(t,e){return t instanceof cr?function(t){return Te(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class rr extends Zn{}class ir extends Zn{constructor(t){super(),this.elements=t}}function sr(t,e){const n=lr(e);for(const e of t.elements)n.some((t=>ve(t,e)))||n.push(e);return{arrayValue:{values:n}}}class or extends Zn{constructor(t){super(),this.elements=t}}function ar(t,e){let n=lr(e);for(const e of t.elements)n=n.filter((t=>!ve(t,e)));return{arrayValue:{values:n}}}class cr extends Zn{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function ur(t){return ce(t.integerValue||t.doubleValue)}function lr(t){return Ce(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class hr{constructor(t,e){this.field=t,this.transform=e}}class dr{constructor(t,e){this.version=t,this.transformResults=e}}class fr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new fr}static exists(t){return new fr(void 0,t)}static updateTime(t){return new fr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function pr(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class mr{}function gr(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Tr(t.key,fr.none()):new xr(t.key,t.data,fr.none());{const n=t.data,r=Fe.empty();let i=new te(U.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new _r(t.key,r,new re(i.toArray()),fr.none())}}function yr(t,e,n){t instanceof xr?function(t,e,n){const r=t.value.clone(),i=Ir(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof _r?function(t,e,n){if(!pr(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Ir(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Er(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function vr(t,e,n,r){return t instanceof xr?function(t,e,n,r){if(!pr(t.precondition,e))return n;const i=t.value.clone(),s=Sr(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof _r?function(t,e,n,r){if(!pr(t.precondition,e))return n;const i=Sr(t.fieldTransforms,r,e),s=e.data;return s.setAll(Er(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return pr(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function br(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=nr(r.transform,t||null);null!=i&&(null===n&&(n=Fe.empty()),n.set(r.field,i))}return n||null}function wr(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&O(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ir&&e instanceof ir||t instanceof or&&e instanceof or?O(t.elements,e.elements,ve):t instanceof cr&&e instanceof cr?ve(t.Ie,e.Ie):t instanceof rr&&e instanceof rr}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xr extends mr{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _r extends mr{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Er(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ir(t,e,n){const r=new Map;v(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,er(o,a,n[i]))}return r}function Sr(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,tr(t,s,e))}return r}class Tr extends mr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cr extends mr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dr{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&yr(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=vr(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=vr(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=qn();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=gr(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(F.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Kn())}isEqual(t){return this.batchId===t.batchId&&O(this.mutations,t.mutations,((t,e)=>wr(t,e)))&&O(this.baseMutations,t.baseMutations,((t,e)=>wr(t,e)))}}class kr{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){v(t.mutations.length===n.length);let r=Gn;const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new kr(t,e,n,r)}}class Ar{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nr{constructor(t,e,n){this.alias=t,this.aggregateType=e,this.fieldPath=n}}class Lr{constructor(t,e){this.count=t,this.unchangedNames=e}}var Mr,Or;function Rr(t){switch(t){default:return y();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function Pr(t){if(void 0===t)return p("GRPC error has no .code"),w.UNKNOWN;switch(t){case Mr.OK:return w.OK;case Mr.CANCELLED:return w.CANCELLED;case Mr.UNKNOWN:return w.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return w.INTERNAL;case Mr.UNAVAILABLE:return w.UNAVAILABLE;case Mr.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Mr.NOT_FOUND:return w.NOT_FOUND;case Mr.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Mr.ABORTED:return w.ABORTED;case Mr.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Mr.DATA_LOSS:return w.DATA_LOSS;default:return y()}}(Or=Mr||(Mr={}))[Or.OK=0]="OK",Or[Or.CANCELLED=1]="CANCELLED",Or[Or.UNKNOWN=2]="UNKNOWN",Or[Or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Or[Or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Or[Or.NOT_FOUND=5]="NOT_FOUND",Or[Or.ALREADY_EXISTS=6]="ALREADY_EXISTS",Or[Or.PERMISSION_DENIED=7]="PERMISSION_DENIED",Or[Or.UNAUTHENTICATED=16]="UNAUTHENTICATED",Or[Or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Or[Or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Or[Or.ABORTED=10]="ABORTED",Or[Or.OUT_OF_RANGE=11]="OUT_OF_RANGE",Or[Or.UNIMPLEMENTED=12]="UNIMPLEMENTED",Or[Or.INTERNAL=13]="INTERNAL",Or[Or.UNAVAILABLE=14]="UNAVAILABLE",Or[Or.DATA_LOSS=15]="DATA_LOSS";let Fr=null;function jr(){return new TextEncoder}const Vr=new a.Integer([4294967295,4294967295],0);function Br(t){const e=jr().encode(t),n=new a.Md5;return n.update(e),new Uint8Array(n.digest())}function Ur(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new a.Integer([n,r],0),new a.Integer([i,s],0)]}class zr{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new qr(`Invalid padding: ${e}`);if(n<0)throw new qr(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new qr(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new qr(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=a.Integer.fromNumber(this.Te)}de(t,e,n){let r=t.add(e.multiply(a.Integer.fromNumber(n)));return 1===r.compare(Vr)&&(r=new a.Integer([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=Br(t),[n,r]=Ur(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,r,t);if(!this.Ae(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new zr(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=Br(t),[n,r]=Ur(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,r,t);this.Re(e)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $r{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Gr.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new $r(F.min(),r,new Xt(M),jn(),Kn())}}class Gr{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Gr(n,e,Kn(),Kn(),Kn())}}class Hr{constructor(t,e,n,r){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=r}}class Kr{constructor(t,e){this.targetId=t,this.fe=e}}class Qr{constructor(t,e,n=se.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Wr{constructor(){this.ge=0,this.pe=Jr(),this.ye=se.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Kn(),e=Kn(),n=Kn();return this.pe.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:y()}})),new Gr(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=Jr()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,v(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Yr{constructor(t){this.Le=t,this.ke=new Map,this.qe=jn(),this.Qe=Xr(),this.Ke=new Xt(M)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:y()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,r=this.Ye(e);if(r){const i=r.target;if(mn(i))if(0===n){const t=new z(i.path);this.We(e,t,Ve.newNoDocument(t,F.min()))}else v(1===n);else{const r=this.Ze(e);if(r!==n){const n=this.Xe(t),i=n?this.et(n,t,r):1;if(0!==i){this.He(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}null==Fr||Fr.tt(function(t,e,n,r,i){var s,o,a,c,u,l;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(l=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:t=>{var e;return null!==(e=null==r?void 0:r.mightContain(t))&&void 0!==e&&e}}),h}(r,t.fe,this.Le.nt(),n,i))}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=ue(n).toUint8Array()}catch(t){if(t instanceof ie)return m("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new zr(s,r,i)}catch(t){return m(t instanceof qr?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),r++)})),r}it(t){const e=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&mn(i.target)){const e=new z(i.target.path);null!==this.qe.get(e)||this.st(r,e)||this.We(r,e,Ve.newNoDocument(e,t))}n.De&&(e.set(r,n.ve()),n.Fe())}}));let n=Kn();this.Qe.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const r=new $r(t,e,this.Ke,this.qe,n);return this.qe=jn(),this.Qe=Xr(),this.Ke=new Xt(M),r}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const r=this.ze(t);this.st(t,e)?r.Me(e,1):r.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new Wr,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new te(M),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Wr),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Xr(){return new Xt(z.comparator)}function Jr(){return new Xt(z.comparator)}const Zr={asc:"ASCENDING",desc:"DESCENDING"},ti={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ei={and:"AND",or:"OR"};class ni{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ri(t,e){return t.useProto3Json||gt(e)?e:{value:e}}function ii(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function si(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oi(t,e){return ii(t,e.toTimestamp())}function ai(t){return v(!!t),F.fromTimestamp(function(t){const e=ae(t);return new P(e.seconds,e.nanos)}(t))}function ci(t,e){return ui(t,e).canonicalString()}function ui(t,e){const n=function(t){return new V(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function li(t){const e=V.fromString(t);return v(Li(e)),e}function hi(t,e){return ci(t.databaseId,e.path)}function di(t,e){const n=li(e);if(n.get(1)!==t.databaseId.projectId)throw new x(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new x(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(gi(n))}function fi(t,e){return ci(t.databaseId,e)}function pi(t){const e=li(t);return 4===e.length?V.emptyPath():gi(e)}function mi(t){return new V(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gi(t){return v(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function yi(t,e,n){return{name:hi(t,e),fields:n.value.mapValue.fields}}function vi(t,e,n){const r=di(t,e.name),i=ai(e.updateTime),s=e.createTime?ai(e.createTime):F.min(),o=new Fe({mapValue:{fields:e.fields}}),a=Ve.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function bi(t,e){let n;if(e instanceof xr)n={update:yi(t,e.key,e.value)};else if(e instanceof Tr)n={delete:hi(t,e.key)};else if(e instanceof _r)n={update:yi(t,e.key,e.data),updateMask:Ni(e.fieldMask)};else{if(!(e instanceof Cr))return y();n={verify:hi(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof rr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ir)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof or)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cr)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw y()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:oi(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y()}(t,e.precondition)),n}function wi(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?fr.updateTime(ai(t.updateTime)):void 0!==t.exists?fr.exists(t.exists):fr.none()}(e.currentDocument):fr.none(),r=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)v("REQUEST_TIME"===e.setToServerValue),n=new rr;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new ir(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new or(t)}else"increment"in e?n=new cr(t,e.increment):y();const r=U.fromServerFormat(e.fieldPath);return new hr(r,n)}(t,e))):[];if(e.update){e.update.name;const i=di(t,e.update.name),s=new Fe({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new re(e.map((t=>U.fromServerFormat(t))))}(e.updateMask);return new _r(i,s,t,n,r)}return new xr(i,s,n,r)}if(e.delete){const r=di(t,e.delete);return new Tr(r,n)}if(e.verify){const r=di(t,e.verify);return new Cr(r,n)}return y()}function xi(t,e){return{documents:[fi(t,e.path)]}}function _i(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fi(t,i);const s=function(t){if(0!==t.length)return Ai(Ke.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Di(t.field),direction:Si(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ri(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:i}}function Ei(t){let e=pi(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){v(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Ii(t);return e instanceof Ke&&Ye(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new qe(ki(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,gt(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Be(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new Be(n,e)}(n.endAt)),wn(e,i,o,s,a,"F",c,u)}function Ii(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ki(t.unaryFilter.field);return He.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ki(t.unaryFilter.field);return He.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ki(t.unaryFilter.field);return He.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ki(t.unaryFilter.field);return He.create(i,"!=",{nullValue:"NULL_VALUE"});default:return y()}}(t):void 0!==t.fieldFilter?function(t){return He.create(ki(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Ke.create(t.compositeFilter.filters.map((t=>Ii(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return y()}}(t.compositeFilter.op))}(t):y()}function Si(t){return Zr[t]}function Ti(t){return ti[t]}function Ci(t){return ei[t]}function Di(t){return{fieldPath:t.canonicalString()}}function ki(t){return U.fromServerFormat(t.fieldPath)}function Ai(t){return t instanceof He?function(t){if("=="===t.op){if(ke(t.value))return{unaryFilter:{field:Di(t.field),op:"IS_NAN"}};if(De(t.value))return{unaryFilter:{field:Di(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ke(t.value))return{unaryFilter:{field:Di(t.field),op:"IS_NOT_NAN"}};if(De(t.value))return{unaryFilter:{field:Di(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Di(t.field),op:Ti(t.op),value:t.value}}}(t):t instanceof Ke?function(t){const e=t.getFilters().map((t=>Ai(t)));return 1===e.length?e[0]:{compositeFilter:{op:Ci(t.op),filters:e}}}(t):y()}function Ni(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Li(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Mi{constructor(t,e,n,r,i=F.min(),s=F.min(),o=se.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Mi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Oi{constructor(t){this.ct=t}}function Ri(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pi(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(t,e){return{name:hi(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ii(t,e.version.toTimestamp()),createTime:ii(t,e.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fi(e.version)};else{if(!e.isUnknownDocument())return y();r.unknownDocument={path:n.path.toArray(),version:Fi(e.version)}}return r}function Pi(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ji(t){const e=new P(t.seconds,t.nanoseconds);return F.fromTimestamp(e)}function Vi(t,e){const n=(e.baseMutations||[]).map((e=>wi(t.ct,e)));for(let t=0;t<e.mutations.length-1;++t){const n=e.mutations[t];if(t+1<e.mutations.length&&void 0!==e.mutations[t+1].transform){const r=e.mutations[t+1];n.updateTransforms=r.transform.fieldTransforms,e.mutations.splice(t+1,1),++t}}const r=e.mutations.map((e=>wi(t.ct,e))),i=P.fromMillis(e.localWriteTimeMs);return new Dr(e.batchId,i,n,r)}function Bi(t){const e=ji(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?ji(t.lastLimboFreeSnapshotVersion):F.min();let r;return r=function(t){return void 0!==t.documents}(t.query)?function(t){return v(1===t.documents.length),Sn(xn(pi(t.documents[0])))}(t.query):function(t){return Sn(Ei(t))}(t.query),new Mi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,se.fromBase64String(t.resumeToken))}function Ui(t,e){const n=Fi(e.snapshotVersion),r=Fi(e.lastLimboFreeSnapshotVersion);let i;i=mn(e.target)?xi(t.ct,e.target):_i(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fn(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zi(t){const e=Ei({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Dn(e,e.limit,"L"):e}function qi(t,e){return new Ar(e.largestBatchId,wi(t.ct,e.overlayMutation))}function $i(t,e){const n=e.path.lastSegment();return[t,bt(e.path.popLast()),n]}function Gi(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Fi(r.readTime),documentKey:bt(r.documentKey.path),largestBatchId:r.largestBatchId}}class Hi{getBundleMetadata(t,e){return Ki(t).get(e).next((t=>{if(t)return function(t){return{id:t.bundleId,createTime:ji(t.createTime),version:t.version}}(t)}))}saveBundleMetadata(t,e){return Ki(t).put(function(t){return{bundleId:t.id,createTime:Fi(ai(t.createTime)),version:t.version}}(e))}getNamedQuery(t,e){return Qi(t).get(e).next((t=>{if(t)return function(t){return{name:t.name,query:zi(t.bundledQuery),readTime:ji(t.readTime)}}(t)}))}saveNamedQuery(t,e){return Qi(t).put(function(t){return{name:t.name,readTime:Fi(ai(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function Ki(t){return Kt(t,"bundles")}function Qi(t){return Kt(t,"namedQueries")}class Wi{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){const n=e.uid||"";return new Wi(t,n)}getOverlay(t,e){return Yi(t).get($i(this.userId,e)).next((t=>t?qi(this.serializer,t):null))}getOverlays(t,e){const n=zn();return rt.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){const r=[];return n.forEach(((n,i)=>{const s=new Ar(e,i);r.push(this.ht(t,s))})),rt.waitFor(r)}removeOverlaysForBatchId(t,e,n){const r=new Set;e.forEach((t=>r.add(bt(t.getCollectionPath()))));const i=[];return r.forEach((e=>{const r=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);i.push(Yi(t).H("collectionPathOverlayIndex",r))})),rt.waitFor(i)}getOverlaysForCollection(t,e,n){const r=zn(),i=bt(e),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Yi(t).W("collectionPathOverlayIndex",s).next((t=>{for(const e of t){const t=qi(this.serializer,e);r.set(t.getKey(),t)}return r}))}getOverlaysForCollectionGroup(t,e,n,r){const i=zn();let s;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Yi(t).Y({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=qi(this.serializer,e);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(t,e){return Yi(t).put(function(t,e,n){const[r,i,s]=$i(e,n.mutation.key);return{userId:e,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:bi(t.ct,n.mutation)}}(this.serializer,this.userId,e))}}function Yi(t){return Kt(t,"documentOverlays")}class Xi{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(ce(t.integerValue));else if("doubleValue"in t){const n=ce(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),yt(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(ue(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?Le(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):y()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),z.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}function Ji(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Zi(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const r=Ji(255&t[n]);if(e+=r,8!==r)break}return e}(t);return Math.ceil(e/8)}Xi.bt=new Xi;class ts{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Ct(n.value),n=e.next();this.vt()}Ft(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Mt(n.value),n=e.next();this.xt()}Ot(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Ct(t);else if(t<2048)this.Ct(960|t>>>6),this.Ct(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Ct(480|t>>>12),this.Ct(128|63&t>>>6),this.Ct(128|63&t);else{const t=e.codePointAt(0);this.Ct(240|t>>>18),this.Ct(128|63&t>>>12),this.Ct(128|63&t>>>6),this.Ct(128|63&t)}}this.vt()}Nt(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Mt(t);else if(t<2048)this.Mt(960|t>>>6),this.Mt(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Mt(480|t>>>12),this.Mt(128|63&t>>>6),this.Mt(128|63&t);else{const t=e.codePointAt(0);this.Mt(240|t>>>18),this.Mt(128|63&t>>>12),this.Mt(128|63&t>>>6),this.Mt(128|63&t)}}this.xt()}Bt(t){const e=this.Lt(t),n=Zi(e);this.kt(1+n),this.buffer[this.position++]=255&n;for(let t=e.length-n;t<e.length;++t)this.buffer[this.position++]=255&e[t]}qt(t){const e=this.Lt(t),n=Zi(e);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let t=e.length-n;t<e.length;++t)this.buffer[this.position++]=~(255&e[t])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Lt(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=!!(128&e[0]);e[0]^=n?255:128;for(let t=1;t<e.length;++t)e[t]^=n?255:0;return e}Ct(t){const e=255&t;0===e?(this.Kt(0),this.Kt(255)):255===e?(this.Kt(255),this.Kt(0)):this.Kt(e)}Mt(t){const e=255&t;0===e?(this.Ut(0),this.Ut(255)):255===e?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class es{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Bt(t)}Tt(){this.Gt.Qt()}}class ns{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}}class rs{constructor(){this.Gt=new ts,this.zt=new es(this.Gt),this.jt=new ns(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return 0===t?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class is{constructor(t,e,n,r){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=r}Jt(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new is(this.indexId,this.documentKey,this.arrayValue,n)}}function ss(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=os(t.arrayValue,e.arrayValue),0!==n?n:(n=os(t.directionalValue,e.directionalValue),0!==n?n:z.comparator(t.documentKey,e.documentKey)))}function os(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class as{constructor(t){this.Yt=new te(((t,e)=>U.comparator(t.field,e.field))),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(const e of t.filters){const t=e;t.isInequality()?this.Yt=this.Yt.add(t):this.Xt.push(t)}}get en(){return this.Yt.size>1}tn(t){if(v(t.collectionGroup===this.collectionId),this.en)return!1;const e=$(t);if(void 0!==e&&!this.nn(e))return!1;const n=G(t);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const t=this.Yt.getIterator().getNext();if(!r.has(t.field.canonicalString())){const e=n[i];if(!this.rn(t,e)||!this.sn(this.Zt[s++],e))return!1}++i}for(;i<n.length;++i){const t=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],t))return!1}return!0}on(){if(this.en)return null;let t=new te(U.comparator);const e=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)e.push(new K(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new K(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new K(n.field,"asc"===n.dir?0:1)));return new q(q.UNKNOWN_ID,this.collectionId,e,W.empty())}nn(t){for(const e of this.Xt)if(this.rn(e,t))return!0;return!1}rn(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function cs(t){var e,n;if(v(t instanceof He||t instanceof Ke),t instanceof He){if(t instanceof cn){const r=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map((e=>He.create(t.field,"==",e))))||[];return Ke.create(r,"or")}return t}const r=t.filters.map((t=>cs(t)));return Ke.create(r,t.op)}function us(t){if(0===t.getFilters().length)return[];const e=fs(cs(t));return v(ds(e)),ls(e)||hs(e)?[e]:e.getFilters()}function ls(t){return t instanceof He}function hs(t){return t instanceof Ke&&Ye(t)}function ds(t){return ls(t)||hs(t)||function(t){if(t instanceof Ke&&We(t)){for(const e of t.getFilters())if(!ls(e)&&!hs(e))return!1;return!0}return!1}(t)}function fs(t){if(v(t instanceof He||t instanceof Ke),t instanceof He)return t;if(1===t.filters.length)return fs(t.filters[0]);const e=t.filters.map((t=>fs(t)));let n=Ke.create(e,t.op);return n=gs(n),ds(n)?n:(v(n instanceof Ke),v(Qe(n)),v(n.filters.length>1),n.filters.reduce(((t,e)=>ps(t,e))))}function ps(t,e){let n;return v(t instanceof He||t instanceof Ke),v(e instanceof He||e instanceof Ke),n=t instanceof He?e instanceof He?function(t,e){return Ke.create([t,e],"and")}(t,e):ms(t,e):e instanceof He?ms(e,t):function(t,e){if(v(t.filters.length>0&&e.filters.length>0),Qe(t)&&Qe(e))return tn(t,e.getFilters());const n=We(t)?t:e,r=We(t)?e:t,i=n.filters.map((t=>ps(t,r)));return Ke.create(i,"or")}(t,e),gs(n)}function ms(t,e){if(Qe(e))return tn(e,t.getFilters());{const n=e.filters.map((e=>ps(t,e)));return Ke.create(n,"or")}}function gs(t){if(v(t instanceof He||t instanceof Ke),t instanceof He)return t;const e=t.getFilters();if(1===e.length)return gs(e[0]);if(Xe(t))return t;const n=e.map((t=>gs(t))),r=[];return n.forEach((e=>{e instanceof He?r.push(e):e instanceof Ke&&(e.op===t.op?r.push(...e.filters):r.push(e))})),1===r.length?r[0]:Ke.create(r,t.op)}class ys{constructor(){this._n=new vs}addToCollectionParentIndex(t,e){return this._n.add(e),rt.resolve()}getCollectionParents(t,e){return rt.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return rt.resolve()}deleteFieldIndex(t,e){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,e){return rt.resolve()}getDocumentsMatchingTarget(t,e){return rt.resolve(null)}getIndexType(t,e){return rt.resolve(0)}getFieldIndexes(t,e){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,e){return rt.resolve(J.min())}getMinOffsetFromCollectionGroup(t,e){return rt.resolve(J.min())}updateCollectionGroup(t,e,n){return rt.resolve()}updateIndexEntries(t,e){return rt.resolve()}}class vs{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new te(V.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new te(V.comparator)).toArray()}}const bs=new Uint8Array(0);class ws{constructor(t,e){this.databaseId=e,this.an=new vs,this.un=new Pn((t=>fn(t)),((t,e)=>pn(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.an.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener((()=>{this.an.add(e)}));const i={collectionId:n,parent:bt(r)};return xs(t).put(i)}return rt.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[R(e),""],!1,!0);return xs(t).W(r).next((t=>{for(const r of t){if(r.collectionId!==e)break;n.push(_t(r.parent))}return n}))}addFieldIndex(t,e){const n=Es(t),r=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);delete r.indexId;const i=n.add(r);if(e.indexState){const n=Is(t);return i.next((t=>{n.put(Gi(t,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return i.next()}deleteFieldIndex(t,e){const n=Es(t),r=Is(t),i=_s(t);return n.delete(e.indexId).next((()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Es(t),n=_s(t),r=Is(t);return e.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(t,e){return rt.forEach(this.cn(e),(e=>this.getIndexType(t,e).next((n=>{if(0===n||1===n){const n=new as(e).on();if(null!=n)return this.addFieldIndex(t,n)}}))))}getDocumentsMatchingTarget(t,e){const n=_s(t);let r=!0;const i=new Map;return rt.forEach(this.cn(e),(e=>this.ln(t,e).next((t=>{r&&(r=!!t),i.set(e,t)})))).next((()=>{if(r){let t=Kn();const r=[];return rt.forEach(i,((i,s)=>{f("IndexedDbIndexManager",`Using index ${function(t){return`id=${t.indexId}|cg=${t.collectionGroup}|f=${t.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`}(i)} to execute ${fn(e)}`);const o=function(t,e){const n=$(e);if(void 0===n)return null;for(const e of gn(t,n.fieldPath))switch(e.op){case"array-contains-any":return e.value.arrayValue.values||[];case"array-contains":return[e.value]}return null}(s,i),a=function(t,e){const n=new Map;for(const r of G(e))for(const e of gn(t,r.fieldPath))switch(e.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(s,i),c=function(t,e){const n=[];let r=!0;for(const i of G(e)){const e=0===i.kind?yn(t,i.fieldPath,t.startAt):vn(t,i.fieldPath,t.startAt);n.push(e.value),r&&(r=e.inclusive)}return new Be(n,r)}(s,i),u=function(t,e){const n=[];let r=!0;for(const i of G(e)){const e=0===i.kind?vn(t,i.fieldPath,t.endAt):yn(t,i.fieldPath,t.endAt);n.push(e.value),r&&(r=e.inclusive)}return new Be(n,r)}(s,i),l=this.hn(i,s,c),h=this.hn(i,s,u),d=this.Pn(i,s,a),p=this.In(i.indexId,o,l,c.inclusive,h,u.inclusive,d);return rt.forEach(p,(i=>n.j(i,e.limit).next((e=>{e.forEach((e=>{const n=z.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),r.push(n))}))}))))})).next((()=>r))}return rt.resolve(null)}))}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:us(Ke.create(t.filters,"and")).map((e=>dn(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt))),this.un.set(t,e),e)}In(t,e,n,r,i,s,o){const a=(null!=e?e.length:1)*Math.max(n.length,i.length),c=a/(null!=e?e.length:1),u=[];for(let l=0;l<a;++l){const a=e?this.Tn(e[l/c]):bs,h=this.En(t,a,n[l%c],r),d=this.dn(t,a,i[l%c],s),f=o.map((e=>this.En(t,a,e,!0)));u.push(...this.createRange(h,d,f))}return u}En(t,e,n,r){const i=new is(t,z.empty(),e,n);return r?i:i.Jt()}dn(t,e,n,r){const i=new is(t,z.empty(),e,n);return r?i.Jt():i}ln(t,e){const n=new as(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next((t=>{let e=null;for(const r of t)n.tn(r)&&(!e||r.fields.length>e.fields.length)&&(e=r);return e}))}getIndexType(t,e){let n=2;const r=this.cn(e);return rt.forEach(r,(e=>this.ln(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new te(U.comparator),n=!1;for(const r of t.filters)for(const t of r.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const n of t.orderBy)n.field.isKeyField()||(e=e.add(n.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>function(t){return null!==t.limit}(e)&&r.length>1&&2===n?1:n))}An(t,e){const n=new rs;for(const r of G(t)){const t=e.data.field(r.fieldPath);if(null==t)return null;const i=n.Ht(r.kind);Xi.bt.Pt(t,i)}return n.Wt()}Tn(t){const e=new rs;return Xi.bt.Pt(t,e.Ht(0)),e.Wt()}Rn(t,e){const n=new rs;return Xi.bt.Pt(Se(this.databaseId,e),n.Ht(function(t){const e=G(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Wt()}Pn(t,e,n){if(null===n)return[];let r=[];r.push(new rs);let i=0;for(const s of G(t)){const t=n[i++];for(const n of r)if(this.Vn(e,s.fieldPath)&&Ce(t))r=this.mn(r,s,t);else{const e=n.Ht(s.kind);Xi.bt.Pt(t,e)}}return this.fn(r)}hn(t,e,n){return this.Pn(t,e,n.position)}fn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Wt();return e}mn(t,e,n){const r=[...t],i=[];for(const t of n.arrayValue.values||[])for(const n of r){const r=new rs;r.seed(n.Wt()),Xi.bt.Pt(t,r.Ht(e.kind)),i.push(r)}return i}Vn(t,e){return!!t.filters.find((t=>t instanceof He&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=Es(t),r=Is(t);return(e?n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.W()).next((t=>{const e=[];return rt.forEach(t,(t=>r.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new W(e.sequenceNumber,new J(ji(e.readTime),new z(_t(e.documentKey)),e.largestBatchId)):W.empty(),r=t.fields.map((([t,e])=>new K(U.fromServerFormat(t),e)));return new q(t.indexId,t.collectionGroup,r,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:M(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const r=Es(t),i=Is(t);return this.gn(t).next((t=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>rt.forEach(e,(e=>i.put(Gi(e.indexId,this.uid,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return rt.forEach(e,((e,r)=>{const i=n.get(e.collectionGroup);return(i?rt.resolve(i):this.getFieldIndexes(t,e.collectionGroup)).next((i=>(n.set(e.collectionGroup,i),rt.forEach(i,(n=>this.pn(t,e,n).next((e=>{const i=this.yn(r,n);return e.isEqual(i)?rt.resolve():this.wn(t,r,n,e,i)})))))))}))}Sn(t,e,n,r){return _s(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,e.key),documentKey:e.key.path.toArray()})}bn(t,e,n,r){return _s(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,e.key),e.key.path.toArray()])}pn(t,e,n){const r=_s(t);let i=new te(ss);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,e)])},((t,r)=>{i=i.add(new is(n.indexId,e,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(t,e){let n=new te(ss);const r=this.An(e,t);if(null==r)return n;const i=$(e);if(null!=i){const s=t.data.field(i.fieldPath);if(Ce(s))for(const i of s.arrayValue.values||[])n=n.add(new is(e.indexId,t.key,this.Tn(i),r))}else n=n.add(new is(e.indexId,t.key,bs,r));return n}wn(t,e,n,r,i){f("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(t,e,n,r,i){const s=t.getIterator(),o=e.getIterator();let a=ne(s),c=ne(o);for(;a||c;){let t=!1,e=!1;if(a&&c){const r=n(a,c);r<0?e=!0:r>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(r(c),c=ne(o)):e?(i(a),a=ne(s)):(a=ne(s),c=ne(o))}}(r,i,ss,(r=>{s.push(this.Sn(t,e,n,r))}),(r=>{s.push(this.bn(t,e,n,r))})),rt.waitFor(s)}gn(t){let e=1;return Is(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,r)=>{r.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>ss(t,e))).filter(((t,e,n)=>!e||0!==ss(t,n[e-1])));const r=[];r.push(t);for(const i of n){const n=ss(i,t),s=ss(i,e);if(0===n)r[0]=t.Jt();else if(n>0&&s<0)r.push(i),r.push(i.Jt());else if(s>0)break}r.push(e);const i=[];for(let t=0;t<r.length;t+=2){if(this.Dn(r[t],r[t+1]))return[];const e=[r[t].indexId,this.uid,r[t].arrayValue,r[t].directionalValue,bs,[]],n=[r[t+1].indexId,this.uid,r[t+1].arrayValue,r[t+1].directionalValue,bs,[]];i.push(IDBKeyRange.bound(e,n))}return i}Dn(t,e){return ss(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Ss)}getMinOffset(t,e){return rt.mapArray(this.cn(e),(e=>this.ln(t,e).next((t=>t||y())))).next(Ss)}}function xs(t){return Kt(t,"collectionParents")}function _s(t){return Kt(t,"indexEntries")}function Es(t){return Kt(t,"indexConfiguration")}function Is(t){return Kt(t,"indexState")}function Ss(t){v(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Z(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new J(e.readTime,e.documentKey,n)}const Ts={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Cs{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Cs(t,Cs.DEFAULT_COLLECTION_PERCENTILE,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ds(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((t,e,n)=>(a++,n.delete())));s.push(c.next((()=>{v(1===a)})));const u=[];for(const t of n.mutations){const r=St(e,t.key.path,n.batchId);s.push(i.delete(r)),u.push(t.key)}return rt.waitFor(s).next((()=>u))}function ks(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y();e=t.noDocument}return JSON.stringify(e).length}Cs.DEFAULT_COLLECTION_PERCENTILE=10,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cs.DEFAULT=new Cs(41943040,Cs.DEFAULT_COLLECTION_PERCENTILE,Cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cs.DISABLED=new Cs(-1,0,0);class As{constructor(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(t,e,n,r){v(""!==t.uid);const i=t.isAuthenticated()?t.uid:"";return new As(i,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ls(t).Y({index:"userMutationsIndex",range:n},((t,n,r)=>{e=!1,r.done()})).next((()=>e))}addMutationBatch(t,e,n,r){const i=Ms(t),s=Ls(t);return s.add({}).next((o=>{v("number"==typeof o);const a=new Dr(o,e,n,r),c=function(t,e,n){const r=n.baseMutations.map((e=>bi(t.ct,e))),i=n.mutations.map((e=>bi(t.ct,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let l=new te(((t,e)=>M(t.canonicalString(),e.canonicalString())));for(const t of r){const e=St(this.userId,t.key.path,o);l=l.add(t.key.path.popLast()),u.push(s.put(c)),u.push(i.put(e,Tt))}return l.forEach((e=>{u.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),rt.waitFor(u).next((()=>a))}))}lookupMutationBatch(t,e){return Ls(t).get(e).next((t=>t?(v(t.userId===this.userId),Vi(this.serializer,t)):null))}vn(t,e){return this.Cn[e]?rt.resolve(this.Cn[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.Cn[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ls(t).Y({index:"userMutationsIndex",range:r},((t,e,r)=>{e.userId===this.userId&&(v(e.batchId>=n),i=Vi(this.serializer,e)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ls(t).Y({index:"userMutationsIndex",range:e,reverse:!0},((t,e,r)=>{n=e.batchId,r.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ls(t).W("userMutationsIndex",e).next((t=>t.map((t=>Vi(this.serializer,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=It(this.userId,e.path),r=IDBKeyRange.lowerBound(n),i=[];return Ms(t).Y({range:r},((n,r,s)=>{const[o,a,c]=n,u=_t(a);if(o===this.userId&&e.path.isEqual(u))return Ls(t).get(c).next((t=>{if(!t)throw y();v(t.userId===this.userId),i.push(Vi(this.serializer,t))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new te(M);const r=[];return e.forEach((e=>{const i=It(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=Ms(t).Y({range:s},((t,r,i)=>{const[s,o,a]=t,c=_t(o);s===this.userId&&e.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),rt.waitFor(r).next((()=>this.Fn(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,i=It(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new te(M);return Ms(t).Y({range:s},((t,e,i)=>{const[s,a,c]=t,u=_t(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(t,o)))}Fn(t,e){const n=[],r=[];return e.forEach((e=>{r.push(Ls(t).get(e).next((t=>{if(null===t)throw y();v(t.userId===this.userId),n.push(Vi(this.serializer,t))})))})),rt.waitFor(r).next((()=>n))}removeMutationBatch(t,e){return Ds(t.ae,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.Mn(e.batchId)})),rt.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return rt.resolve();const n=IDBKeyRange.lowerBound(function(t){return[t]}(this.userId)),r=[];return Ms(t).Y({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=_t(t[1]);r.push(e)}else n.done()})).next((()=>{v(0===r.length)}))}))}containsKey(t,e){return Ns(t,this.userId,e)}xn(t){return Os(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Ns(t,e,n){const r=It(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ms(t).Y({range:s,J:!0},((t,n,r)=>{const[s,a,c]=t;s===e&&a===i&&(o=!0),r.done()})).next((()=>o))}function Ls(t){return Kt(t,"mutations")}function Ms(t){return Kt(t,"documentMutations")}function Os(t){return Kt(t,"mutationQueues")}class Rs{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Rs(0)}static Bn(){return new Rs(-1)}}class Ps{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Ln(t).next((e=>{const n=new Rs(e.highestTargetId);return e.highestTargetId=n.next(),this.kn(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.Ln(t).next((t=>F.fromTimestamp(new P(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.Ln(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.Ln(t).next((r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.kn(t,r))))}addTargetData(t,e){return this.qn(t,e).next((()=>this.Ln(t).next((n=>(n.targetCount+=1,this.Qn(e,n),this.kn(t,n))))))}updateTargetData(t,e){return this.qn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Fs(t).delete(e.targetId))).next((()=>this.Ln(t))).next((e=>(v(e.targetCount>0),e.targetCount-=1,this.kn(t,e))))}removeTargets(t,e,n){let r=0;const i=[];return Fs(t).Y(((s,o)=>{const a=Bi(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(t,a)))})).next((()=>rt.waitFor(i))).next((()=>r))}forEachTarget(t,e){return Fs(t).Y(((t,n)=>{const r=Bi(n);e(r)}))}Ln(t){return js(t).get("targetGlobalKey").next((t=>(v(null!==t),t)))}kn(t,e){return js(t).put("targetGlobalKey",e)}qn(t,e){return Fs(t).put(Ui(this.serializer,e))}Qn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Ln(t).next((t=>t.targetCount))}getTargetData(t,e){const n=fn(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Fs(t).Y({range:r,index:"queryTargetsIndex"},((t,n,r)=>{const s=Bi(n);pn(e,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(t,e,n){const r=[],i=Vs(t);return e.forEach((e=>{const s=bt(e.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(t,n,e))})),rt.waitFor(r)}removeMatchingKeys(t,e,n){const r=Vs(t);return rt.forEach(e,(e=>{const i=bt(e.path);return rt.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=Vs(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Vs(t);let i=Kn();return r.Y({range:n,J:!0},((t,e,n)=>{const r=_t(t[1]),s=new z(r);i=i.add(s)})).next((()=>i))}containsKey(t,e){const n=bt(e.path),r=IDBKeyRange.bound([n],[R(n)],!1,!0);let i=0;return Vs(t).Y({index:"documentTargetsIndex",J:!0,range:r},(([t,e],n,r)=>{0!==t&&(i++,r.done())})).next((()=>i>0))}_t(t,e){return Fs(t).get(e).next((t=>t?Bi(t):null))}}function Fs(t){return Kt(t,"targets")}function js(t){return Kt(t,"targetGlobal")}function Vs(t){return Kt(t,"targetDocuments")}function Bs([t,e],[n,r]){const i=M(t,n);return 0===i?M(e,r):i}class Us{constructor(t){this.Kn=t,this.buffer=new te(Bs),this.$n=0}Un(){return++this.$n}Wn(t){const e=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Bs(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class zs{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(t){f("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ct(t)?f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await nt(t)}await this.zn(3e5)}))}}class qs{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.Hn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return rt.resolve(mt._e);const n=new Us(e);return this.jn.forEachTarget(t,(t=>n.Wn(t.sequenceNumber))).next((()=>this.jn.Jn(t,(t=>n.Wn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.jn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(Ts)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ts):this.Yn(t,e)))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,e){let n,r,i,o,a,c,u;const l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),this.nthSequenceNumber(t,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(t,n,e)))).next((e=>(i=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(u=Date.now(),d()<=s.LogLevel.DEBUG&&f("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-l}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${t} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-l}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t}))))}}function $s(t,e){return new qs(t,e)}class Gs{constructor(t,e){this.db=t,this.garbageCollector=$s(this,e)}Hn(t){const e=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Zn(t){let e=0;return this.Jn(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Jn(t,e){return this.Xn(t,((t,n)=>e(n)))}addReference(t,e,n){return Hs(t,n)}removeReference(t,e,n){return Hs(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Hs(t,e)}er(t,e){return function(t,e){let n=!1;return Os(t).Z((r=>Ns(t,r,e).next((t=>(t&&(n=!0),rt.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(t,((s,o)=>{if(o<=e){const e=this.er(t,s).next((e=>{if(!e)return i++,n.getEntry(t,s).next((()=>(n.removeEntry(s,F.min()),Vs(t).delete(function(t){return[0,bt(t.path)]}(s)))))}));r.push(e)}})).next((()=>rt.waitFor(r))).next((()=>n.apply(t))).next((()=>i))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Hs(t,e)}Xn(t,e){const n=Vs(t);let r,i=mt._e;return n.Y({index:"documentTargetsIndex"},(([t,n],{path:s,sequenceNumber:o})=>{0===t?(i!==mt._e&&e(new z(_t(r)),i),i=o,r=s):i=mt._e})).next((()=>{i!==mt._e&&e(new z(_t(r)),i)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Hs(t,e){return Vs(t).put(function(t,e){return{targetId:0,path:bt(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}class Ks{constructor(){this.changes=new Pn((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ve.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?rt.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Qs{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return Js(t).put(n)}removeEntry(t,e,n){return Js(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Pi(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.tr(t,n))))}getEntry(t,e){let n=Ve.newInvalidDocument(e);return Js(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zs(e))},((t,r)=>{n=this.nr(e,r)})).next((()=>n))}rr(t,e){let n={size:0,document:Ve.newInvalidDocument(e)};return Js(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zs(e))},((t,r)=>{n={document:this.nr(e,r),size:ks(r)}})).next((()=>n))}getEntries(t,e){let n=jn();return this.ir(t,e,((t,e)=>{const r=this.nr(t,e);n=n.insert(t,r)})).next((()=>n))}sr(t,e){let n=jn(),r=new Xt(z.comparator);return this.ir(t,e,((t,e)=>{const i=this.nr(t,e);n=n.insert(t,i),r=r.insert(t,ks(e))})).next((()=>({documents:n,_r:r})))}ir(t,e,n){if(e.isEmpty())return rt.resolve();let r=new te(eo);e.forEach((t=>r=r.add(t)));const i=IDBKeyRange.bound(Zs(r.first()),Zs(r.last())),s=r.getIterator();let o=s.getNext();return Js(t).Y({index:"documentKeyIndex",range:i},((t,e,r)=>{const i=z.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&eo(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,e),o=s.hasNext()?s.getNext():null),o?r.U(Zs(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(t,e,n,r,i){const s=e.path,o=[s.popLast().toArray(),s.lastSegment(),Pi(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Js(t).W(IDBKeyRange.bound(o,a,!0)).next((t=>{null==i||i.incrementDocumentReadCount(t.length);let n=jn();for(const i of t){const t=this.nr(z.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);t.isFoundDocument()&&(Ln(e,t)||r.has(t.key))&&(n=n.insert(t.key,t))}return n}))}getAllFromCollectionGroup(t,e,n,r){let i=jn();const s=to(e,n),o=to(e,J.max());return Js(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((t,e,n)=>{const s=this.nr(z.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(t){return new Ys(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return Xs(t).get("remoteDocumentGlobalKey").next((t=>(v(!!t),t)))}tr(t,e){return Xs(t).put("remoteDocumentGlobalKey",e)}nr(t,e){if(e){const t=function(t,e){let n;if(e.document)n=vi(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=z.fromSegments(e.noDocument.path),r=ji(e.noDocument.readTime);n=Ve.newNoDocument(t,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return y();{const t=z.fromSegments(e.unknownDocument.path),r=ji(e.unknownDocument.version);n=Ve.newUnknownDocument(t,r)}}return e.readTime&&n.setReadTime(function(t){const e=new P(t[0],t[1]);return F.fromTimestamp(e)}(e.readTime)),n}(this.serializer,e);if(!t.isNoDocument()||!t.version.isEqual(F.min()))return t}return Ve.newInvalidDocument(t)}}function Ws(t){return new Qs(t)}class Ys extends Ks{constructor(t,e){super(),this.ar=t,this.trackRemovals=e,this.ur=new Pn((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,r=new te(((t,e)=>M(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(e.push(this.ar.removeEntry(t,i,o.readTime)),s.isValidDocument()){const a=Ri(this.ar.serializer,s);r=r.add(i.path.popLast());const c=ks(a);n+=c-o.size,e.push(this.ar.addEntry(t,i,a))}else if(n-=o.size,this.trackRemovals){const n=Ri(this.ar.serializer,s.convertToNoDocument(F.min()));e.push(this.ar.addEntry(t,i,n))}})),r.forEach((n=>{e.push(this.ar.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.ar.updateMetadata(t,n)),rt.waitFor(e)}getFromCache(t,e){return this.ar.rr(t,e).next((t=>(this.ur.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.ar.sr(t,e).next((({documents:t,_r:e})=>(e.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t)))}}function Xs(t){return Kt(t,"remoteDocumentGlobal")}function Js(t){return Kt(t,"remoteDocumentsV14")}function Zs(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function to(t,e){const n=e.documentKey.path.toArray();return[t,Pi(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function eo(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let t=0;t<n.length-2&&t<r.length-2;++t)if(i=M(n[t],r[t]),i)return i;return i=M(n.length,r.length),i||(i=M(n[n.length-2],r[r.length-2]),i||M(n[n.length-1],r[r.length-1]))}class no{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class ro{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&vr(n.mutation,t,re.empty(),P.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Kn()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Kn()){const r=zn();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=Bn();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=zn();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Kn())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=jn();const s=$n(),o=$n();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof _r)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),vr(o.mutation,e,o.mutation.getFieldMask(),P.now())):s.set(e.key,re.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new no(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=$n();let r=new Xt(((t,e)=>t-e)),i=Kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||re.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||Kn()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=qn();c.forEach((t=>{if(!i.has(t)){const r=gr(e.get(t),n.get(t));null!==r&&u.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,u))}return rt.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return z.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):En(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):rt.resolve(zn());let o=-1,a=i;return s.next((e=>rt.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?rt.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,Kn()))).next((t=>({batchId:o,changes:Un(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new z(e)).next((t=>{let e=Bn();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=Bn();return this.indexManager.getCollectionParents(t,i).next((o=>rt.forEach(o,(o=>{const a=function(t,e){return new bn(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,Ve.newInvalidDocument(r)))}));let n=Bn();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&vr(s.mutation,r,re.empty(),P.now()),Ln(e,r)&&(n=n.insert(t,r))})),n}))}}class io{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return rt.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:ai(t.createTime)}}(e)),rt.resolve()}getNamedQuery(t,e){return rt.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:zi(t.bundledQuery),readTime:ai(t.readTime)}}(e)),rt.resolve()}}class so{constructor(){this.overlays=new Xt(z.comparator),this.hr=new Map}getOverlay(t,e){return rt.resolve(this.overlays.get(e))}getOverlays(t,e){const n=zn();return rt.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.ht(t,e,r)})),rt.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),rt.resolve()}getOverlaysForCollection(t,e,n){const r=zn(),i=e.length+1,s=new z(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return rt.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new Xt(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=zn(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=zn(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return rt.resolve(o)}ht(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Ar(e,n));let i=this.hr.get(e);void 0===i&&(i=Kn(),this.hr.set(e,i)),this.hr.set(e,i.add(n.key))}}class oo{constructor(){this.Pr=new te(ao.Ir),this.Tr=new te(ao.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new ao(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new ao(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new z(new V([])),n=new ao(e,t),r=new ao(e,t+1),i=[];return this.Tr.forEachInRange([n,r],(t=>{this.Ar(t),i.push(t.key)})),i}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new z(new V([])),n=new ao(e,t),r=new ao(e,t+1);let i=Kn();return this.Tr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new ao(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class ao{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return z.comparator(t.key,e.key)||M(t.pr,e.pr)}static Er(t,e){return M(t.pr,e.pr)||z.comparator(t.key,e.key)}}class co{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new te(ao.Ir)}checkEmpty(t){return rt.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Dr(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.wr=this.wr.add(new ao(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return rt.resolve(s)}lookupMutationBatch(t,e){return rt.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),i=r<0?0:r;return rt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new ao(e,0),r=new ao(e,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(t=>{const e=this.Sr(t.pr);i.push(e)})),rt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new te(M);return e.forEach((t=>{const e=new ao(t,0),r=new ao(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,r],(t=>{n=n.add(t.pr)}))})),rt.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;z.isDocumentKey(i)||(i=i.child(""));const s=new ao(new z(i),0);let o=new te(M);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.pr)),!0)}),s),rt.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){v(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return rt.forEach(e.mutations,(r=>{const i=new ao(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new ao(e,0),r=this.wr.firstAfterOrEqual(n);return rt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class uo{constructor(t){this.vr=t,this.docs=new Xt(z.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return rt.resolve(n?n.document.mutableCopy():Ve.newInvalidDocument(e))}getEntries(t,e){let n=jn();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ve.newInvalidDocument(t))})),rt.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=jn();const s=e.path,o=new z(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Z(X(o),n)<=0||(r.has(o.key)||Ln(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return rt.resolve(i)}getAllFromCollectionGroup(t,e,n,r){y()}Fr(t,e){return rt.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new lo(this)}getSize(t){return rt.resolve(this.size)}}class lo extends Ks{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)})),rt.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class ho{constructor(t){this.persistence=t,this.Mr=new Pn((t=>fn(t)),pn),this.lastRemoteSnapshotVersion=F.min(),this.highestTargetId=0,this.Or=0,this.Nr=new oo,this.targetCount=0,this.Br=Rs.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),rt.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new Rs(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,rt.resolve()}updateTargetData(t,e){return this.qn(e),rt.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),rt.waitFor(i).next((()=>r))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return rt.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),rt.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),rt.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),rt.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return rt.resolve(n)}containsKey(t,e){return rt.resolve(this.Nr.containsKey(e))}}class fo{constructor(t,e){this.Lr={},this.overlays={},this.kr=new mt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new ho(this),this.indexManager=new ys,this.remoteDocumentCache=function(t){return new uo(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Oi(e),this.$r=new io(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new so,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new co(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){f("MemoryPersistence","Starting transaction:",t);const r=new po(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((t=>this.referenceDelegate.Wr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Gr(t,e){return rt.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class po extends et{constructor(t){super(),this.currentSequenceNumber=t}}class mo{constructor(t){this.persistence=t,this.zr=new oo,this.jr=null}static Hr(t){return new mo(t)}get Jr(){if(this.jr)return this.jr;throw y()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),rt.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),rt.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),rt.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Jr,(n=>{const r=z.fromPath(n);return this.Yr(t,r).next((t=>{t||e.removeEntry(r,F.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return rt.or([()=>rt.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class go{constructor(t,e){this.persistence=t,this.Zr=new Pn((t=>bt(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=$s(this,e)}static Hr(t,e){return new go(t,e)}Ur(){}Wr(t){return rt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}Hn(t){const e=this.Zn(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Zn(t){let e=0;return this.Jn(t,(t=>{e++})).next((()=>e))}Jn(t,e){return rt.forEach(this.Zr,((n,r)=>this.er(t,n,r).next((t=>t?rt.resolve():e(r)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Fr(t,(r=>this.er(t,r,e).next((t=>{t||(n++,i.removeEntry(r,F.min()))})))).next((()=>i.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.Zr.set(e,t.currentSequenceNumber),rt.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.Zr.set(n,t.currentSequenceNumber),rt.resolve()}removeReference(t,e,n){return this.Zr.set(n,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,e){return this.Zr.set(e,t.currentSequenceNumber),rt.resolve()}Kr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ie(t.data.value)),e}er(t,e,n){return rt.or([()=>this.persistence.Gr(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.Zr.get(e);return rt.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class yo{constructor(t){this.serializer=t}N(t,e,n,r){const i=new it("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Et,{unique:!0}),t.createObjectStore("documentMutations")}(t),vo(t),function(t){t.createObjectStore("remoteDocuments")}(t));let s=rt.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),vo(t)),s=s.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:F.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(t,e){return e.store("mutations").W().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Et,{unique:!0});const r=e.store("mutations"),i=n.map((t=>r.put(t)));return rt.waitFor(i)}))}(t,i)))),s=s.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(t,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&r>=12&&(s=s.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:jt});e.createIndex("collectionPathOverlayIndex",Vt,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",Bt,{unique:!1})}(t)}))),n<13&&r>=13&&(s=s.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:Ct});e.createIndex("documentKeyIndex",Dt),e.createIndex("collectionGroupIndex",kt)}(t))).next((()=>this.ii(t,i))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(t,i)))),n<15&&r>=15&&(s=s.next((()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:Ot}).createIndex("sequenceNumberIndex",Rt,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:Pt}).createIndex("documentKeyIndex",Ft,{unique:!1})}(t)))),s}ei(t){let e=0;return t.store("remoteDocuments").Y(((t,n)=>{e+=ks(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.W().next((e=>rt.forEach(e,(e=>{const r=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>rt.forEach(n,(n=>{v(n.userId===e.userId);const r=Vi(this.serializer,n);return Ds(t,e.userId,r).next((()=>{}))}))))}))))}ti(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const r=[];return n.Y(((n,i)=>{const s=new V(n),o=function(t){return[0,bt(t)]}(s);r.push(e.get(o).next((n=>n?rt.resolve():(n=>e.put({targetId:0,path:bt(n),sequenceNumber:t.highestListenSequenceNumber}))(s))))})).next((()=>rt.waitFor(r)))}))}ni(t,e){t.createObjectStore("collectionParents",{keyPath:Mt});const n=e.store("collectionParents"),r=new vs,i=t=>{if(r.add(t)){const e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:bt(r)})}};return e.store("remoteDocuments").Y({J:!0},((t,e)=>{const n=new V(t);return i(n.popLast())})).next((()=>e.store("documentMutations").Y({J:!0},(([t,e,n],r)=>{const s=_t(e);return i(s.popLast())}))))}ri(t){const e=t.store("targets");return e.Y(((t,n)=>{const r=Bi(n),i=Ui(this.serializer,r);return e.put(i)}))}ii(t,e){const n=e.store("remoteDocuments"),r=[];return n.Y(((t,n)=>{const i=e.store("remoteDocumentsV14"),s=function(t){return t.document?new z(V.fromString(t.document.name).popFirst(5)):t.noDocument?z.fromSegments(t.noDocument.path):t.unknownDocument?z.fromSegments(t.unknownDocument.path):y()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>rt.waitFor(r)))}si(t,e){const n=e.store("mutations"),r=Ws(this.serializer),i=new fo(mo.Hr,this.serializer.ct);return n.W().next((t=>{const n=new Map;return t.forEach((t=>{var e;let r=null!==(e=n.get(t.userId))&&void 0!==e?e:Kn();Vi(this.serializer,t).keys().forEach((t=>r=r.add(t))),n.set(t.userId,r)})),rt.forEach(n,((t,n)=>{const s=new u(n),o=Wi.lt(this.serializer,s),a=i.getIndexManager(s),c=As.lt(s,this.serializer,a,i.referenceDelegate);return new ro(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Ht(e,mt._e),t).next()}))}))}}function vo(t){t.createObjectStore("targetDocuments",{keyPath:Nt}).createIndex("documentTargetsIndex",Lt,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",At,{unique:!0}),t.createObjectStore("targetGlobal")}const bo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wo{constructor(t,e,n,r,i,s,o,a,c,u,l=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=u,this.ui=l,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=t=>Promise.resolve(),!wo.D())throw new x(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gs(this,r),this.Ti=e+"main",this.serializer=new Oi(a),this.Ei=new st(this.Ti,this.ui,new yo(this.serializer)),this.Qr=new Ps(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ws(this.serializer),this.$r=new Hi,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(w.FAILED_PRECONDITION,bo);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Qr.getHighestSequenceNumber(t)))})).then((t=>{this.kr=new mt(t,this._i)})).then((()=>{this.qr=!0})).catch((t=>(this.Ei&&this.Ei.close(),Promise.reject(t))))}fi(t){return this.Ii=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.L((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>_o(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(t).next((t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(t))).next((e=>this.isPrimary&&!e?this.yi(t).next((()=>!1)):!!e&&this.wi(t).next((()=>!0)))))).catch((t=>{if(ct(t))return f("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.oi.enqueueRetryable((()=>this.Ii(t))),this.isPrimary=t}))}gi(t){return xo(t).get("owner").next((t=>rt.resolve(this.Si(t))))}bi(t){return _o(t).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=Kt(t,"clientMetadata");return e.W().next((t=>{const n=this.vi(t,18e5),r=t.filter((t=>-1===n.indexOf(t)));return rt.forEach(r,(t=>e.delete(t.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const e of t)this.di.removeItem(this.Fi(e.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?rt.resolve(!0):xo(t).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)){if(this.Si(e)&&this.networkEnabled)return!0;if(!this.Si(e)){if(!e.allowTabSynchronization)throw new x(w.FAILED_PRECONDITION,bo);return!1}}return!(!this.networkEnabled||!this.inForeground)||_o(t).W().next((t=>void 0===this.vi(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,r=this.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&f("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new Ht(t,mt._e);return this.yi(e).next((()=>this.bi(e)))})),this.Ei.close(),this.Bi()}vi(t,e){return t.filter((t=>this.Ci(t.updateTimeMs,e)&&!this.Mi(t.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(t=>_o(t).W().next((t=>this.vi(t,18e5).map((t=>t.clientId))))))}get started(){return this.qr}getMutationQueue(t,e){return As.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new ws(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Wi.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,e,n){f("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",i=function(t){return 15===t?Gt:14===t?$t:13===t?qt:12===t?zt:11===t?Ut:void y()}(this.ui);let s;return this.Ei.runTransaction(t,r,i,(r=>(s=new Ht(r,this.kr?this.kr.next():mt._e),"readwrite-primary"===e?this.gi(s).next((t=>!!t||this.pi(s))).next((e=>{if(!e)throw p(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new x(w.FAILED_PRECONDITION,tt);return n(s)})).next((t=>this.wi(s).next((()=>t)))):this.ki(s).next((()=>n(s)))))).then((t=>(s.raiseOnCommittedEvent(),t)))}ki(t){return xo(t).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new x(w.FAILED_PRECONDITION,bo)}))}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xo(t).put("owner",e)}static D(){return st.D()}yi(t){const e=xo(t);return e.get("owner").next((t=>this.Si(t)?(f("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):rt.resolve()))}Ci(t,e){const n=Date.now();return!(t<n-e||t>n&&(p(`Detected an update time that is in the future: ${t} > ${n}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;o.isSafari()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var e;try{const n=null!==(null===(e=this.di)||void 0===e?void 0:e.getItem(this.Fi(t)));return f("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return p("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){p("Failed to set zombie client id.",t)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(t){}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function xo(t){return Kt(t,"owner")}function _o(t){return Kt(t,"clientMetadata")}function Eo(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Io{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=Kn(),r=Kn();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new Io(t,e.fromCache,n,r)}}class So{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class To{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=o.isSafari()?8:st.v(o.getUA())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.ji(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Hi(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new So;return this.Ji(t,e,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(t,e,n,r.size)}))})).next((()=>i.result))}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(d()<=s.LogLevel.DEBUG&&f("QueryEngine","SDK will not create cache indexes for query:",Nn(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),rt.resolve()):(d()<=s.LogLevel.DEBUG&&f("QueryEngine","Query:",Nn(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(d()<=s.LogLevel.DEBUG&&f("QueryEngine","The SDK decides to create cache indexes for query:",Nn(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Sn(e))):rt.resolve())}ji(t,e){if(_n(e))return rt.resolve(null);let n=Sn(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=Dn(e,null,"F"),n=Sn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=Kn(...r);return this.zi.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,r);return this.Xi(e,s,i,n.readTime)?this.ji(t,Dn(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,r){return _n(e)||r.isEqual(F.min())?rt.resolve(null):this.zi.getDocuments(t,n).next((i=>{const o=this.Zi(e,i);return this.Xi(e,o,n,r)?rt.resolve(null):(d()<=s.LogLevel.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nn(e)),this.es(t,o,e,Y(r,-1)).next((t=>t)))}))}Zi(t,e){let n=new te(On(t));return e.forEach(((e,r)=>{Ln(t,r)&&(n=n.add(r))})),n}Xi(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(t,e,n){return d()<=s.LogLevel.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Nn(e)),this.zi.getDocumentsMatchingQuery(t,e,J.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Co{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new Xt(M),this.rs=new Pn((t=>fn(t)),pn),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ro(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}function Do(t,e,n,r){return new Co(t,e,n,r)}async function ko(t,e){const n=b(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=Kn();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function Ao(t){const e=b(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function No(t,e,n){let r=Kn(),i=Kn();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=jn();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(F.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Lo(t,e){const n=b(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Mo(t,e){const n=b(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Qr.getTargetData(t,e).next((i=>i?(r=i,rt.resolve(r)):n.Qr.allocateTargetId(t).next((i=>(r=new Mi(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.ns.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}async function Oo(t,e,n){const r=b(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!ct(t))throw t;f("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Ro(t,e,n){const r=b(t);let i=F.min(),s=Kn();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=b(t),i=r.rs.get(n);return void 0!==i?rt.resolve(r.ns.get(i)):r.Qr.getTargetData(e,n)}(r,t,Sn(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.ts.getDocumentsMatchingQuery(t,e,n?i:F.min(),n?s:Kn()))).next((t=>(jo(r,Mn(e),t),{documents:t,hs:s})))))}function Po(t,e){const n=b(t),r=b(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(t=>r._t(t,e).next((t=>t?t.target:null))))}function Fo(t,e){const n=b(t),r=n.ss.get(e)||F.min();return n.persistence.runTransaction("Get new document changes","readonly",(t=>n.os.getAllFromCollectionGroup(t,e,Y(r,-1),Number.MAX_SAFE_INTEGER))).then((t=>(jo(n,e,t),t)))}function jo(t,e,n){let r=t.ss.get(e)||F.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.ss.set(e,r)}async function Vo(t,e,n=Kn()){const r=await Mo(t,Sn(zi(e.bundledQuery))),i=b(t);return i.persistence.runTransaction("Save named query","readwrite",(t=>{const s=ai(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(t,e);const o=r.withResumeToken(se.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(t,o).next((()=>i.Qr.removeMatchingKeysForTargetId(t,r.targetId))).next((()=>i.Qr.addMatchingKeys(t,n,r.targetId))).next((()=>i.$r.saveNamedQuery(t,e)))}))}function Bo(t,e){return`firestore_clients_${t}_${e}`}function Uo(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zo(t,e){return`firestore_targets_${t}_${e}`}class qo{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static Es(t,e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new x(r.error.code,r.error.message))),s?new qo(t,e,r.state,i):(p("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class $o{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Es(t,e){const n=JSON.parse(e);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new x(n.error.code,n.error.message))),i?new $o(t,n.state,r):(p("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Go{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Es(t,e){const n=JSON.parse(e);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Wn();for(let t=0;r&&t<n.activeTargetIds.length;++t)r=vt(n.activeTargetIds[t]),i=i.add(n.activeTargetIds[t]);return r?new Go(t,i):(p("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Ho{constructor(t,e){this.clientId=t,this.onlineState=e}static Es(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Ho(e.clientId,e.onlineState):(p("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ko{constructor(){this.activeTargetIds=Wn()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qo{constructor(t,e,n,r,i){this.window=t,this.oi=e,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Xt(M),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Bo(this.persistenceKey,this.Vs),this.Ss=function(t){return`firestore_sequence_number_${t}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Ko),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Fs=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Li();for(const e of t){if(e===this.Vs)continue;const t=this.getItem(Bo(this.persistenceKey,e));if(t){const n=Go.Es(e,t);n&&(this.ps=this.ps.insert(n.clientId,n))}}this.Ms();const e=this.storage.getItem(this.vs);if(e){const t=this.xs(e);t&&this.Os(t)}for(const t of this.ys)this.gs(t);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let e=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.Bs(t,"pending")}updateMutationState(t,e,n){this.Bs(t,e,n),this.Ls(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(zo(this.persistenceKey,t));if(n){const r=$o.Es(t,n);r&&(e=r.state)}}return this.ks.As(t),this.Ms(),e}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(zo(this.persistenceKey,t))}updateQueryState(t,e,n){this.qs(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.Ls(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e}setItem(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){const e=t;if(e.storageArea===this.storage){if(f("SharedClientState","EVENT",e.key,e.newValue),e.key===this.ws)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.bs.test(e.key)){if(null==e.newValue){const t=this.$s(e.key);return this.Us(t,null)}{const t=this.Ws(e.key,e.newValue);if(t)return this.Us(t.clientId,t)}}else if(this.Ds.test(e.key)){if(null!==e.newValue){const t=this.Gs(e.key,e.newValue);if(t)return this.zs(t)}}else if(this.Cs.test(e.key)){if(null!==e.newValue){const t=this.js(e.key,e.newValue);if(t)return this.Hs(t)}}else if(e.key===this.vs){if(null!==e.newValue){const t=this.xs(e.newValue);if(t)return this.Os(t)}}else if(e.key===this.Ss){const t=function(t){let e=mt._e;if(null!=t)try{const n=JSON.parse(t);v("number"==typeof n),e=n}catch(t){p("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==mt._e&&this.sequenceNumberHandler(t)}else if(e.key===this.Fs){const t=this.Js(e.newValue);await Promise.all(t.map((t=>this.syncEngine.Ys(t))))}}else this.ys.push(e)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(t,e,n){const r=new qo(this.currentUser,t,e,n),i=Uo(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ds())}Ls(t){const e=Uo(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Qs(t){const e={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(e))}qs(t,e,n){const r=zo(this.persistenceKey,t),i=new $o(t,e,n);this.setItem(r,i.ds())}Ks(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Fs,e)}$s(t){const e=this.bs.exec(t);return e?e[1]:null}Ws(t,e){const n=this.$s(t);return Go.Es(n,e)}Gs(t,e){const n=this.Ds.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qo.Es(new u(i),r,e)}js(t,e){const n=this.Cs.exec(t),r=Number(n[1]);return $o.Es(r,e)}xs(t){return Ho.Es(t)}Js(t){return JSON.parse(t)}async zs(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);f("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,e){const n=e?this.ps.insert(t,e):this.ps.remove(t),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((t=>{r.has(t)||s.push(t)})),r.forEach((t=>{i.has(t)||o.push(t)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let e=Wn();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class Wo{constructor(){this.no=new Ko,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Ko,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Yo{io(t){}shutdown(){}}class Xo{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jo=null;function Zo(){return null===Jo?Jo=268435456+Math.round(2147483648*Math.random()):Jo++,"0x"+Jo.toString(16)}const ta={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ea{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const na="WebChannelConnection";class ra extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${r}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get wo(){return!1}So(t,e,n,r,i){const s=Zo(),o=this.bo(t,e.toUriEncodedString());f("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(t,o,a,n).then((e=>(f("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw m("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,r,i,s){return this.So(t,e,n,r,i)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+l,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=ta[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,r){const i=Zo();return new Promise(((s,o)=>{const c=new a.XhrIo;c.setWithCredentials(!0),c.listenOnce(a.EventType.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case a.ErrorCode.NO_ERROR:const e=c.getResponseJson();f(na,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case a.ErrorCode.TIMEOUT:f(na,`RPC '${t}' ${i} timed out`),o(new x(w.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:const n=c.getStatus();if(f(na,`RPC '${t}' ${i} failed with status:`,n,"response text:",c.getResponseText()),n>0){let t=c.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(e)>=0?e:w.UNKNOWN}(e.status);o(new x(t,e.message))}else o(new x(w.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new x(w.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{f(na,`RPC '${t}' ${i} completed.`)}}));const u=JSON.stringify(r);f(na,`RPC '${t}' ${i} sending request:`,r),c.send(e,"POST",u,n,15)}))}Fo(t,e,n){const r=Zo(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=a.createWebChannelTransport(),o=a.getStatEventTarget(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,e,n),c.encodeInitMessageHeaders=!0;const l=i.join("");f(na,`Creating RPC '${t}' stream ${r}: ${l}`,c);const h=s.createWebChannel(l,c);let d=!1,p=!1;const g=new ea({lo:e=>{p?f(na,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(d||(f(na,`Opening RPC '${t}' stream ${r} transport.`),h.open(),d=!0),f(na,`RPC '${t}' stream ${r} sending:`,e),h.send(e))},ho:()=>h.close()}),y=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return y(h,a.WebChannel.EventType.OPEN,(()=>{p||f(na,`RPC '${t}' stream ${r} transport opened.`)})),y(h,a.WebChannel.EventType.CLOSE,(()=>{p||(p=!0,f(na,`RPC '${t}' stream ${r} transport closed`),g.Vo())})),y(h,a.WebChannel.EventType.ERROR,(e=>{p||(p=!0,m(na,`RPC '${t}' stream ${r} transport errored:`,e),g.Vo(new x(w.UNAVAILABLE,"The operation could not be completed")))})),y(h,a.WebChannel.EventType.MESSAGE,(e=>{var n;if(!p){const i=e.data[0];v(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){f(na,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=Mr[t];if(void 0!==e)return Pr(e)}(e),i=o.message;void 0===n&&(n=w.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),p=!0,g.Vo(new x(n,i)),h.close()}else f(na,`RPC '${t}' stream ${r} received:`,i),g.mo(i)}})),y(o,a.Event.STAT_EVENT,(e=>{e.stat===a.Stat.PROXY?f(na,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===a.Stat.NOPROXY&&f(na,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{g.Ro()}),0),g}}function ia(){return"undefined"!=typeof window?window:null}function sa(){return"undefined"!=typeof document?document:null}function oa(t){return new ni(t,!0)}class aa{constructor(t,e,n=1e3,r=1.5,i=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,e-n);r>0&&f("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class ca{constructor(t,e,n,r,i,s,o,a){this.oi=t,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new aa(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===w.RESOURCE_EXHAUSTED?(p(e.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===w.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new x(w.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return f("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ua extends ca{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(v(void 0===e||"string"==typeof e),se.fromBase64String(e||"")):(v(void 0===e||e instanceof Uint8Array),se.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?w.UNKNOWN:Pr(t.code);return new x(e,t.message||"")}(o);n=new Qr(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=di(t,r.document.name),s=ai(r.document.updateTime),o=r.document.createTime?ai(r.document.createTime):F.min(),a=new Fe({mapValue:{fields:r.document.fields}}),c=Ve.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Hr(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=di(t,r.document),s=r.readTime?ai(r.readTime):F.min(),o=Ve.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=di(t,r.document),s=r.removedTargetIds||[];n=new Hr([],s,i,null)}else{if(!("filter"in e))return y();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new Lr(r,i),o=t.targetId;n=new Kr(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return F.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?F.min():e.readTime?ai(e.readTime):F.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=mi(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=mn(r)?{documents:xi(t,r)}:{query:_i(t,r).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=si(t,e.resumeToken);const r=ri(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(F.min())>0){n.readTime=ii(t,e.snapshotVersion.toTimestamp());const r=ri(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return y()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=mi(this.serializer),e.removeTarget=t,this.t_(e)}}class la extends ca{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(v(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(v(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?ai(t.updateTime):ai(e);return n.isEqual(F.min())&&(n=ai(e)),new dr(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=ai(t.commitTime);return this.listener.T_(n,e)}return v(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=mi(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>bi(this.serializer,t)))};this.t_(e)}}class ha extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new x(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.So(t,ui(e,n),r,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new x(w.UNKNOWN,t.toString())}))}vo(t,e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,ui(e,n),r,s,o,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new x(w.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class da{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(p(e),this.g_=!1):f("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class fa{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((t=>{n.enqueueAndForget((async()=>{_a(this)&&(f("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=b(t);e.v_.add(4),await ma(e),e.x_.set("Unknown"),e.v_.delete(4),await pa(e)}(this))}))})),this.x_=new da(n,r)}}async function pa(t){if(_a(t))for(const e of t.F_)await e(!0)}async function ma(t){for(const e of t.F_)await e(!1)}function ga(t,e){const n=b(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),xa(n)?wa(n):Ba(n).Jo()&&va(n,e))}function ya(t,e){const n=b(t),r=Ba(n);n.C_.delete(e),r.Jo()&&ba(n,e),0===n.C_.size&&(r.Jo()?r.Xo():_a(n)&&n.x_.set("Unknown"))}function va(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(F.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ba(t).c_(e)}function ba(t,e){t.O_.Oe(e),Ba(t).l_(e)}function wa(t){t.O_=new Yr({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ba(t).start(),t.x_.p_()}function xa(t){return _a(t)&&!Ba(t).Ho()&&t.C_.size>0}function _a(t){return 0===b(t).v_.size}function Ea(t){t.O_=void 0}async function Ia(t){t.C_.forEach(((e,n)=>{va(t,e)}))}async function Sa(t,e){Ea(t),xa(t)?(t.x_.S_(e),wa(t)):t.x_.set("Unknown")}async function Ta(t,e,n){if(t.x_.set("Online"),e instanceof Qr&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.C_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.C_.delete(r),t.O_.removeTarget(r))}(t,e)}catch(n){f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ca(t,n)}else if(e instanceof Hr?t.O_.$e(e):e instanceof Kr?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(F.min()))try{const e=await Ao(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.C_.get(r);i&&t.C_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.C_.get(e);if(!r)return;t.C_.set(e,r.withResumeToken(se.EMPTY_BYTE_STRING,r.snapshotVersion)),ba(t,e);const i=new Mi(r.target,e,n,r.sequenceNumber);va(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){f("RemoteStore","Failed to raise snapshot:",e),await Ca(t,e)}}async function Ca(t,e,n){if(!ct(e))throw e;t.v_.add(1),await ma(t),t.x_.set("Offline"),n||(n=()=>Ao(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{f("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await pa(t)}))}function Da(t,e){return e().catch((n=>Ca(t,n,e)))}async function ka(t){const e=b(t),n=Ua(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Aa(e);)try{const t=await Lo(e.localStore,r);if(null===t){0===e.D_.length&&n.Xo();break}r=t.batchId,Na(e,t)}catch(t){await Ca(e,t)}La(e)&&Ma(e)}function Aa(t){return _a(t)&&t.D_.length<10}function Na(t,e){t.D_.push(e);const n=Ua(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function La(t){return _a(t)&&!Ua(t).Ho()&&t.D_.length>0}function Ma(t){Ua(t).start()}async function Oa(t){Ua(t).d_()}async function Ra(t){const e=Ua(t);for(const n of t.D_)e.I_(n.mutations)}async function Pa(t,e,n){const r=t.D_.shift(),i=kr.from(r,e,n);await Da(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await ka(t)}async function Fa(t,e){e&&Ua(t).P_&&await async function(t,e){if(function(t){return Rr(t)&&t!==w.ABORTED}(e.code)){const n=t.D_.shift();Ua(t).Zo(),await Da(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await ka(t)}}(t,e),La(t)&&Ma(t)}async function ja(t,e){const n=b(t);n.asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials");const r=_a(n);n.v_.add(3),await ma(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await pa(n)}async function Va(t,e){const n=b(t);e?(n.v_.delete(2),await pa(n)):e||(n.v_.add(2),await ma(n),n.x_.set("Unknown"))}function Ba(t){return t.N_||(t.N_=function(t,e,n){const r=b(t);return r.R_(),new ua(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Po:Ia.bind(null,t),To:Sa.bind(null,t),u_:Ta.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),xa(t)?wa(t):t.x_.set("Unknown")):(await t.N_.stop(),Ea(t))}))),t.N_}function Ua(t){return t.B_||(t.B_=function(t,e,n){const r=b(t);return r.R_(),new la(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Po:Oa.bind(null,t),To:Fa.bind(null,t),E_:Ra.bind(null,t),T_:Pa.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await ka(t)):(await t.B_.stop(),t.D_.length>0&&(f("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class za{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new _,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new za(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new x(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qa(t,e){if(p("AsyncQueue",`${e}: ${t}`),ct(t))return new x(w.UNAVAILABLE,`${e}: ${t}`);throw t}class $a{constructor(t){this.comparator=t?(e,n)=>t(e,n)||z.comparator(e.key,n.key):(t,e)=>z.comparator(t.key,e.key),this.keyedMap=Bn(),this.sortedSet=new Xt(this.comparator)}static emptySet(t){return new $a(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof $a))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new $a;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Ga{constructor(){this.L_=new Xt(z.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):y():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Ha{constructor(t,e,n,r,i,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Ha(t,e,$a.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&kn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class Ka{constructor(){this.q_=void 0,this.Q_=[]}}class Qa{constructor(){this.queries=new Pn((t=>An(t)),kn),this.onlineState="Unknown",this.K_=new Set}}async function Wa(t,e){const n=b(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Ka),i)try{s.q_=await n.onListen(r)}catch(t){const n=qa(t,`Initialization of query '${Nn(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&Za(n)}async function Ya(t,e){const n=b(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Xa(t,e){const n=b(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.Q_)e.W_(t)&&(r=!0);i.q_=t}}r&&Za(n)}function Ja(t,e,n){const r=b(t),i=r.queries.get(e);if(i)for(const t of i.Q_)t.onError(n);r.queries.delete(e)}function Za(t){t.K_.forEach((t=>{t.next()}))}class tc{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ha(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=Ha.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class ec{constructor(t,e){this.X_=t,this.byteLength=e}ea(){return"metadata"in this.X_}}class nc{constructor(t){this.serializer=t}Ps(t){return di(this.serializer,t)}Is(t){return t.metadata.exists?vi(this.serializer,t.document,!1):Ve.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return ai(t)}}class rc{constructor(t,e,n){this.ta=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ic(t)}na(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.X_.namedQuery)this.queries.push(t.X_.namedQuery);else if(t.X_.documentMetadata){this.documents.push({metadata:t.X_.documentMetadata}),t.X_.documentMetadata.exists||++e;const n=V.fromString(t.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.X_.document&&(this.documents[this.documents.length-1].document=t.X_.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ra(t){const e=new Map,n=new nc(this.serializer);for(const r of t)if(r.metadata.queries){const t=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(e.get(n)||Kn()).add(t);e.set(n,r)}}return e}async complete(){const t=await async function(t,e,n,r){const i=b(t);let s=Kn(),o=jn();for(const t of n){const n=e.Ps(t.metadata.name);t.document&&(s=s.add(n));const r=e.Is(t);r.setReadTime(e.Ts(t.metadata.readTime)),o=o.insert(n,r)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Mo(i,function(t){return Sn(xn(V.fromString(`__bundle__/docs/${t}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(t=>No(t,a,o).next((e=>(a.apply(t),e))).next((e=>i.Qr.removeMatchingKeysForTargetId(t,c.targetId).next((()=>i.Qr.addMatchingKeys(t,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(t,e.cs,e.ls))).next((()=>e.cs))))))}(this.localStore,new nc(this.serializer),this.documents,this.ta.id),e=this.ra(this.documents);for(const t of this.queries)await Vo(this.localStore,t,e.get(t.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}}}function ic(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class sc{constructor(t){this.key=t}}class oc{constructor(t){this.key=t}}class ac{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Kn(),this.mutatedKeys=Kn(),this.ua=On(t),this.ca=new $a(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new Ga,r=e?e.ca:this.ca;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const u=r.get(t),l=Ln(this.query,e)?e:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ia(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.ua(l,a)>0||c&&this.ua(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const i=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const s=t.Pa.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),r=null!=r&&r;const o=e&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new Ha(this.query,t.ca,i,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ga,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=Kn(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new oc(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new sc(n))})),e}Ra(t){this.oa=t.hs,this.aa=Kn();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Ha.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class cc{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class uc{constructor(t){this.key=t,this.ma=!1}}class lc{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Pn((t=>An(t)),kn),this.pa=new Map,this.ya=new Set,this.wa=new Xt(z.comparator),this.Sa=new Map,this.ba=new oo,this.Da={},this.Ca=new Map,this.va=Rs.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function hc(t,e){const n=Fc(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const t=await Mo(n.localStore,Sn(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await dc(n,e,r,"current"===s,t.resumeToken),n.isPrimaryClient&&ga(n.remoteStore,t)}return i}async function dc(t,e,n,r,i){t.Ma=(e,n,r)=>async function(t,e,n,r){let i=e.view.ha(n);i.Xi&&(i=await Ro(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,s,o);return Ec(t,e.targetId,a.da),a.snapshot}(t,e,n,r);const s=await Ro(t.localStore,e,!0),o=new ac(e,s.hs),a=o.ha(s.documents),c=Gr.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=o.applyChanges(a,t.isPrimaryClient,c);Ec(t,n,u.da);const l=new cc(e,n,o);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot}async function fc(t,e){const n=b(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((t=>!kn(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Oo(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),ya(n.remoteStore,r.targetId),xc(n,r.targetId)})).catch(nt)):(xc(n,r.targetId),await Oo(n.localStore,r.targetId,!0))}async function pc(t,e){const n=b(t);try{const t=await function(t,e){const n=b(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let u=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?u=u.withResumeToken(se.EMPTY_BYTE_STRING,F.min()).withLastLimboFreeSnapshotVersion(F.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Qr.updateTargetData(t,u))}));let a=jn(),c=Kn();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(No(t,s,e.documentUpdates).next((t=>{a=t.cs,c=t.ls}))),!r.isEqual(F.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return rt.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.ns=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Sa.get(e);r&&(v(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.ma=!0:t.modifiedDocuments.size>0?v(r.ma):t.removedDocuments.size>0&&(v(r.ma),r.ma=!1))})),await Tc(n,t,e)}catch(t){await nt(t)}}function mc(t,e,n){const r=b(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=b(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(r=!0)})),r&&Za(n)}(r.eventManager,e),t.length&&r.fa.u_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gc(t,e,n){const r=b(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let t=new Xt(z.comparator);t=t.insert(s,Ve.newNoDocument(s,F.min()));const n=Kn().add(s),i=new $r(F.min(),new Map,new Xt(M),t,n);await pc(r,i),r.wa=r.wa.remove(s),r.Sa.delete(e),Sc(r)}else await Oo(r.localStore,e,!1).then((()=>xc(r,e,n))).catch(nt)}async function yc(t,e){const n=b(t),r=e.batch.batchId;try{const t=await function(t,e){const n=b(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=rt.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);v(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Kn();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);wc(n,r,null),bc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tc(n,t)}catch(t){await nt(t)}}async function vc(t,e,n){const r=b(t);try{const t=await function(t,e){const n=b(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(v(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);wc(r,e,n),bc(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tc(r,t)}catch(n){await nt(n)}}function bc(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function wc(t,e,n){const r=b(t);let i=r.Da[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function xc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||_c(t,e)}))}function _c(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(ya(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Sc(t))}function Ec(t,e,n){for(const r of n)r instanceof sc?(t.ba.addReference(r.key,e),Ic(t,r)):r instanceof oc?(f("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||_c(t,r.key)):y()}function Ic(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(f("SyncEngine","New document in limbo: "+n),t.ya.add(r),Sc(t))}function Sc(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new z(V.fromString(e)),r=t.va.next();t.Sa.set(r,new uc(n)),t.wa=t.wa.insert(n,r),ga(t.remoteStore,new Mi(Sn(xn(n.path)),r,"TargetPurposeLimboResolution",mt._e))}}async function Tc(t,e,n){const r=b(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((t,a)=>{o.push(r.Ma(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=Io.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.fa.u_(i),await async function(t,e){const n=b(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>rt.forEach(e,(e=>rt.forEach(e.qi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>rt.forEach(e.Qi,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!ct(t))throw t;f("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Cc(t,e){const n=b(t);if(!n.currentUser.isEqual(e)){f("SyncEngine","User change. New user:",e.toKey());const t=await ko(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new x(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Tc(n,t.us)}}function Dc(t,e){const n=b(t),r=n.Sa.get(e);if(r&&r.ma)return Kn().add(r.key);{let t=Kn();const r=n.pa.get(e);if(!r)return t;for(const e of r){const r=n.ga.get(e);t=t.unionWith(r.view.la)}return t}}async function kc(t,e){const n=b(t),r=await Ro(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Ec(n,e.targetId,i.da),i}async function Ac(t,e){const n=b(t);return Fo(n.localStore,e).then((t=>Tc(n,t)))}async function Nc(t,e,n,r){const i=b(t),s=await function(t,e){const n=b(t),r=b(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>r.vn(t,e).next((e=>e?n.localDocuments.getDocuments(t,e):rt.resolve(null)))))}(i.localStore,e);null!==s?("pending"===n?await ka(i.remoteStore):"acknowledged"===n||"rejected"===n?(wc(i,e,r||null),bc(i,e),function(t,e){b(b(t).mutationQueue).Mn(e)}(i.localStore,e)):y(),await Tc(i,s)):f("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Lc(t,e,n){const r=b(t),i=[],s=[];for(const t of e){let e;const n=r.pa.get(t);if(n&&0!==n.length){e=await Mo(r.localStore,Sn(n[0]));for(const t of n){const e=r.ga.get(t),n=await kc(r,e);n.snapshot&&s.push(n.snapshot)}}else{const n=await Po(r.localStore,t);e=await Mo(r.localStore,n),await dc(r,Mc(n),t,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Mc(t){return wn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Oc(t){return function(t){return b(b(t).persistence).Li()}(b(t).localStore)}async function Rc(t,e,n,r){const i=b(t);if(i.Fa)return void f("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const t=await Fo(i.localStore,Mn(s[0])),r=$r.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,se.EMPTY_BYTE_STRING);await Tc(i,t,r);break}case"rejected":await Oo(i.localStore,e,!0),xc(i,e,r);break;default:y()}}async function Pc(t,e,n){const r=Fc(t);if(r.Fa){for(const t of e){if(r.pa.has(t)){f("SyncEngine","Adding an already active target "+t);continue}const e=await Po(r.localStore,t),n=await Mo(r.localStore,e);await dc(r,Mc(e),n.targetId,!1,n.resumeToken),ga(r.remoteStore,n)}for(const t of n)r.pa.has(t)&&await Oo(r.localStore,t,!1).then((()=>{ya(r.remoteStore,t),xc(r,t)})).catch(nt)}}function Fc(t){const e=b(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gc.bind(null,e),e.fa.u_=Xa.bind(null,e.eventManager),e.fa.xa=Ja.bind(null,e.eventManager),e}function jc(t){const e=b(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vc.bind(null,e),e}class Vc{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=oa(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Do(this.persistence,new To,t.initialUser,this.serializer)}createPersistence(t){return new fo(mo.Hr,this.serializer)}createSharedClientState(t){return new Wo}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Bc extends Vc{constructor(t){super(),this.cacheSizeBytes=t}createGarbageCollectionScheduler(t,e){v(this.persistence.referenceDelegate instanceof go);const n=this.persistence.referenceDelegate.garbageCollector;return new zs(n,t.asyncQueue,e)}createPersistence(t){const e=void 0!==this.cacheSizeBytes?Cs.withCacheSize(this.cacheSizeBytes):Cs.DEFAULT;return new fo((t=>go.Hr(t,e)),this.serializer)}}class Uc extends Vc{constructor(t,e,n){super(),this.Na=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Na.initialize(this,t),await jc(this.Na.syncEngine),await ka(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(t){return Do(this.persistence,new To,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new zs(n,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const n=new pt(e,this.persistence);return new ft(t.asyncQueue,n)}createPersistence(t){const e=Eo(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Cs.withCacheSize(this.cacheSizeBytes):Cs.DEFAULT;return new wo(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ia(),sa(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Wo}}class zc extends Uc{constructor(t,e){super(t,e,!1),this.Na=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Na.syncEngine;this.sharedClientState instanceof Qo&&(this.sharedClientState.syncEngine={Zs:Nc.bind(null,e),Xs:Rc.bind(null,e),eo:Pc.bind(null,e),Li:Oc.bind(null,e),Ys:Ac.bind(null,e)},await this.sharedClientState.start()),await this.persistence.fi((async t=>{await async function(t,e){const n=b(t);if(Fc(n),jc(n),!0===e&&!0!==n.Fa){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await Lc(n,t.toArray());n.Fa=!0,await Va(n.remoteStore,!0);for(const t of e)ga(n.remoteStore,t)}else if(!1===e&&!1!==n.Fa){const t=[];let e=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?t.push(i):e=e.then((()=>(xc(n,i),Oo(n.localStore,i,!0)))),ya(n.remoteStore,i)})),await e,await Lc(n,t),function(t){const e=b(t);e.Sa.forEach(((t,n)=>{ya(e.remoteStore,n)})),e.ba.mr(),e.Sa=new Map,e.wa=new Xt(z.comparator)}(n),n.Fa=!1,await Va(n.remoteStore,!1)}}(this.Na.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start():t||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(t&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():t||this.indexBackfillerScheduler.stop())}))}createSharedClientState(t){const e=ia();if(!Qo.D(e))throw new x(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Eo(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Qo(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class qc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>mc(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cc.bind(null,this.syncEngine),await Va(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Qa}createDatastore(t){const e=oa(t.databaseInfo.databaseId),n=function(t){return new ra(t)}(t.databaseInfo);return function(t,e,n,r){return new ha(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new fa(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>mc(this.syncEngine,t,0)),Xo.D()?new Xo:new Yo)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new lc(t,e,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=b(t);f("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await ma(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}function $c(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Gc{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):p("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Hc{constructor(t,e){this.ka=t,this.serializer=e,this.metadata=new _,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((t=>{t&&t.ea()?this.metadata.resolve(t.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.X_)}`))}),(t=>this.metadata.reject(t)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const t=await this.Ka();if(null===t)return null;const e=this.qa.decode(t),n=Number(e);isNaN(n)&&this.$a(`length string (${e}) is not valid number`);const r=await this.Ua(n);return new ec(JSON.parse(r),t.length+n)}Wa(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const t=this.Wa();t<0&&this.$a("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Ua(t){for(;this.buffer.length<t;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const e=this.qa.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}$a(t){throw this.ka.cancel(),new Error(`Invalid bundle format: ${t}`)}async Ga(){const t=await this.ka.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}class Kc{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new x(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(t,e){const n=b(t),r={documents:e.map((t=>hi(n.serializer,t)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,V.emptyPath(),r,e.length),s=new Map;i.forEach((t=>{const e=function(t,e){return"found"in e?function(t,e){v(!!e.found),e.found.name,e.found.updateTime;const n=di(t,e.found.name),r=ai(e.found.updateTime),i=e.found.createTime?ai(e.found.createTime):F.min(),s=new Fe({mapValue:{fields:e.found.fields}});return Ve.newFoundDocument(n,r,i,s)}(t,e):"missing"in e?function(t,e){v(!!e.missing),v(!!e.readTime);const n=di(t,e.missing),r=ai(e.readTime);return Ve.newNoDocument(n,r)}(t,e):y()}(n.serializer,t);s.set(e.key.toString(),e)}));const o=[];return e.forEach((t=>{const e=s.get(t.toString());v(!!e),o.push(e)})),o}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastTransactionError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new Tr(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=z.fromPath(e);this.mutations.push(new Cr(n,this.precondition(n)))})),await async function(t,e){const n=b(t),r={writes:e.map((t=>bi(n.serializer,t)))};await n.So("Commit",n.serializer.databaseId,V.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw y();e=F.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new x(w.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(F.min())?fr.exists(!1):fr.updateTime(e):fr.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(F.min()))throw new x(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(e)}return fr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Qc{constructor(t,e,n,r,i){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new aa(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const t=new Kc(this.datastore),e=this.Ja(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.Ya(t)}))))})).catch((t=>{this.Ya(t)}))}))}Ja(t){try{const e=this.updateFunction(t);return!gt(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(t){this.za>0&&this.Za(t)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(t)}Za(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!Rr(e)}return!1}}class Wc{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=u.UNAUTHENTICATED,this.clientId=L.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{f("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(f("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=qa(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Yc(t,e){t.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await ko(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Xc(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Zc(t);f("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>ja(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>ja(e.remoteStore,n))),t._onlineComponents=e}function Jc(t){return"FirebaseError"===t.name?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function Zc(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){f("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Jc(n))throw n;m("Error using user provided cache. Falling back to memory cache: "+n),await Yc(t,new Vc)}}else f("FirestoreClient","Using default OfflineComponentProvider"),await Yc(t,new Vc);return t._offlineComponents}async function tu(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(f("FirestoreClient","Using user provided OnlineComponentProvider"),await Xc(t,t._uninitializedComponentsProvider._online)):(f("FirestoreClient","Using default OnlineComponentProvider"),await Xc(t,new qc))),t._onlineComponents}function eu(t){return Zc(t).then((t=>t.persistence))}function nu(t){return Zc(t).then((t=>t.localStore))}function ru(t){return tu(t).then((t=>t.remoteStore))}function iu(t){return tu(t).then((t=>t.syncEngine))}function su(t){return tu(t).then((t=>t.datastore))}async function ou(t){const e=await tu(t),n=e.eventManager;return n.onListen=hc.bind(null,e.syncEngine),n.onUnlisten=fc.bind(null,e.syncEngine),n}function au(t,e,n={}){const r=new _;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new Gc({next:s=>{e.enqueueAndForget((()=>Ya(t,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new x(w.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new x(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:t=>i.reject(t)}),o=new tc(xn(n.path),s,{includeMetadataChanges:!0,Z_:!0});return Wa(t,o)}(await ou(t),t.asyncQueue,e,n,r))),r.promise}function cu(t,e,n={}){const r=new _;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new Gc({next:n=>{e.enqueueAndForget((()=>Ya(t,o))),n.fromCache&&"server"===r.source?i.reject(new x(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new tc(n,s,{includeMetadataChanges:!0,Z_:!0});return Wa(t,o)}(await ou(t),t.asyncQueue,e,n,r))),r.promise}function uu(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const lu=new Map;function hu(t,e,n){if(!n)throw new x(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function du(t,e,n,r){if(!0===e&&!0===r)throw new x(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fu(t){if(!z.isDocumentKey(t))throw new x(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pu(t){if(z.isDocumentKey(t))throw new x(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":y()}function gu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new x(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mu(t);throw new x(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function yu(t,e){if(e<=0)throw new x(w.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class vu{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new x(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new x(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}du("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uu(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new x(w.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new x(w.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new x(w.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bu{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new x(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vu(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new I;switch(t.type){case"firstParty":return new D(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new x(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=lu.get(t);e&&(f("ComponentProvider","Removing Datastore"),lu.delete(t),e.terminate())}(this),Promise.resolve()}}function wu(t,e,n,r={}){var i;const s=(t=gu(t,bu))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&m("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=u.MOCK_USER;else{e=o.createMockUserToken(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new x(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new u(s)}t._authCredentials=new S(new E(e,n))}}class xu{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new xu(this.firestore,t,this._query)}}class _u{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _u(this.firestore,t,this._key)}}class Eu extends xu{constructor(t,e,n){super(t,e,xn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _u(this.firestore,null,new z(t))}withConverter(t){return new Eu(this.firestore,t,this._path)}}function Iu(t,e,...n){if(t=o.getModularInstance(t),1===arguments.length&&(e=L.newId()),hu("doc","path",e),t instanceof bu){const r=V.fromString(e,...n);return fu(r),new _u(t,null,new z(r))}{if(!(t instanceof _u||t instanceof Eu))throw new x(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(V.fromString(e,...n));return fu(r),new _u(t.firestore,t instanceof Eu?t.converter:null,new z(r))}}function Su(t,e){return t=o.getModularInstance(t),e=o.getModularInstance(e),t instanceof xu&&e instanceof xu&&t.firestore===e.firestore&&kn(t._query,e._query)&&t.converter===e.converter}class Tu{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new aa(this,"async_queue_retry"),this._u=()=>{const t=sa();t&&f("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=sa();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=sa();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new _;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!ct(t))throw t;f("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw p("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const r=za.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(r),r}au(){this.ru&&y()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}function Cu(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(t)}class Du{constructor(){this._progressObserver={},this._taskCompletionResolver=new _,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ku extends bu{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new Tu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nu(this),this._firestoreClient.terminate()}}function Au(t){return t._firestoreClient||Nu(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Nu(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new fe(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,uu(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Wc(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Lu(t,e,n){const r=new _;return t.asyncQueue.enqueue((async()=>{try{await Yc(t,n),await Xc(t,e),r.resolve()}catch(t){const e=t;if(!Jc(e))throw e;m("Error enabling indexeddb cache. Falling back to memory cache: "+e),r.reject(e)}})).then((()=>r.promise))}function Mu(t){if(t._initialized||t._terminated)throw new x(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ou{constructor(t="count",e){this._internalFieldPath=e,this.type="AggregateField",this.aggregateType=t}}class Ru{constructor(t,e,n){this._userDataWriter=e,this._data=n,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Pu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pu(se.fromBase64String(t))}catch(t){throw new x(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Pu(se.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Fu{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new x(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new U(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class ju{constructor(t){this._methodName=t}}class Vu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new x(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new x(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return M(this._lat,t._lat)||M(this._long,t._long)}}const Bu=/^__.*__$/;class Uu{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new _r(t,this.data,this.fieldMask,e,this.fieldTransforms):new xr(t,this.data,e,this.fieldTransforms)}}class zu{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new _r(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function qu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}class $u{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new $u(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Au({path:n,Vu:!1});return r.mu(t),r}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return ll(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(qu(this.du)&&Bu.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class Gu{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||oa(t)}Su(t,e,n,r=!1){return new $u({du:t,methodName:e,wu:n,path:U.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hu(t){const e=t._freezeSettings(),n=oa(t._databaseId);return new Gu(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ku(t,e,n,r,i,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);ol("Data must be an object, but it was:",o,r);const a=il(r,o);let c,u;if(s.merge)c=new re(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=al(e,r,n);if(!o.contains(i))throw new x(w.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);hl(t,i)||t.push(i)}c=new re(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new Uu(new Fe(a),c,u)}class Qu extends ju{_toFieldTransform(t){if(2!==t.du)throw 1===t.du?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Qu}}function Wu(t,e,n){return new $u({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Yu extends ju{_toFieldTransform(t){return new hr(t.path,new rr)}isEqual(t){return t instanceof Yu}}class Xu extends ju{constructor(t,e){super(t),this.bu=e}_toFieldTransform(t){const e=Wu(this,t,!0),n=this.bu.map((t=>rl(t,e))),r=new ir(n);return new hr(t.path,r)}isEqual(t){return t instanceof Xu&&o.deepEqual(this.bu,t.bu)}}class Ju extends ju{constructor(t,e){super(t),this.bu=e}_toFieldTransform(t){const e=Wu(this,t,!0),n=this.bu.map((t=>rl(t,e))),r=new or(n);return new hr(t.path,r)}isEqual(t){return t instanceof Ju&&o.deepEqual(this.bu,t.bu)}}class Zu extends ju{constructor(t,e){super(t),this.Du=e}_toFieldTransform(t){const e=new cr(t.serializer,Jn(t.serializer,this.Du));return new hr(t.path,e)}isEqual(t){return t instanceof Zu&&this.Du===t.Du}}function tl(t,e,n,r){const i=t.Su(1,e,n);ol("Data must be an object, but it was:",i,r);const s=[],a=Fe.empty();Wt(r,((t,r)=>{const c=ul(e,t,n);r=o.getModularInstance(r);const u=i.fu(c);if(r instanceof Qu)s.push(c);else{const t=rl(r,u);null!=t&&(s.push(c),a.set(c,t))}}));const c=new re(s);return new zu(a,c,i.fieldTransforms)}function el(t,e,n,r,i,s){const a=t.Su(1,e,n),c=[al(e,r,n)],u=[i];if(s.length%2!=0)throw new x(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)c.push(al(e,s[t])),u.push(s[t+1]);const l=[],h=Fe.empty();for(let t=c.length-1;t>=0;--t)if(!hl(l,c[t])){const e=c[t];let n=u[t];n=o.getModularInstance(n);const r=a.fu(e);if(n instanceof Qu)l.push(e);else{const t=rl(n,r);null!=t&&(l.push(e),h.set(e,t))}}const d=new re(l);return new zu(h,d,a.fieldTransforms)}function nl(t,e,n,r=!1){return rl(n,t.Su(r?4:3,e))}function rl(t,e){if(sl(t=o.getModularInstance(t)))return ol("Unsupported field value:",e,t),il(t,e);if(t instanceof ju)return function(t,e){if(!qu(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=rl(i,e.gu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=o.getModularInstance(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Jn(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=P.fromDate(t);return{timestampValue:ii(e.serializer,n)}}if(t instanceof P){const n=new P(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ii(e.serializer,n)}}if(t instanceof Vu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:si(e.serializer,t._byteString)};if(t instanceof _u){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.pu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ci(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${mu(t)}`)}(t,e)}function il(t,e){const n={};return Yt(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wt(t,((t,r)=>{const i=rl(r,e.Ru(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function sl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof P||t instanceof Vu||t instanceof Pu||t instanceof _u||t instanceof ju)}function ol(t,e,n){if(!sl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=mu(n);throw"an object"===r?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function al(t,e,n){if((e=o.getModularInstance(e))instanceof Fu)return e._internalPath;if("string"==typeof e)return ul(t,e);throw ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const cl=new RegExp("[~\\*/\\[\\]]");function ul(t,e,n){if(e.search(cl)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fu(...e.split("."))._internalPath}catch(r){throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ll(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new x(w.INVALID_ARGUMENT,a+t+c)}function hl(t,e){return t.some((t=>t.isEqual(e)))}class dl{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _u(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new fl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(pl("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class fl extends dl{data(){return super.data()}}function pl(t,e){return"string"==typeof e?ul(t,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}function ml(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new x(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gl{}class yl extends gl{}class vl extends yl{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new vl(t,e,n)}_apply(t){const e=this._parse(t);return Cl(t._query,e),new xu(t.firestore,t.converter,Cn(t._query,e))}_parse(t){const e=Hu(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new x(w.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Tl(o,s);const e=[];for(const n of o)e.push(Sl(r,t,n));a={arrayValue:{values:e}}}else a=Sl(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Tl(o,s),a=nl(n,"where",o,"in"===s||"not-in"===s);return He.create(i,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class bl extends gl{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new bl(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Ke.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const t of r)Cl(n,t),n=Cn(n,t)}(t._query,e),new xu(t.firestore,t.converter,Cn(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wl extends yl{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new wl(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new x(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new x(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qe(e,n)}(t._query,this._field,this._direction);return new xu(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new bn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class xl extends yl{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new xl(t,e,n)}_apply(t){return new xu(t.firestore,t.converter,Dn(t._query,this._limit,this._limitType))}}class _l extends yl{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new _l(t,e,n)}_apply(t){const e=Il(t,this.type,this._docOrFields,this._inclusive);return new xu(t.firestore,t.converter,function(t,e){return new bn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}class El extends yl{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new El(t,e,n)}_apply(t){const e=Il(t,this.type,this._docOrFields,this._inclusive);return new xu(t.firestore,t.converter,function(t,e){return new bn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Il(t,e,n,r){if(n[0]=o.getModularInstance(n[0]),n[0]instanceof dl)return function(t,e,n,r,i){if(!r)throw new x(w.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of In(t))if(n.field.isKeyField())s.push(Se(e,r.key));else{const t=r.data.field(n.field);if(le(t))throw new x(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=n.field.canonicalString();throw new x(w.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new Be(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Hu(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new x(w.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new x(w.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof c}`);if(!En(t)&&-1!==c.indexOf("/"))throw new x(w.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${c}' contains a slash.`);const n=t.path.child(V.fromString(c));if(!z.isDocumentKey(n))throw new x(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new z(n);a.push(Se(e,i))}else{const t=nl(n,r,c);a.push(t)}}return new Be(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Sl(t,e,n){if("string"==typeof(n=o.getModularInstance(n))){if(""===n)throw new x(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!En(e)&&-1!==n.indexOf("/"))throw new x(w.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(V.fromString(n));if(!z.isDocumentKey(r))throw new x(w.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Se(t,new z(r))}if(n instanceof _u)return Se(t,n._key);throw new x(w.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mu(n)}.`)}function Tl(t,e){if(!Array.isArray(t)||0===t.length)throw new x(w.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cl(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new x(w.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(w.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Dl(t,e){if(!(e instanceof vl||e instanceof bl))throw new x(w.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class kl{convertValue(t,e="none"){switch(ye(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ue(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw y()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Wt(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Vu(ce(t.latitude),ce(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=he(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(de(t));default:return null}}convertTimestamp(t){const e=ae(t);return new P(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=V.fromString(t);v(Li(n));const r=new pe(n.get(1),n.get(3)),i=new z(n.popFirst(5));return r.isEqual(e)||p(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}function Al(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Nl extends kl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _u(this.firestore,null,e)}}function Ll(){return new Ou("count")}class Ml{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ol extends dl{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(pl("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Rl extends Ol{data(t={}){return super.data(t)}}class Pl{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ml(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Rl(this._firestore,this._userDataWriter,n.key,n,new Ml(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new x(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Rl(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Ml(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Rl(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ml(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Fl(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Fl(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}class jl extends kl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _u(this.firestore,null,e)}}function Vl(t,e){return function(t,e){const n=new _;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=jc(t);try{const t=await function(t,e){const n=b(t),r=P.now(),i=e.reduce(((t,e)=>t.add(e.key)),Kn());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=jn(),c=Kn();return n.os.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=br(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new _r(t.key,e,je(e.value.mapValue),fr.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Un(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Da[t.currentUser.toKey()];r||(r=new Xt(M)),r=r.insert(e,n),t.Da[t.currentUser.toKey()]=r}(r,t.batchId,n),await Tc(r,t.changes),await ka(r.remoteStore)}catch(t){const e=qa(t,"Failed to persist write");n.reject(e)}}(await iu(t),e,n))),n.promise}(Au(t),e)}function Bl(t,e,n){const r=n.docs.get(e._key),i=new jl(t);return new Ol(t,i,e._key,r,new Ml(n.hasPendingWrites,n.fromCache),e.converter)}function Ul(t,e){const n=gu(t.firestore,ku),r=Au(n),i=function(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r));return n}(e,((t,e)=>new Nr(e,t.aggregateType,t._internalFieldPath)));return function(t,e,n){const r=new _;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await su(t);r.resolve(async function(t,e,n){var r;const i=b(t),{request:s,V_:o,parent:a}=function(t,e,n){const{ut:r,parent:i}=_i(t,e),s={},o=[];let a=0;return n.forEach((t=>{const e="aggregate_"+a++;s[e]=t.alias,"count"===t.aggregateType?o.push({alias:e,count:{}}):"avg"===t.aggregateType?o.push({alias:e,avg:{field:Di(t.fieldPath)}}):"sum"===t.aggregateType&&o.push({alias:e,sum:{field:Di(t.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:r.structuredQuery},parent:r.parent},V_:s,parent:i}}(i.serializer,function(t){const e=b(t);return e.Pe||(e.Pe=Tn(e,t.explicitOrderBy)),e.Pe}(e),n);i.connection.wo||delete s.parent;const c=(await i.vo("RunAggregationQuery",i.serializer.databaseId,a,s,1)).filter((t=>!!t.result));v(1===c.length);const u=null===(r=c[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(u).reduce(((t,e)=>(t[o[e]]=u[e],t)),{})}(i,e,n))}catch(t){r.reject(t)}})),r.promise}(r,t._query,i).then((e=>function(t,e,n){const r=new jl(t);return new Ru(e,r,n)}(n,t,e)))}class zl{constructor(t){this.kind="memory",this._onlineComponentProvider=new qc,(null==t?void 0:t.garbageCollector)?this._offlineComponentProvider=t.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=new Vc}toJSON(){return{kind:this.kind}}}class ql{constructor(t){let e;this.kind="persistent",(null==t?void 0:t.tabManager)?(t.tabManager._initialize(t),e=t.tabManager):(e=Ql(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class $l{constructor(){this.kind="memoryEager",this._offlineComponentProvider=new Vc}toJSON(){return{kind:this.kind}}}class Gl{constructor(t){this.kind="memoryLru",this._offlineComponentProvider=new Bc(t)}toJSON(){return{kind:this.kind}}}class Hl{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=new qc,this._offlineComponentProvider=new Uc(this._onlineComponentProvider,null==t?void 0:t.cacheSizeBytes,this.forceOwnership)}}class Kl{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=new qc,this._offlineComponentProvider=new zc(this._onlineComponentProvider,null==t?void 0:t.cacheSizeBytes)}}function Ql(t){return new Hl(null==t?void 0:t.forceOwnership)}const Wl={maxAttempts:5};class Yl{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Hu(t)}set(t,e,n){this._verifyNotCommitted();const r=Xl(t,this._firestore),i=Al(r.converter,e,n),s=Ku(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,fr.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const i=Xl(t,this._firestore);let s;return s="string"==typeof(e=o.getModularInstance(e))||e instanceof Fu?el(this._dataReader,"WriteBatch.update",i._key,e,n,r):tl(this._dataReader,"WriteBatch.update",i._key,e),this._mutations.push(s.toMutation(i._key,fr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Xl(t,this._firestore);return this._mutations=this._mutations.concat(new Tr(e._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xl(t,e){if((t=o.getModularInstance(t)).firestore!==e)throw new x(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class Jl extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Hu(t)}get(t){const e=Xl(t,this._firestore),n=new Nl(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return y();const r=t[0];if(r.isFoundDocument())return new dl(this._firestore,n,r.key,r,e.converter);if(r.isNoDocument())return new dl(this._firestore,n,e._key,null,e.converter);throw y()}))}set(t,e,n){const r=Xl(t,this._firestore),i=Al(r.converter,e,n),s=Ku(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(t,e,n,...r){const i=Xl(t,this._firestore);let s;return s="string"==typeof(e=o.getModularInstance(e))||e instanceof Fu?el(this._dataReader,"Transaction.update",i._key,e,n,r):tl(this._dataReader,"Transaction.update",i._key,e),this._transaction.update(i._key,s),this}delete(t){const e=Xl(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Xl(t,this._firestore),n=new jl(this._firestore);return super.get(t).then((t=>new Ol(this._firestore,n,e._key,t._document,new Ml(!1,!1),e.converter)))}}function Zl(t,e){if("string"!=typeof t[e])throw new x(w.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}class th{constructor(t){this._client=t,this.type="PersistentCacheIndexManager"}}function eh(t,e){t._client.verifyNotTerminated(),function(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){b(t).ts.Ui=e}(await nu(t),e)))}(t._client,e).then((t=>f(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((t=>m(`setting persistent cache index auto creation isEnabled=${e} failed`,t)))}const nh=new WeakMap;class rh{constructor(){this.Cu=new Map}static get instance(){return ih||(ih=new rh,function(t){if(Fr)throw new Error("a TestingHooksSpi instance is already set");Fr=t}(ih)),ih}tt(t){this.Cu.forEach((e=>e(t)))}onExistenceFilterMismatch(t){const e=Symbol(),n=this.Cu;return n.set(e,t),()=>n.delete(e)}}let ih=null;!function(t,e=!0){!function(t){l=t}(r.SDK_VERSION),r._registerComponent(new i.Component("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new ku(new T(t.getProvider("auth-internal")),new A(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new x(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pe(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),r.registerVersion(c,"4.4.1",t),r.registerVersion(c,"4.4.1","cjs2017")}(),e.AbstractUserDataWriter=kl,e.AggregateField=Ou,e.AggregateQuerySnapshot=Ru,e.Bytes=Pu,e.CACHE_SIZE_UNLIMITED=-1,e.CollectionReference=Eu,e.DocumentReference=_u,e.DocumentSnapshot=Ol,e.FieldPath=Fu,e.FieldValue=ju,e.Firestore=ku,e.FirestoreError=x,e.GeoPoint=Vu,e.LoadBundleTask=Du,e.PersistentCacheIndexManager=th,e.Query=xu,e.QueryCompositeFilterConstraint=bl,e.QueryConstraint=yl,e.QueryDocumentSnapshot=Rl,e.QueryEndAtConstraint=El,e.QueryFieldFilterConstraint=vl,e.QueryLimitConstraint=xl,e.QueryOrderByConstraint=wl,e.QuerySnapshot=Pl,e.QueryStartAtConstraint=_l,e.SnapshotMetadata=Ml,e.Timestamp=P,e.Transaction=Jl,e.WriteBatch=Yl,e._AutoId=L,e._ByteString=se,e._DatabaseId=pe,e._DocumentKey=z,e._EmptyAppCheckTokenProvider=class{getToken(){return Promise.resolve(new k(""))}invalidateToken(){}start(t,e){}shutdown(){}},e._EmptyAuthCredentialsProvider=I,e._FieldPath=U,e._TestingHooks=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(t){return rh.instance.onExistenceFilterMismatch(t)}},e._cast=gu,e._debugAssert=function(t,e){t||y()},e._isBase64Available=function(){return"undefined"!=typeof atob},e._logWarn=m,e._validateIsNotUsedTogether=du,e.addDoc=function(t,e){const n=gu(t.firestore,ku),r=Iu(t),i=Al(t.converter,e);return Vl(n,[Ku(Hu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,fr.exists(!1))]).then((()=>r))},e.aggregateFieldEqual=function(t,e){var n,r;return t instanceof Ou&&e instanceof Ou&&t.aggregateType===e.aggregateType&&(null===(n=t._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=e._internalFieldPath)||void 0===r?void 0:r.canonicalString())},e.aggregateQuerySnapshotEqual=function(t,e){return Su(t.query,e.query)&&o.deepEqual(t.data(),e.data())},e.and=function(...t){return t.forEach((t=>Dl("and",t))),bl._create("and",t)},e.arrayRemove=function(...t){return new Ju("arrayRemove",t)},e.arrayUnion=function(...t){return new Xu("arrayUnion",t)},e.average=function(t){return new Ou("avg",al("average",t))},e.clearIndexedDbPersistence=function(t){if(t._initialized&&!t._terminated)throw new x(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!st.D())return Promise.resolve();const e=t+"main";await st.delete(e)}(Eo(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise},e.collection=function(t,e,...n){if(t=o.getModularInstance(t),hu("collection","path",e),t instanceof bu){const r=V.fromString(e,...n);return pu(r),new Eu(t,null,r)}{if(!(t instanceof _u||t instanceof Eu))throw new x(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(V.fromString(e,...n));return pu(r),new Eu(t.firestore,null,r)}},e.collectionGroup=function(t,e){if(t=gu(t,bu),hu("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(w.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xu(t,null,function(t){return new bn(V.emptyPath(),t)}(e))},e.connectFirestoreEmulator=wu,e.count=Ll,e.deleteAllPersistentCacheIndexes=function(t){t._client.verifyNotTerminated(),function(t){return t.asyncQueue.enqueue((async()=>function(t){const e=b(t),n=e.indexManager;return e.persistence.runTransaction("Delete All Indexes","readwrite",(t=>n.deleteAllFieldIndexes(t)))}(await nu(t))))}(t._client).then((t=>f("deleting all persistent cache indexes succeeded"))).catch((t=>m("deleting all persistent cache indexes failed",t)))},e.deleteDoc=function(t){return Vl(gu(t.firestore,ku),[new Tr(t._key,fr.none())])},e.deleteField=function(){return new Qu("deleteField")},e.disableNetwork=function(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await eu(t),n=await ru(t);return e.setNetworkEnabled(!1),async function(t){const e=b(t);e.v_.add(0),await ma(e),e.x_.set("Offline")}(n)}))}(Au(t=gu(t,ku)))},e.disablePersistentCacheIndexAutoCreation=function(t){eh(t,!1)},e.doc=Iu,e.documentId=function(){return new Fu("__name__")},e.enableIndexedDbPersistence=function(t,e){Mu(t=gu(t,ku));const n=Au(t);if(n._uninitializedComponentsProvider)throw new x(w.FAILED_PRECONDITION,"SDK cache is already specified.");m("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new qc;return Lu(n,i,new Uc(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))},e.enableMultiTabIndexedDbPersistence=function(t){Mu(t=gu(t,ku));const e=Au(t);if(e._uninitializedComponentsProvider)throw new x(w.FAILED_PRECONDITION,"SDK cache is already specified.");m("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new qc;return Lu(e,r,new zc(r,n.cacheSizeBytes))},e.enableNetwork=function(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await eu(t),n=await ru(t);return e.setNetworkEnabled(!0),function(t){const e=b(t);return e.v_.delete(0),pa(e)}(n)}))}(Au(t=gu(t,ku)))},e.enablePersistentCacheIndexAutoCreation=function(t){eh(t,!0)},e.endAt=function(...t){return El._create("endAt",t,!0)},e.endBefore=function(...t){return El._create("endBefore",t,!1)},e.ensureFirestoreConfigured=Au,e.executeWrite=Vl,e.getAggregateFromServer=Ul,e.getCountFromServer=function(t){return Ul(t,{count:Ll()})},e.getDoc=function(t){t=gu(t,_u);const e=gu(t.firestore,ku);return au(Au(e),t._key).then((n=>Bl(e,t,n)))},e.getDocFromCache=function(t){t=gu(t,_u);const e=gu(t.firestore,ku),n=Au(e),r=new jl(e);return function(t,e){const n=new _;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const r=await function(t,e){const n=b(t);return n.persistence.runTransaction("read document","readonly",(t=>n.localDocuments.getDocument(t,e)))}(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new x(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const r=qa(t,`Failed to get document '${e} from cache`);n.reject(r)}}(await nu(t),e,n))),n.promise}(n,t._key).then((n=>new Ol(e,r,t._key,n,new Ml(null!==n&&n.hasLocalMutations,!0),t.converter)))},e.getDocFromServer=function(t){t=gu(t,_u);const e=gu(t.firestore,ku);return au(Au(e),t._key,{source:"server"}).then((n=>Bl(e,t,n)))},e.getDocs=function(t){t=gu(t,xu);const e=gu(t.firestore,ku),n=Au(e),r=new jl(e);return ml(t._query),cu(n,t._query).then((n=>new Pl(e,r,t,n)))},e.getDocsFromCache=function(t){t=gu(t,xu);const e=gu(t.firestore,ku),n=Au(e),r=new jl(e);return function(t,e){const n=new _;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const r=await Ro(t,e,!0),i=new ac(e,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const r=qa(t,`Failed to execute query '${e} against cache`);n.reject(r)}}(await nu(t),e,n))),n.promise}(n,t._query).then((n=>new Pl(e,r,t,n)))},e.getDocsFromServer=function(t){t=gu(t,xu);const e=gu(t.firestore,ku),n=Au(e),r=new jl(e);return cu(n,t._query,{source:"server"}).then((n=>new Pl(e,r,t,n)))},e.getFirestore=function(t,e){const n="object"==typeof t?t:r.getApp(),i="string"==typeof t?t:e||"(default)",s=r._getProvider(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const t=o.getDefaultEmulatorHostnameAndPort("firestore");t&&wu(s,...t)}return s},e.getPersistentCacheIndexManager=function(t){var e;t=gu(t,ku);const n=nh.get(t);if(n)return n;const r=Au(t);if("persistent"!==(null===(e=r._uninitializedComponentsProvider)||void 0===e?void 0:e._offlineKind))return null;const i=new th(r);return nh.set(t,i),i},e.increment=function(t){return new Zu("increment",t)},e.initializeFirestore=function(t,e,n){n||(n="(default)");const i=r._getProvider(t,"firestore");if(i.isInitialized(n)){const t=i.getImmediate({identifier:n}),r=i.getOptions(n);if(o.deepEqual(r,e))return t;throw new x(w.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&void 0!==e.localCache)throw new x(w.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new x(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})},e.limit=function(t){return yu("limit",t),xl._create("limit",t,"F")},e.limitToLast=function(t){return yu("limitToLast",t),xl._create("limitToLast",t,"L")},e.loadBundle=function(t,e){const n=Au(t=gu(t,ku)),r=new Du;return function(t,e,n,r){const i=function(t,e){let n;return n="string"==typeof t?jr().encode(t):t,function(t,e){return new Hc(t,e)}(function(t,e){if(t instanceof Uint8Array)return $c(t,e);if(t instanceof ArrayBuffer)return $c(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,oa(e));t.asyncQueue.enqueueAndForget((async()=>{!function(t,e,n){const r=b(t);(async function(t,e,n){try{const r=await e.getMetadata();if(await function(t,e){const n=b(t),r=ai(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n.$r.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(r)>=0))}(t.localStore,r))return await e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(ic(r));const i=new rc(r,t.localStore,e.serializer);let s=await e.Oa();for(;s;){const t=await i.na(s);t&&n._updateProgress(t),s=await e.Oa()}const o=await i.complete();return await Tc(t,o.sa,void 0),await function(t,e){const n=b(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n.$r.saveBundleMetadata(t,e)))}(t.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(t){return m("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t),Promise.resolve(new Set)}})(r,e,n).then((t=>{r.sharedClientState.notifyBundleLoaded(t)}))}(await iu(t),i,r)}))}(n,t._databaseId,e,r),r},e.memoryEagerGarbageCollector=function(){return new $l},e.memoryLocalCache=function(t){return new zl(t)},e.memoryLruGarbageCollector=function(t){return new Gl(null==t?void 0:t.cacheSizeBytes)},e.namedQuery=function(t,e){return function(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=b(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n.$r.getNamedQuery(t,e)))}(await nu(t),e)))}(Au(t=gu(t,ku)),e).then((e=>e?new xu(t,null,e.query):null))},e.onSnapshot=function(t,...e){var n,r,i;t=o.getModularInstance(t);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||Cu(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Cu(e[a])){const t=e[a];e[a]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[a+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[a+2]=null===(i=t.complete)||void 0===i?void 0:i.bind(t)}let u,l,h;if(t instanceof _u)l=gu(t.firestore,ku),h=xn(t._key.path),u={next:n=>{e[a]&&e[a](Bl(l,t,n))},error:e[a+1],complete:e[a+2]};else{const n=gu(t,xu);l=gu(n.firestore,ku),h=n._query;const r=new jl(l);u={next:t=>{e[a]&&e[a](new Pl(l,r,n,t))},error:e[a+1],complete:e[a+2]},ml(t._query)}return function(t,e,n,r){const i=new Gc(r),s=new tc(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>Wa(await ou(t),s))),()=>{i.La(),t.asyncQueue.enqueueAndForget((async()=>Ya(await ou(t),s)))}}(Au(l),h,c,u)},e.onSnapshotsInSync=function(t,e){return function(t,e){const n=new Gc(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){b(t).K_.add(e),e.next()}(await ou(t),n))),()=>{n.La(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){b(t).K_.delete(e)}(await ou(t),n)))}}(Au(t=gu(t,ku)),Cu(e)?e:{next:e})},e.or=function(...t){return t.forEach((t=>Dl("or",t))),bl._create("or",t)},e.orderBy=function(t,e="asc"){const n=e,r=pl("orderBy",t);return wl._create(r,n)},e.persistentLocalCache=function(t){return new ql(t)},e.persistentMultipleTabManager=function(){return new Kl},e.persistentSingleTabManager=Ql,e.query=function(t,e,...n){let r=[];e instanceof gl&&r.push(e),r=r.concat(n),function(t){const e=t.filter((t=>t instanceof bl)).length,n=t.filter((t=>t instanceof vl)).length;if(e>1||e>0&&n>0)throw new x(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const e of r)t=e._apply(t);return t},e.queryEqual=Su,e.refEqual=function(t,e){return t=o.getModularInstance(t),e=o.getModularInstance(e),(t instanceof _u||t instanceof Eu)&&(e instanceof _u||e instanceof Eu)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter},e.runTransaction=function(t,e,n){t=gu(t,ku);const r=Object.assign(Object.assign({},Wl),n);return function(t){if(t.maxAttempts<1)throw new x(w.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(t,e,n){const r=new _;return t.asyncQueue.enqueueAndForget((async()=>{const i=await su(t);new Qc(t.asyncQueue,i,n,e,r).ja()})),r.promise}(Au(t),(n=>e(new Jl(t,n))),r)},e.serverTimestamp=function(){return new Yu("serverTimestamp")},e.setDoc=function(t,e,n){t=gu(t,_u);const r=gu(t.firestore,ku),i=Al(t.converter,e,n);return Vl(r,[Ku(Hu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,fr.none())])},e.setIndexConfiguration=function(t,e){var n;const r=Au(t=gu(t,ku));if(!r._uninitializedComponentsProvider||"memory"===(null===(n=r._uninitializedComponentsProvider)||void 0===n?void 0:n._offlineKind))return m("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=function(t){const e="string"==typeof t?function(t){try{return JSON.parse(t)}catch(t){throw new x(w.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==t?void 0:t.message))}}(t):t,n=[];if(Array.isArray(e.indexes))for(const t of e.indexes){const e=Zl(t,"collectionGroup"),r=[];if(Array.isArray(t.fields))for(const e of t.fields){const t=ul("setIndexConfiguration",Zl(e,"fieldPath"));"CONTAINS"===e.arrayConfig?r.push(new K(t,2)):"ASCENDING"===e.order?r.push(new K(t,0)):"DESCENDING"===e.order&&r.push(new K(t,1))}n.push(new q(q.UNKNOWN_ID,e,r,W.empty()))}return n}(e);return function(t,e){return t.asyncQueue.enqueue((async()=>async function(t,e){const n=b(t),r=n.indexManager,i=[];return n.persistence.runTransaction("Configure indexes","readwrite",(t=>r.getFieldIndexes(t).next((n=>function(t,e,n,r,i){t=[...t],e=[...e],t.sort(n),e.sort(n);const s=t.length,o=e.length;let a=0,c=0;for(;a<o&&c<s;){const s=n(t[c],e[a]);s<0?i(t[c++]):s>0?r(e[a++]):(a++,c++)}for(;a<o;)r(e[a++]);for(;c<s;)i(t[c++])}(n,e,H,(e=>{i.push(r.addFieldIndex(t,e))}),(e=>{i.push(r.deleteFieldIndex(t,e))})))).next((()=>rt.waitFor(i)))))}(await nu(t),e)))}(r,i)},e.setLogLevel=function(t){h.setLogLevel(t)},e.snapshotEqual=function(t,e){return t instanceof Ol&&e instanceof Ol?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Pl&&e instanceof Pl&&t._firestore===e._firestore&&Su(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)},e.startAfter=function(...t){return _l._create("startAfter",t,!1)},e.startAt=function(...t){return _l._create("startAt",t,!0)},e.sum=function(t){return new Ou("sum",al("sum",t))},e.terminate=function(t){return r._removeServiceInstance(t.app,"firestore",t._databaseId.database),t._delete()},e.updateDoc=function(t,e,n,...r){t=gu(t,_u);const i=gu(t.firestore,ku),s=Hu(i);let a;return a="string"==typeof(e=o.getModularInstance(e))||e instanceof Fu?el(s,"updateDoc",t._key,e,n,r):tl(s,"updateDoc",t._key,e),Vl(i,[a.toMutation(t._key,fr.exists(!0))])},e.waitForPendingWrites=function(t){return function(t){const e=new _;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e){const n=b(t);_a(n.remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=b(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.mutationQueue.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const r=n.Ca.get(t)||[];r.push(e),n.Ca.set(t,r)}catch(t){const n=qa(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}(await iu(t),e))),e.promise}(Au(t=gu(t,ku)))},e.where=function(t,e,n){const r=e,i=pl("where",t);return vl._create(i,r,n)},e.writeBatch=function(t){return Au(t=gu(t,ku)),new Yl(t,(e=>Vl(t,e)))}},5844:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,s=n(1635),o=[];e.LogLevel=void 0,(i=e.LogLevel||(e.LogLevel={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";var a={debug:e.LogLevel.DEBUG,verbose:e.LogLevel.VERBOSE,info:e.LogLevel.INFO,warn:e.LogLevel.WARN,error:e.LogLevel.ERROR,silent:e.LogLevel.SILENT},c=e.LogLevel.INFO,u=((r={})[e.LogLevel.DEBUG]="log",r[e.LogLevel.VERBOSE]="log",r[e.LogLevel.INFO]="info",r[e.LogLevel.WARN]="warn",r[e.LogLevel.ERROR]="error",r),l=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=u[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));console[o].apply(console,s.__spreadArray(["[".concat(i,"]  ").concat(t.name,":")],n,!1))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in e.LogLevel))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.DEBUG],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.DEBUG],t,!1))},t.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.VERBOSE],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.VERBOSE],t,!1))},t.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.INFO],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.INFO],t,!1))},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.WARN],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.WARN],t,!1))},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.ERROR],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.ERROR],t,!1))},t}();e.Logger=h,e.setLogLevel=function(t){o.forEach((function(e){e.setLogLevel(t)}))},e.setUserLogHandler=function(t,n){for(var r=function(r){var i=null;n&&n.level&&(i=a[n.level]),r.userLogHandler=null===t?null:function(n,r){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a=s.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");r>=(null!=i?i:n.logLevel)&&t({level:e.LogLevel[r].toLowerCase(),message:a,args:s,type:n.name})}},i=0,s=o;i<s.length;i++)r(s[i])}},6336:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==o||null==a)throw new c;const u=i<<2|s>>4;if(r.push(u),64!==o){const t=s<<4&240|o>>2;if(r.push(t),64!==a){const t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(t){const e=o(t);return a.encodeByteArray(e,!0)},l=function(t){return u(t).replace(/\./g,"")},h=function(t){try{return a.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=d(t[n],e[n]));return t}function f(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}const p=()=>{try{return f().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&h(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},m=t=>{var e,n;return null===(n=null===(e=p())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){var t;const e=null===(t=p())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}class b extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(x,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new b(r,o,n)}}const x=/\{\$([^}]+)}/g;function _(t){return JSON.parse(t)}const E=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=_(h(s[0])||""),n=_(h(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};function I(t){return null!==t&&"object"==typeof t}class S{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function T(){}function C(t,e){return`${t} failed: ${e} argument `}const D=144e5;e.CONSTANTS=r,e.DecodeBase64StringError=c,e.Deferred=g,e.ErrorFactory=w,e.FirebaseError=b,e.MAX_VALUE_MILLIS=D,e.RANDOM_FACTOR=.5,e.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const n=this.W_;if("string"==typeof t)for(let r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let t=16;t<80;t++){const e=n[t-3]^n[t-8]^n[t-14]^n[t-16];n[t]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(r=c^o&(a^c),i=1518500249):(r=o^a^c,i=1859775393):t<60?(r=o&a|c&(o|a),i=2400959708):(r=o^a^c,i=3395469782);const e=(s<<5|s>>>27)+r+u+i+n[t]&4294967295;u=c,c=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const n=e-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let e=0;e<5;e++)for(let r=24;r>=0;r-=8)t[n]=this.chain_[e]>>r&255,++n;return t}},e.areCookiesEnabled=function(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)},e.assert=i,e.assertionError=s,e.async=function(t,e){return(...n)=>{Promise.resolve(!0).then((()=>{t(...n)})).catch((t=>{e&&e(t)}))}},e.base64=a,e.base64Decode=h,e.base64Encode=u,e.base64urlEncodeWithoutPadding=l,e.calculateBackoffMillis=function(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(D,r+i)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createMockUserToken=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")},e.createSubscribe=function(t,e){const n=new S(t,e);return n.subscribe.bind(n)},e.decode=E,e.deepCopy=function(t){return d(void 0,t)},e.deepEqual=function t(e,n){if(e===n)return!0;const r=Object.keys(e),i=Object.keys(n);for(const s of r){if(!i.includes(s))return!1;const r=e[s],o=n[s];if(I(r)&&I(o)){if(!t(r,o))return!1}else if(r!==o)return!1}for(const t of i)if(!r.includes(t))return!1;return!0},e.deepExtend=d,e.errorPrefix=C,e.extractQuerystring=function(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)},e.getDefaultAppConfig=()=>{var t;return null===(t=p())||void 0===t?void 0:t.config},e.getDefaultEmulatorHost=m,e.getDefaultEmulatorHostnameAndPort=t=>{const e=m(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},e.getDefaults=p,e.getExperimentalSetting=t=>{var e;return null===(e=p())||void 0===e?void 0:e[`_${t}`]},e.getGlobal=f,e.getModularInstance=function(t){return t&&t._delegate?t._delegate:t},e.getUA=y,e.isAdmin=function(t){const e=E(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return y().indexOf("Electron/")>=0},e.isEmpty=function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){const t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(t){return!1}},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())},e.isNode=v,e.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return y().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){const e=E(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){const e=E(t).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){const e=E(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=_,e.map=function(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.ordinal=function(t){return Number.isFinite(t)?t+function(t){const e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";const n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):`${t}`},e.promiseWithTimeout=function(t,e=2e3){const n=new g;return setTimeout((()=>n.reject("timeout!")),e),t.then(n.resolve,n.reject),n.promise},e.querystring=function(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const e=s-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),s=65536+(e<<10)+(t.charCodeAt(r)-56320)}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},e.validateArgCount=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e)+"must be a valid context object.")},e.validateIndexedDBOpenable=function(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))},e.validateNamespace=function(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(C(t,"namespace")+"must be a valid firebase namespace.")}},3637:(t,e,n)=>{(function(){var e;function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];if(e)return e.call(t);if("number"==typeof t.length)return{next:r(t)};throw Error(String(t)+" is not an iterable or ArrayLike")}var s,o="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e},a="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},c=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function u(t,e){if(e)t:{var n=c;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];if(!(i in n))break t;n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&a(n,t,{configurable:!0,writable:!0,value:e})}}if("function"==typeof Object.setPrototypeOf)s=Object.setPrototypeOf;else{var l;t:{var h={};try{h.__proto__={a:!0},l=h.a;break t}catch(U){}l=!1}s=l?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var d=s;function f(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function p(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function m(t,e){return Object.prototype.hasOwnProperty.call(t,e)}u("Symbol",(function(t){function e(t,e){this.g=t,a(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function t(i){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(n+(i||"")+"_"+r++,i)}})),u("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<e.length;n++){var i=c[e[n]];"function"==typeof i&&"function"!=typeof i.prototype[t]&&a(i.prototype,t,{configurable:!0,writable:!0,value:function(){return f(r(this))}})}return t})),u("Promise",(function(t){function e(t){this.g=0,this.i=void 0,this.h=[],this.o=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.g=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i((function(){e.l()}))}this.g.push(t)};var s=c.setTimeout;n.prototype.i=function(t){s(t,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.j(t)}}}this.g=null},n.prototype.j=function(t){this.i((function(){throw t}))},e.prototype.j=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.B),reject:t(this.l)}},e.prototype.B=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.D(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.A(t):this.m(t)}},e.prototype.A=function(t){var e=void 0;try{e=t.then}catch(t){return void this.l(t)}"function"==typeof e?this.G(e,t):this.m(t)},e.prototype.l=function(t){this.s(2,t)},e.prototype.m=function(t){this.s(1,t)},e.prototype.s=function(t,e){if(0!=this.g)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.g);this.g=t,this.i=e,2===this.g&&this.C(),this.u()},e.prototype.C=function(){var t=this;s((function(){if(t.v()){var e=c.console;void 0!==e&&e.error(t.i)}}),1)},e.prototype.v=function(){if(this.o)return!1;var t=c.CustomEvent,e=c.Event,n=c.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=c.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,n(t))},e.prototype.u=function(){if(null!=this.h){for(var t=0;t<this.h.length;++t)o.h(this.h[t]);this.h=null}};var o=new n;return e.prototype.D=function(t){var e=this.j();t.la(e.resolve,e.reject)},e.prototype.G=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){s(t)}}:e}var i,s,o=new e((function(t,e){i=t,s=e}));return this.la(r(t,i),r(n,s)),o},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.la=function(t,e){function n(){switch(r.g){case 1:t(r.i);break;case 2:e(r.i);break;default:throw Error("Unexpected state: "+r.g)}}var r=this;null==this.h?o.h(n):this.h.push(n),this.o=!0},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var s=i(t),o=s.next();!o.done;o=s.next())r(o.value).la(e,n)}))},e.all=function(t){var n=i(t),s=n.next();return s.done?r([]):new e((function(t,e){function i(e){return function(n){o[e]=n,0==--a&&t(o)}}var o=[],a=0;do{o.push(void 0),a++,r(s.value).la(i(o.length-1),e),s=n.next()}while(!s.done)}))},e})),u("Array.prototype.values",(function(t){return t||function(){return p(this,(function(t,e){return e}))}})),u("Array.prototype.keys",(function(t){return t||function(){return p(this,(function(t){return t}))}})),u("WeakMap",(function(t){function e(t){if(this.g=(u+=Math.random()+1).toString(),t){t=i(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}function n(){}function r(t){var e=typeof t;return"object"===e&&null!==t||"function"===e}function s(t){if(!m(t,c)){var e=new n;a(t,c,{value:e})}}function o(t){var e=Object[t];e&&(Object[t]=function(t){return t instanceof n?t:(Object.isExtensible(t)&&s(t),e(t))})}if(function(){if(!t||!Object.seal)return!1;try{var e=Object.seal({}),n=Object.seal({}),r=new t([[e,2],[n,3]]);return 2==r.get(e)&&3==r.get(n)&&(r.delete(e),r.set(n,4),!r.has(e)&&4==r.get(n))}catch(t){return!1}}())return t;var c="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return e.prototype.set=function(t,e){if(!r(t))throw Error("Invalid WeakMap key");if(s(t),!m(t,c))throw Error("WeakMap key fail: "+t);return t[c][this.g]=e,this},e.prototype.get=function(t){return r(t)&&m(t,c)?t[c][this.g]:void 0},e.prototype.has=function(t){return r(t)&&m(t,c)&&m(t[c],this.g)},e.prototype.delete=function(t){return!!(r(t)&&m(t,c)&&m(t[c],this.g))&&delete t[c][this.g]},e})),u("Map",(function(t){function e(){var t={};return t.V=t.next=t.head=t}function n(t,e){var n=t.g;return f((function(){if(n){for(;n.head!=t.g;)n=n.V;for(;n.next!=n.head;)return n=n.next,{done:!1,value:e(n)};n=null}return{done:!0,value:void 0}}))}function r(t,e){var n=e&&typeof e;"object"==n||"function"==n?o.has(e)?n=o.get(e):(n=""+ ++a,o.set(e,n)):n="p_"+e;var r=t.h[n];if(r&&m(t.h,n))for(t=0;t<r.length;t++){var i=r[t];if(e!=e&&i.key!=i.key||e===i.key)return{id:n,list:r,index:t,K:i}}return{id:n,list:r,index:-1,K:void 0}}function s(t){if(this.h={},this.g=e(),this.size=0,t){t=i(t);for(var n;!(n=t.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),n=new t(i([[e,"s"]]));if("s"!=n.get(e)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),s=r.next();return!s.done&&s.value[0]==e&&"s"==s.value[1]&&!((s=r.next()).done||4!=s.value[0].x||"t"!=s.value[1]||!r.next().done)}catch(t){return!1}}())return t;var o=new WeakMap;s.prototype.set=function(t,e){var n=r(this,t=0===t?0:t);return n.list||(n.list=this.h[n.id]=[]),n.K?n.K.value=e:(n.K={next:this.g,V:this.g.V,head:this.g,key:t,value:e},n.list.push(n.K),this.g.V.next=n.K,this.g.V=n.K,this.size++),this},s.prototype.delete=function(t){return!(!(t=r(this,t)).K||!t.list||(t.list.splice(t.index,1),t.list.length||delete this.h[t.id],t.K.V.next=t.K.next,t.K.next.V=t.K.V,t.K.head=null,this.size--,0))},s.prototype.clear=function(){this.h={},this.g=this.g.V=e(),this.size=0},s.prototype.has=function(t){return!!r(this,t).K},s.prototype.get=function(t){return(t=r(this,t).K)&&t.value},s.prototype.entries=function(){return n(this,(function(t){return[t.key,t.value]}))},s.prototype.keys=function(){return n(this,(function(t){return t.key}))},s.prototype.values=function(){return n(this,(function(t){return t.value}))},s.prototype.forEach=function(t,e){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,t.call(e,n[1],n[0],this)},s.prototype[Symbol.iterator]=s.prototype.entries;var a=0;return s})),u("Array.prototype.find",(function(t){return t||function(t,e){t:{var n=this;n instanceof String&&(n=String(n));for(var r=n.length,i=0;i<r;i++){var s=n[i];if(t.call(e,s,i,n)){t=s;break t}}t=void 0}return t}})),u("Array.prototype.entries",(function(t){return t||function(){return p(this,(function(t,e){return[t,e]}))}})),u("Array.from",(function(t){return t||function(t,e,n){e=null!=e?e:function(t){return t};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];if("function"==typeof i){t=i.call(t);for(var s=0;!(i=t.next()).done;)r.push(e.call(n,i.value,s++))}else for(i=t.length,s=0;s<i;s++)r.push(e.call(n,t[s],s));return r}})),u("Set",(function(t){function e(t){if(this.g=new Map,t){t=i(t);for(var e;!(e=t.next()).done;)this.add(e.value)}this.size=this.g.size}return function(){if(!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),n=new t(i([e]));if(!n.has(e)||1!=n.size||n.add(e)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),s=r.next();return!s.done&&s.value[0]==e&&s.value[1]==e&&!(s=r.next()).done&&s.value[0]!=e&&4==s.value[0].x&&s.value[1]==s.value[0]&&r.next().done}catch(t){return!1}}()?t:(e.prototype.add=function(t){return t=0===t?0:t,this.g.set(t,t),this.size=this.g.size,this},e.prototype.delete=function(t){return t=this.g.delete(t),this.size=this.g.size,t},e.prototype.clear=function(){this.g.clear(),this.size=0},e.prototype.has=function(t){return this.g.has(t)},e.prototype.entries=function(){return this.g.entries()},e.prototype.values=function(){return this.g.values()},e.prototype.keys=e.prototype.values,e.prototype[Symbol.iterator]=e.prototype.values,e.prototype.forEach=function(t,e){var n=this;this.g.forEach((function(r){return t.call(e,r,r,n)}))},e)}));var g=g||{},y=this||self;function v(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function b(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function w(t){return Object.prototype.hasOwnProperty.call(t,x)&&t[x]||(t[x]=++_)}var x="closure_uid_"+(1e9*Math.random()>>>0),_=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function I(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function S(t,e,n){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:I).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function C(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.dc=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function D(){0!=k&&(A[w(this)]=this),this.s=this.s,this.o=this.o}var k=0,A={};D.prototype.s=!1,D.prototype.va=function(){if(!this.s&&(this.s=!0,this.O(),0!=k)){var t=w(this);if(0!=k&&this.o&&0<this.o.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete A[t]}},D.prototype.O=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var N=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function L(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function M(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(v(r)){var i=t.length||0,s=r.length||0;t.length=i+s;for(var o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function O(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{var n=function(){};y.addEventListener("test",n,e),y.removeEventListener("test",n,e)}catch(t){}return t}();function P(t){return/^[\s\xa0]*$/.test(t)}function F(){var t=y.navigator;return t&&(t=t.userAgent)?t:""}function j(t){return-1!=F().indexOf(t)}function V(t){return V[" "](t),t}V[" "]=function(){};var B,U,z,q=j("Opera"),$=j("Trident")||j("MSIE"),G=j("Edge"),H=G||$,K=j("Gecko")&&!(-1!=F().toLowerCase().indexOf("webkit")&&!j("Edge"))&&!(j("Trident")||j("MSIE"))&&!j("Edge"),Q=-1!=F().toLowerCase().indexOf("webkit")&&!j("Edge");function W(){var t=y.document;return t?t.documentMode:void 0}t:{var Y="",X=(U=F(),K?/rv:([^\);]+)(\)|;)/.exec(U):G?/Edge\/([\d\.]+)/.exec(U):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):Q?/WebKit\/(\S+)/.exec(U):q?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(X&&(Y=X?X[1]:""),$){var J=W();if(null!=J&&J>parseFloat(Y)){B=String(J);break t}}B=Y}y.document&&$?z=W()||parseInt(B,10)||void 0:z=void 0;var Z=z;function tt(t,e){if(O.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(K){t:{try{V(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:et[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&tt.Z.h.call(this)}}C(tt,O);var et={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),rt=0;function it(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.oa=i,this.key=++rt,this.ha=this.ka=!1}function st(t){t.ha=!0,t.listener=null,t.proxy=null,t.src=null,t.oa=null}function ot(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function at(t){var e,n={};for(e in t)n[e]=t[e];return n}var ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<ct.length;s++)n=ct[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lt(t){this.src=t,this.g={},this.h=0}function ht(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=N(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(st(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ha&&s.listener==e&&s.capture==!!n&&s.oa==r)return i}return-1}lt.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=dt(t,e,r,i);return-1<o?(e=t[o],n||(e.ka=!1)):((e=new it(e,this.src,s,!!r,i)).ka=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),pt={};function mt(t,e,n,r,i){if(r&&r.once)return yt(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mt(t,e[s],n,r,i);return null}return n=It(n),t&&t[nt]?t.P(e,n,b(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=b(i)?!!i.capture:!!i,a=_t(t);if(a||(t[ft]=a=new lt(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=xt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)R||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)yt(t,e[s],n,r,i);return null}return n=It(n),t&&t[nt]?t.R(e,n,b(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function vt(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)vt(t,e[s],n,r,i);else r=b(r)?!!r.capture:!!r,n=It(n),t&&t[nt]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=dt(s=t.g[e],n,r,i))&&(st(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=_t(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&bt(n))}function bt(t){if("number"!=typeof t&&t&&!t.ha){var e=t.src;if(e&&e[nt])ht(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_t(e))?(ht(n,t),0==n.h&&(n.src=null,e[ft]=null)):st(t)}}}function wt(t){return t in pt?pt[t]:pt[t]="on"+t}function xt(t,e){if(t.ha)t=!0;else{e=new tt(e,this);var n=t.listener,r=t.oa||t.src;t.ka&&bt(t),t=n.call(r,e)}return t}function _t(t){return(t=t[ft])instanceof lt?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(t){return"function"==typeof t?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function St(){D.call(this),this.i=new lt(this),this.T=this,this.J=null}function Tt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.T,r=e.type||e,"string"==typeof e)e=new O(e,t);else if(e instanceof O)e.target=e.target||t;else{var i=e;ut(e=new O(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ct(o,r,!0,e)&&i}if(i=Ct(o=e.g=t,r,!0,e)&&i,i=Ct(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Ct(o=e.g=n[s],r,!1,e)&&i}function Ct(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ha&&o.capture==n){var a=o.listener,c=o.oa||o.src;o.ka&&ht(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}C(St,D),St.prototype[nt]=!0,St.prototype.removeEventListener=function(t,e,n,r){vt(this,t,e,n,r)},St.prototype.O=function(){if(St.Z.O.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)st(n[r]);delete e.g[t],e.h--}}this.J=null},St.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},St.prototype.R=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Dt=y.JSON.stringify;function kt(t,e){this.i=t,this.j=e,this.h=0,this.g=null}function At(){this.h=this.g=null}function Nt(){var t=jt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}kt.prototype.get=function(){if(0<this.h){this.h--;var t=this.g;this.g=t.next,t.next=null}else t=this.i();return t},At.prototype.add=function(t,e){var n=Lt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n};var Lt=new kt((function(){return new Mt}),(function(t){return t.reset()}));function Mt(){this.next=this.g=this.h=null}function Ot(t){var e=1;t=t.split(":");for(var n=[];0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Rt(t){y.setTimeout((function(){throw t}),0)}Mt.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},Mt.prototype.reset=function(){this.next=this.g=this.h=null};var Pt,Ft=!1,jt=new At;function Vt(t,e){Pt||function(){var t=y.Promise.resolve(void 0);Pt=function(){t.then(Bt)}}(),Ft||(Pt(),Ft=!0),jt.add(t,e)}function Bt(){for(var t;t=Nt();){try{t.h.call(t.g)}catch(t){Rt(t)}var e=Lt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ft=!1}function Ut(t,e){St.call(this),this.h=t||1,this.g=e||y,this.j=S(this.tb,this),this.l=Date.now()}function zt(t){t.ia=!1,t.U&&(t.g.clearTimeout(t.U),t.U=null)}function qt(t,e,n){if("function"==typeof t)n&&(t=S(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=S(t.handleEvent,t)}return 2147483647<Number(e)?-1:y.setTimeout(t,e||0)}function $t(t,e,n){D.call(this),this.m=null!=n?t.bind(n):t,this.j=e,this.h=null,this.i=!1,this.g=null}if(C(Ut,St),(e=Ut.prototype).ia=!1,e.U=null,e.tb=function(){if(this.ia){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.U=this.g.setTimeout(this.j,this.h-t):(this.U&&(this.g.clearTimeout(this.U),this.U=null),Tt(this,"tick"),this.ia&&(zt(this),this.start()))}},e.start=function(){this.ia=!0,this.U||(this.U=this.g.setTimeout(this.j,this.h),this.l=Date.now())},e.O=function(){Ut.Z.O.call(this),zt(this),delete this.g},$t.prototype=o(D.prototype),$t.prototype.constructor=$t,d)d($t,D);else for(var Gt in D)if("prototype"!=Gt)if(Object.defineProperties){var Ht=Object.getOwnPropertyDescriptor(D,Gt);Ht&&Object.defineProperty($t,Gt,Ht)}else $t[Gt]=D[Gt];function Kt(t){t.g=qt((function(){t.g=null,t.i&&(t.i=!1,Kt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}function Qt(t){D.call(this),this.h=t,this.g={}}$t.Z=D.prototype,$t.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Kt(this)},$t.prototype.O=function(){D.prototype.O.call(this),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},C(Qt,D);var Wt=[];function Yt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var s=mt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Xt(t){ot(t.g,(function(t,e){this.g.hasOwnProperty(e)&&bt(t)}),t),t.g={}}function Jt(){this.g=!0}function Zt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Dt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Qt.prototype.O=function(){Qt.Z.O.call(this),Xt(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jt.prototype.Ha=function(){this.g=!1},Jt.prototype.info=function(){};var te={},ee=null;function ne(){return ee=ee||new St}function re(t){O.call(this,te.Wa,t)}function ie(t){var e=ne();Tt(e,new re(e,t))}function se(t,e){O.call(this,te.STAT_EVENT,t),this.stat=e}function oe(t){var e=ne();Tt(e,new se(e,t))}function ae(t,e){O.call(this,te.Xa,t),this.size=e}function ce(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return y.setTimeout((function(){t()}),e)}te.Wa="serverreachability",C(re,O),te.STAT_EVENT="statevent",C(se,O),te.Xa="timingevent",C(ae,O);var ue={NO_ERROR:0,ub:1,Hb:2,Gb:3,Bb:4,Fb:5,Ib:6,Ta:7,TIMEOUT:8,Lb:9},le={zb:"complete",Vb:"success",Ua:"error",Ta:"abort",Nb:"ready",Ob:"readystatechange",TIMEOUT:"timeout",Jb:"incrementaldata",Mb:"progress",Cb:"downloadprogress",cc:"uploadprogress"};function he(){}function de(t){return t.h||(t.h=t.i())}function fe(){}he.prototype.h=null;var pe,me={OPEN:"a",yb:"b",Ua:"c",Kb:"d"};function ge(){O.call(this,"d")}function ye(){O.call(this,"c")}function ve(){}function be(t,e,n,r){this.l=t,this.j=e,this.m=n,this.Y=r||1,this.W=new Qt(this),this.R=xe,t=H?125:void 0,this.X=new Ut(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.M=this.G=this.aa=this.C=null,this.D=[],this.g=null,this.o=0,this.s=this.v=null,this.ea=-1,this.J=!1,this.P=0,this.N=null,this.da=this.L=this.ca=this.T=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}C(ge,O),C(ye,O),C(ve,he),ve.prototype.g=function(){return new XMLHttpRequest},ve.prototype.i=function(){return{}},pe=new ve;var xe=45e3,_e={},Ee={};function Ie(t,e,n){t.M=1,t.A=qe(je(e)),t.u=n,t.T=!0,Se(t,null)}function Se(t,e){t.G=Date.now(),ke(t),t.B=je(t.A);var n=t.B,r=t.Y;Array.isArray(r)||(r=[String(r)]),nn(n.i,"t",r),t.o=0,n=t.l.J,t.h=new we,t.g=ir(t.l,n?e:null,!t.u),0<t.P&&(t.N=new $t(S(t.Sa,t,t.g),t.P)),Yt(t.W,t.g,"readystatechange",t.qb),e=t.I?at(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ja(t.B,t.v,t.u,e)):(t.v="GET",t.g.ja(t.B,t.v,null,e)),ie(1),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.Y,t.u)}function Te(t){return!!t.g&&"GET"==t.v&&2!=t.M&&t.l.Ka}function Ce(t,e,n){for(var r,i=!0;!t.J&&t.o<n.length;){if((r=De(t,n))==Ee){4==e&&(t.s=4,oe(14),i=!1),Zt(t.j,t.m,null,"[Incomplete Response]");break}if(r==_e){t.s=4,oe(15),Zt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Zt(t.j,t.m,r,null),Oe(t,r)}Te(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,oe(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.da&&(t.da=!0,(e=t.l).g==t&&e.ea&&!e.N&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yn(e),e.N=!0,oe(11))):(Zt(t.j,t.m,n,"[Invalid Chunked Response]"),Me(t),Le(t))}function De(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?Ee:(n=Number(e.substring(n,r)),isNaN(n)?_e:(r+=1)+n>e.length?Ee:(e=e.slice(r,r+n),t.o=r+n,e))}function ke(t){t.aa=Date.now()+t.R,Ae(t,t.R)}function Ae(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=ce(S(t.ob,t),e)}function Ne(t){t.C&&(y.clearTimeout(t.C),t.C=null)}function Le(t){0==t.l.H||t.J||Zn(t.l,t)}function Me(t){Ne(t);var e=t.N;e&&"function"==typeof e.va&&e.va(),t.N=null,zt(t.X),Xt(t.W),t.g&&(e=t.g,t.g=null,e.abort(),e.va())}function Oe(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||hn(n.i,t)))if(!t.L&&hn(n.i,t)&&3==n.H){try{var r=n.Ma.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Jn(n),zn(n)}Wn(n),oe(18)}}else n.Ia=i[1],0<n.Ia-n.X&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ce(S(n.lb,n),6e3));if(1>=ln(n.i)&&n.ra){try{n.ra()}catch(t){}n.ra=void 0}}else er(n,11)}else if((t.L||n.g==t)&&Jn(n),!P(e))for(i=n.Ma.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.X=s[0],s=s[1],2==n.H)if("c"==s[0]){n.L=s[1],n.sa=s[2];var o=s[3];null!=o&&(n.ua=o,n.l.info("VER="+n.ua));var a=s[4];null!=a&&(n.Ja=a,n.l.info("SVER="+n.Ja));var c=s[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.M=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var u=t.g;if(u){var l=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(dn(h,h.h),h.h=null))}if(r.D){var d=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.Ga=d,ze(r.I,r.D,d))}}n.H=3,n.h&&n.h.Ea(),n.ea&&(n.T=Date.now()-t.G,n.l.info("Handshake RTT: "+n.T+"ms"));var f=t;if((r=n).za=rr(r,r.J?r.sa:null,r.aa),f.L){fn(r.i,f);var p=f,m=r.M;m&&p.setTimeout(m),p.C&&(Ne(p),ke(p)),r.g=f}else Qn(r);0<n.j.length&&$n(n)}else"stop"!=s[0]&&"close"!=s[0]||er(n,7);else 3==n.H&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?er(n,7):Un(n):"noop"!=s[0]&&n.h&&n.h.Da(s),n.A=0)}ie(4)}catch(t){}}function Re(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.wa&&"function"==typeof t.wa)return t.wa();if(!t.ba||"function"!=typeof t.ba){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(v(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}}(t),r=function(t){if(t.ba&&"function"==typeof t.ba)return t.ba();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(e=be.prototype).setTimeout=function(t){this.R=t},e.qb=function(t){t=t.target;var e=this.N;e&&3==Rn(t)?e.l():this.Sa(t)},e.Sa=function(t){try{if(t==this.g)t:{var e=Rn(this.g),n=this.g.La(),r=this.g.fa();if(!(3>e)&&(3!=e||H||this.g&&(this.h.h||this.g.ma()||Pn(this.g)))){this.J||4!=e||7==n||ie(8==n||0>=r?3:2),Ne(this);var i=this.g.fa();this.ea=i;e:if(Te(this)){var s=Pn(this.g);t="";var o=s.length,a=4==Rn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Me(this),Le(this);var c="";break e}this.h.i=new y.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.length=0,this.h.g+=t,this.o=0,c=this.h.g}else c=this.g.ma();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.Y,e,i),this.i){if(this.ca&&!this.L){e:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(u)){var h=u;break e}}h=null}if(!(i=h)){this.i=!1,this.s=3,oe(12),Me(this),Le(this);break t}Zt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oe(this,i)}this.T?(Ce(this,e,c),H&&this.i&&3==e&&(Yt(this.W,this.X,"tick",this.pb),this.X.start())):(Zt(this.j,this.m,c,null),Oe(this,c)),4==e&&Me(this),this.i&&!this.J&&(4==e?Zn(this.l,this):(this.i=!1,ke(this)))}else(function(t){var e={};t=(t.g&&2<=Rn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<t.length;n++)if(!P(t[n])){var r=Ot(t[n]),i=r[0];if("string"==typeof(r=r[1])){r=r.trim();var s=e[i]||[];e[i]=s,s.push(r)}}!function(t,e){for(var n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==i&&0<c.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Me(this),Le(this)}}}catch(t){}},e.pb=function(){if(this.g){var t=Rn(this.g),e=this.g.ma();this.o<e.length&&(Ne(this),Ce(this,t,e),this.i&&4!=t&&ke(this))}},e.cancel=function(){this.J=!0,Me(this)},e.ob=function(){this.C=null;var t=Date.now();0<=t-this.aa?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.M&&(ie(3),oe(17)),Me(this),this.s=2,Le(this)):Ae(this,this.aa-t)};var Pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fe(t){var e;this.g=this.s=this.j="",this.o=null,this.m=this.h="",this.l=!1,t instanceof Fe?(this.l=t.l,Ve(this,t.j),this.s=t.s,this.g=t.g,Be(this,t.o),this.h=t.h,Ue(this,rn(t.i)),this.m=t.m):t&&(e=String(t).match(Pe))?(this.l=!1,Ve(this,e[1]||"",!0),this.s=$e(e[2]||""),this.g=$e(e[3]||"",!0),Be(this,e[4]),this.h=$e(e[5]||"",!0),Ue(this,e[6]||"",!0),this.m=$e(e[7]||"")):(this.l=!1,this.i=new Je(null,this.l))}function je(t){return new Fe(t)}function Ve(t,e,n){t.j=n?$e(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.o=e}else t.o=null}function Ue(t,e,n){e instanceof Je?(t.i=e,function(t,e){e&&!t.j&&(Ze(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tn(this,e),nn(this,n,t))}),t)),t.j=e}(t.i,t.l)):(n||(e=Ge(e,Ye)),t.i=new Je(e,t.l))}function ze(t,e,n){t.i.set(e,n)}function qe(t){return ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ge(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ge(e,Ke,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ge(e,Ke,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.o)&&t.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ge(n,"/"==n.charAt(0)?We:Qe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",Ge(n,Xe)),t.join("")},Fe.prototype.resolve=function(t){var e=je(this),n=!!t.j;n?Ve(e,t.j):n=!!t.s,n?e.s=t.s:n=!!t.g,n?e.g=t.g:n=null!=t.o;var r=t.h;if(n)Be(e,t.o);else if(n=!!t.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=e.h.lastIndexOf("/");-1!=i&&(r=e.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var s=[],o=0;o<i.length;){var a=i[o++];"."==a?r&&o==i.length&&s.push(""):".."==a?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&o==i.length&&s.push("")):(s.push(a),r=!0)}r=s.join("/")}else r=i}return n?e.h=r:n=""!==t.i.toString(),n?Ue(e,rn(t.i)):n=!!t.m,n&&(e.m=t.m),e};var Ke=/[#\/\?@]/g,Qe=/[#\?:]/g,We=/[#\?]/g,Ye=/[#\?@]/g,Xe=/#/g;function Je(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ze(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tn(t,e){Ze(t),e=sn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function en(t,e){return Ze(t),e=sn(t,e),t.g.has(e)}function nn(t,e,n){tn(t,e),0<n.length&&(t.i=null,t.g.set(sn(t,e),L(n)),t.h+=n.length)}function rn(t){var e=new Je;return e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),e}function sn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function on(t,e){this.g=t,this.map=e}function an(t){this.l=t||cn,t=y.PerformanceNavigationTiming?0<(t=y.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(y.g&&y.g.Na&&y.g.Na()&&y.g.Na().hc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(e=Je.prototype).add=function(t,e){Ze(this),this.i=null,t=sn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},e.forEach=function(t,e){Ze(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},e.wa=function(){Ze(this);for(var t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},e.ba=function(t){Ze(this);var e=[];if("string"==typeof t)en(this,t)&&(e=e.concat(this.g.get(sn(this,t))));else{t=Array.from(this.g.values());for(var n=0;n<t.length;n++)e=e.concat(t[n])}return e},e.set=function(t,e){return Ze(this),this.i=null,en(this,t=sn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},e.get=function(t,e){return t&&0<(t=this.ba(t)).length?String(t[0]):e},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=Array.from(this.g.keys()),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.ba(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var cn=10;function un(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ln(t){return t.h?1:t.g?t.g.size:0}function hn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function dn(t,e){t.g?t.g.add(e):t.h=e}function fn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){for(var e=t.i,n=(t=i(t.g.values())).next();!n.done;n=t.next())e=e.concat(n.value.D);return e}return L(t.i)}function mn(){}function gn(){this.g=new mn}function yn(t,e,n){var r=n||"";try{Re(t,(function(t,n){var i=t;b(t)&&(i=Dt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function vn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function bn(t){this.l=t.ic||null,this.j=t.rb||!1}function wn(t,e){St.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=xn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}an.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(var t=i(this.g.values()),e=t.next();!e.done;e=t.next())e.value.cancel();this.g.clear()}},mn.prototype.stringify=function(t){return y.JSON.stringify(t,void 0)},mn.prototype.parse=function(t){return y.JSON.parse(t,void 0)},C(bn,he),bn.prototype.g=function(){return new wn(this.l,this.j)},bn.prototype.i=function(t){return function(){return t}}({}),C(wn,St);var xn=0;function _n(t){t.j.read().then(t.$a.bind(t)).catch(t.na.bind(t))}function En(t){t.readyState=4,t.l=null,t.j=null,t.A=null,In(t)}function In(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(e=wn.prototype).open=function(t,e){if(this.readyState!=xn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,In(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||y).fetch(new Request(this.B,e)).then(this.cb.bind(this),this.na.bind(this))},e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,En(this)),this.readyState=xn},e.cb=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.ab.bind(this),this.na.bind(this));else if(void 0!==y.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_n(this)}else t.text().then(this.bb.bind(this),this.na.bind(this))},e.$a=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?En(this):In(this),3==this.readyState&&_n(this)}},e.bb=function(t){this.g&&(this.response=this.responseText=t,En(this))},e.ab=function(t){this.g&&(this.response=t,En(this))},e.na=function(){this.g&&En(this)},e.setRequestHeader=function(t,e){this.v.append(t,e)},e.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Sn=y.JSON.parse;function Tn(t){St.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.D=!1,this.B=0,this.A=null,this.L=Cn,this.M=this.N=!1}C(Tn,St);var Cn="",Dn=/^https?$/i,kn=["POST","PUT"];function An(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Nn(t),Mn(t)}function Nn(t){t.D||(t.D=!0,Tt(t,"complete"),Tt(t,"error"))}function Ln(t){if(t.h&&void 0!==g&&(!t.C[1]||4!=Rn(t)||2!=t.fa()))if(t.v&&4==Rn(t))qt(t.Oa,0,t);else if(Tt(t,"readystatechange"),4==Rn(t)){t.h=!1;try{var e,n=t.fa();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.I).match(Pe)[1]||null;!s&&y.self&&y.self.location&&(s=y.self.location.protocol.slice(0,-1)),i=!Dn.test(s?s.toLowerCase():"")}e=i}if(e)Tt(t,"complete"),Tt(t,"success");else{t.m=6;try{var o=2<Rn(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.fa()+"]",Nn(t)}}finally{Mn(t)}}}function Mn(t,e){if(t.g){On(t);var n=t.g,r=t.C[0]?function(){}:null;t.g=null,t.C=null,e||Tt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function On(t){t.g&&t.M&&(t.g.ontimeout=null),t.A&&(y.clearTimeout(t.A),t.A=null)}function Rn(t){return t.g?t.g.readyState:0}function Pn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.L){case Cn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fn(t){var e="";return ot(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function jn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Fn(n),"string"==typeof t?(encodeURIComponent(String(e)),null!=n&&encodeURIComponent(String(n))):ze(t,e,n))}function Vn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Bn(t){this.Ja=0,this.j=[],this.l=new Jt,this.sa=this.za=this.I=this.aa=this.g=this.Ga=this.D=this.qa=this.o=this.W=this.s=null,this.ib=this.Y=0,this.gb=Vn("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.ca=!0,this.Ia=this.X=-1,this.da=this.A=this.C=0,this.eb=Vn("baseRetryDelayMs",5e3,t),this.kb=Vn("retryDelaySeedMs",1e4,t),this.hb=Vn("forwardChannelMaxRetries",2,t),this.Aa=Vn("forwardChannelRequestTimeoutMs",2e4,t),this.ya=t&&t.xmlHttpFactory||void 0,this.Ka=t&&t.useFetchStreams||!1,this.M=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.L="",this.i=new an(t&&t.concurrentRequestLimit),this.Ma=new gn,this.R=t&&t.fastHandshake||!1,this.P=t&&t.encodeInitMessageHeaders||!1,this.R&&this.P&&(this.P=!1),this.fb=t&&t.ec||!1,t&&t.Ha&&this.l.Ha(),t&&t.forceLongPolling&&(this.ca=!1),this.ea=!this.R&&this.ca&&t&&t.detectBufferingProxy||!1,this.ta=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ta=t.longPollingTimeout),this.ra=void 0,this.T=0,this.N=!1,this.pa=this.B=null}function Un(t){if(qn(t),3==t.H){var e=t.Y++,n=je(t.I);if(ze(n,"SID",t.L),ze(n,"RID",e),ze(n,"TYPE","terminate"),Hn(t,n),(e=new be(t,t.l,e)).M=2,e.A=qe(je(n)),n=!1,y.navigator&&y.navigator.sendBeacon)try{n=y.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&y.Image&&((new Image).src=e.A,n=!0),n||(e.g=ir(e.l,null),e.g.ja(e.A)),e.G=Date.now(),ke(e)}nr(t)}function zn(t){t.g&&(Yn(t),t.g.cancel(),t.g=null)}function qn(t){zn(t),t.u&&(y.clearTimeout(t.u),t.u=null),Jn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&y.clearTimeout(t.m),t.m=null)}function $n(t){un(t.i)||t.m||(t.m=!0,Vt(t.Qa,t),t.C=0)}function Gn(t,e){var n;n=e?e.m:t.Y++;var r=je(t.I);ze(r,"SID",t.L),ze(r,"RID",n),ze(r,"AID",t.X),Hn(t,r),t.o&&t.s&&jn(r,t.o,t.s),n=new be(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.D.concat(t.j)),e=Kn(t,n,1e3),n.setTimeout(Math.round(.5*t.Aa)+Math.round(.5*t.Aa*Math.random())),dn(t.i,n),Ie(n,r,e)}function Hn(t,e){t.qa&&ot(t.qa,(function(t,n){ze(e,n,t)})),t.h&&Re({},(function(t,n){ze(e,n,t)}))}function Kn(t,e,n){n=Math.min(t.j.length,n);var r=t.h?S(t.h.Ya,t.h,t):null;t:for(var i=t.j,s=-1;;){var o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var u=i[c].g,l=i[c].map;if(0>(u-=s))s=Math.max(0,i[c].g-100),a=!1;else try{yn(l,o,"req"+u+"_")}catch(t){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.j.splice(0,n),e.D=t,r}function Qn(t){t.g||t.u||(t.da=1,Vt(t.Pa,t),t.A=0)}function Wn(t){return!(t.g||t.u||3<=t.A||(t.da++,t.u=ce(S(t.Pa,t),tr(t,t.A)),t.A++,0))}function Yn(t){null!=t.B&&(y.clearTimeout(t.B),t.B=null)}function Xn(t){t.g=new be(t,t.l,"rpc",t.da),null===t.o&&(t.g.I=t.s),t.g.P=0;var e=je(t.za);ze(e,"RID","rpc"),ze(e,"SID",t.L),ze(e,"AID",t.X),ze(e,"CI",t.G?"0":"1"),!t.G&&t.ta&&ze(e,"TO",t.ta),ze(e,"TYPE","xmlhttp"),Hn(t,e),t.o&&t.s&&jn(e,t.o,t.s),t.M&&t.g.setTimeout(t.M);var n=t.g;t=t.sa,n.M=1,n.A=qe(je(e)),n.u=null,n.T=!0,Se(n,t)}function Jn(t){null!=t.v&&(y.clearTimeout(t.v),t.v=null)}function Zn(t,e){var n=null;if(t.g==e){Jn(t),Yn(t),t.g=null;var r=2}else{if(!hn(t.i,e))return;n=e.D,fn(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Tt(r=ne(),new ae(r,n,e,i)),$n(t)}else Qn(t);else if(3==(i=e.s)||0==i&&0<e.ea||!(1==r&&function(t,e){return!(ln(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.D.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.gb?0:t.hb)||(t.m=ce(S(t.Qa,t,e),tr(t,t.C)),t.C++,0)))}(t,e)||2==r&&Wn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:er(t,5);break;case 4:er(t,10);break;case 3:er(t,6);break;default:er(t,2)}}function tr(t,e){var n=t.eb+Math.floor(Math.random()*t.kb);return t.isActive()||(n*=2),n*e}function er(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=S(t.sb,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),y.location&&"http"==y.location.protocol||Ve(n,"https"),qe(n)),function(t,e){var n=new Jt;if(y.Image){var r=new Image;r.onload=T(vn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=T(vn,n,r,"TestLoadImage: error",!1,e),r.onabort=T(vn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=T(vn,n,r,"TestLoadImage: timeout",!1,e),y.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.H=0,t.h&&t.h.Ca(e),nr(t),qn(t)}function nr(t){if(t.H=0,t.pa=[],t.h){var e=pn(t.i);0==e.length&&0==t.j.length||(M(t.pa,e),M(t.pa,t.j),t.i.i.length=0,L(t.j),t.j.length=0),t.h.Ba()}}function rr(t,e,n){var r=n instanceof Fe?je(n):new Fe(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Be(r,r.o);else{var i=y.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Fe(null);r&&Ve(s,r),e&&(s.g=e),i&&Be(s,i),n&&(s.h=n),r=s}return n=t.D,e=t.Ga,n&&e&&ze(r,n,e),ze(r,"VER",t.ua),Hn(t,r),r}function ir(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ka&&!t.ya?new Tn(new bn({rb:n})):new Tn(t.ya)).Ra(t.J),e}function sr(){}function or(){if($&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function ar(t,e){St.call(this),this.g=new Bn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Fa&&(t?t["X-WebChannel-Client-Profile"]=e.Fa:t={"X-WebChannel-Client-Profile":e.Fa}),this.g.W=t,(t=e&&e.fc)&&!P(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!P(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new lr(this)}function cr(t){ge.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ur(){ye.call(this),this.status=1}function lr(t){this.g=t}function hr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function dr(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function fr(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(e=Tn.prototype).Ra=function(t){this.N=t},e.ja=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pe.g(),this.C=this.u?de(this.u):de(pe),this.g.onreadystatechange=S(this.Oa,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void An(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(var o=(s=i(r.keys())).next();!o.done;o=s.next())o=o.value,n.set(o,r.get(o))}for(r=Array.from(n.keys()).find((function(t){return"content-type"==t.toLowerCase()})),s=y.FormData&&t instanceof y.FormData,!(0<=N(kn,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r=(e=i(n)).next();!r.done;r=e.next())r=(n=i(r.value)).next().value,n=n.next().value,this.g.setRequestHeader(r,n);this.L&&(this.g.responseType=this.L),"withCredentials"in this.g&&this.g.withCredentials!==this.N&&(this.g.withCredentials=this.N);try{On(this),0<this.B&&((this.M=function(t){return $&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=S(this.xa,this)):this.A=qt(this.xa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){An(this,t)}},e.xa=function(){void 0!==g&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tt(this,"timeout"),this.abort(8))},e.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tt(this,"complete"),Tt(this,"abort"),Mn(this))},e.O=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mn(this,!0)),Tn.Z.O.call(this)},e.Oa=function(){this.s||(this.G||this.v||this.l?Ln(this):this.nb())},e.nb=function(){Ln(this)},e.isActive=function(){return!!this.g},e.fa=function(){try{return 2<Rn(this)?this.g.status:-1}catch(t){return-1}},e.ma=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},e.Za=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sn(e)}},e.La=function(){return this.m},e.Va=function(){return"string"==typeof this.j?this.j:String(this.j)},(e=Bn.prototype).ua=8,e.H=1,e.Qa=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.Y=Math.floor(1e5*Math.random()),t=this.Y++;var e,n=new be(this,this.l,t),r=this.s;if(this.W&&(r?ut(r=at(r),this.W):r=this.W),null!==this.o||this.P||(n.I=r,r=null),this.R)t:{for(var i=e=0;i<this.j.length;i++){var s=this.j[i];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.j.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Kn(this,n,e),ze(i=je(this.I),"RID",t),ze(i,"CVER",22),this.D&&ze(i,"X-HTTP-Session-Id",this.D),Hn(this,i),r&&(this.P?e="headers="+encodeURIComponent(String(Fn(r)))+"&"+e:this.o&&jn(i,this.o,r)),dn(this.i,n),this.fb&&ze(i,"TYPE","init"),this.R?(ze(i,"$req",e),ze(i,"SID","null"),n.ca=!0,Ie(n,i,null)):Ie(n,i,e),this.H=2}}else 3==this.H&&(t?Gn(this,t):0==this.j.length||un(this.i)||Gn(this))},e.Pa=function(){if(this.u=null,Xn(this),this.ea&&!(this.N||null==this.g||0>=this.T)){var t=2*this.T;this.l.info("BP detection timer enabled: "+t),this.B=ce(S(this.mb,this),t)}},e.mb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.N=!0,oe(10),zn(this),Xn(this))},e.lb=function(){null!=this.v&&(this.v=null,zn(this),Wn(this),oe(19))},e.sb=function(t){t?(this.l.info("Successfully pinged google.com"),oe(2)):(this.l.info("Failed to ping google.com"),oe(1))},e.isActive=function(){return!!this.h&&this.h.isActive(this)},(e=sr.prototype).Ea=function(){},e.Da=function(){},e.Ca=function(){},e.Ba=function(){},e.isActive=function(){return!0},e.Ya=function(){},or.prototype.g=function(t,e){return new ar(t,e)},C(ar,St),ar.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;oe(0),t.aa=e,t.qa=n||{},t.G=t.ca,t.I=rr(t,null,t.aa),$n(t)},ar.prototype.close=function(){Un(this.g)},ar.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Dt(t),t=n);e.j.push(new on(e.ib++,t)),3==e.H&&$n(e)},ar.prototype.O=function(){this.g.h=null,delete this.j,Un(this.g),delete this.g,ar.Z.O.call(this)},C(cr,ge),C(ur,ye),C(lr,sr),lr.prototype.Ea=function(){Tt(this.g,"a")},lr.prototype.Da=function(t){Tt(this.g,new cr(t))},lr.prototype.Ca=function(t){Tt(this.g,new ur(t))},lr.prototype.Ba=function(){Tt(this.g,"b")},C(hr,(function(){this.blockSize=-1})),hr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},hr.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)dr(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){dr(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){dr(this,r),i=0;break}}this.h=i,this.i+=e},hr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var pr={};function mr(t){return-128<=t&&128>t?function(t,e){var n=pr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new fr([0|t],0>t?-1:0)}(t)}(t):new fr([0|t],0>t?-1:0)}function gr(t){if(isNaN(t)||!isFinite(t))return vr;if(0>t)return Er(gr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yr;return new fr(e,0)}var yr=4294967296,vr=mr(0),br=mr(1),wr=mr(16777216);function xr(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function _r(t){return-1==t.h}function Er(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new fr(n,~t.h).add(br)}function Ir(t,e){return t.add(Er(e))}function Sr(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Tr(t,e){this.g=t,this.h=e}function Cr(t,e){if(xr(e))throw Error("division by zero");if(xr(t))return new Tr(vr,vr);if(_r(t))return e=Cr(Er(t),e),new Tr(Er(e.g),Er(e.h));if(_r(e))return e=Cr(t,Er(e)),new Tr(Er(e.g),e.h);if(30<t.g.length){if(_r(t)||_r(e))throw Error("slowDivide_ only works with positive integers.");for(var n=br,r=e;0>=r.$(t);)n=Dr(n),r=Dr(r);var i=kr(n,1),s=kr(r,1);for(r=kr(r,2),n=kr(n,2);!xr(r);){var o=s.add(r);0>=o.$(t)&&(i=i.add(n),s=o),r=kr(r,1),n=kr(n,1)}return e=Ir(t,i.S(e)),new Tr(i,e)}for(i=vr;0<=t.$(e);){for(n=Math.max(1,Math.floor(t.ga()/e.ga())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=gr(n)).S(e);_r(o)||0<o.$(t);)o=(s=gr(n-=r)).S(e);xr(s)&&(s=br),i=i.add(s),t=Ir(t,o)}return new Tr(i,t)}function Dr(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.F(r)<<1|t.F(r-1)>>>31;return new fr(n,t.h)}function kr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.F(s+n)>>>e|t.F(s+n+1)<<32-e:t.F(s+n);return new fr(i,t.h)}(e=fr.prototype).ga=function(){if(_r(this))return-Er(this).ga();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.F(n);t+=(0<=r?r:yr+r)*e,e*=yr}return t},e.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(xr(this))return"0";if(_r(this))return"-"+Er(this).toString(t);for(var e=gr(Math.pow(t,6)),n=this,r="";;){var i=Cr(n,e).g,s=((0<(n=Ir(n,i.S(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(xr(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.F=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},e.$=function(t){return _r(t=Ir(this,t))?-1:xr(t)?0:1},e.abs=function(){return _r(this)?Er(this):this},e.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.F(i))+(65535&t.F(i)),o=(s>>>16)+(this.F(i)>>>16)+(t.F(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new fr(n,-2147483648&n[n.length-1]?-1:0)},e.S=function(t){if(xr(this)||xr(t))return vr;if(_r(this))return _r(t)?Er(this).S(Er(t)):Er(Er(this).S(t));if(_r(t))return Er(this.S(Er(t)));if(0>this.$(wr)&&0>t.$(wr))return gr(this.ga()*t.ga());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.F(r)>>>16,o=65535&this.F(r),a=t.F(i)>>>16,c=65535&t.F(i);n[2*r+2*i]+=o*c,Sr(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Sr(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Sr(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Sr(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new fr(n,0)},e.jb=function(t){return Cr(this,t).h},e.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.F(r)&t.F(r);return new fr(n,this.h&t.h)},e.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.F(r)|t.F(r);return new fr(n,this.h|t.h)},e.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.F(r)^t.F(r);return new fr(n,this.h^t.h)},or.prototype.createWebChannel=or.prototype.g,ar.prototype.send=ar.prototype.u,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,le.COMPLETE="complete",fe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",St.prototype.listen=St.prototype.P,Tn.prototype.listenOnce=Tn.prototype.R,Tn.prototype.getLastError=Tn.prototype.Va,Tn.prototype.getLastErrorCode=Tn.prototype.La,Tn.prototype.getStatus=Tn.prototype.fa,Tn.prototype.getResponseJson=Tn.prototype.Za,Tn.prototype.getResponseText=Tn.prototype.ma,Tn.prototype.send=Tn.prototype.ja,Tn.prototype.setWithCredentials=Tn.prototype.Ra,hr.prototype.digest=hr.prototype.l,hr.prototype.reset=hr.prototype.reset,hr.prototype.update=hr.prototype.j,fr.prototype.add=fr.prototype.add,fr.prototype.multiply=fr.prototype.S,fr.prototype.modulo=fr.prototype.jb,fr.prototype.compare=fr.prototype.$,fr.prototype.toNumber=fr.prototype.ga,fr.prototype.toString=fr.prototype.toString,fr.prototype.getBits=fr.prototype.F,fr.fromNumber=gr,fr.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return Er(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=gr(Math.pow(n,8)),i=vr,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=gr(Math.pow(n,o)),i=i.S(o).add(gr(a))):i=(i=i.S(r)).add(gr(a))}return i},t.exports.createWebChannelTransport=function(){return new or},t.exports.getStatEventTarget=function(){return ne()},t.exports.ErrorCode=ue,t.exports.EventType=le,t.exports.Event=te,t.exports.Stat={Ab:0,Db:1,Eb:2,Xb:3,bc:4,Zb:5,$b:6,Yb:7,Wb:8,ac:9,PROXY:10,NOPROXY:11,Ub:12,Qb:13,Rb:14,Pb:15,Sb:16,Tb:17,wb:18,vb:19,xb:20},t.exports.FetchXmlHttpFactory=bn,t.exports.WebChannel=fe,t.exports.XhrIo=Tn,t.exports.Md5=hr,t.exports.Integer=fr}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},1626:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".coonfi {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 682px;\n\theight: 800px;\n\tbackground-color: #25245e;\n\tpadding: 20px;\n\tborder-radius: 10px;\n\tposition: absolute;\n\ttop: 52%;\n\ttransform: translateY(-50%);\n\tleft: 32%;\n}\n.back {\n\tposition: absolute;\n\ttop: 6%; /* Distancia desde arriba */\n\tleft: 6%; /* Distancia desde la izquierda */\n}\n\n.back button {\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: rgb(255, 255, 255);\n}\n.back button:active {\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: #171640; /* Cambia el color del texto cuando se presiona */\n}\n\n.done button {\n\tbackground-color: rgb(255, 255, 255);\n\tborder-color: transparent;\n\twidth: 100px;\n\theight: 30px;\n\tborder-radius: 30px;\n\tfont-family: Satoshi;\n\tfont-size: 12px;\n}\n\n.done button:active {\n\tcolor: #25245e; /* Cambia el color del texto cuando se presiona */\n\tbackground-color: #7796f1; /* Cambia el color de fondo cuando se presiona */\n}\n\n.exit button {\n\tbackground-color: rgb(255, 255, 255);\n\tborder-color: transparent;\n\twidth: 100px;\n\theight: 30px;\n\tmargin-top: 20px;\n\tborder-radius: 30px;\n\tfont-family: Satoshi;\n\tfont-size: 12px;\n}\n\n.exit button:active {\n\tcolor: #25245e; /* Cambia el color del texto cuando se presiona */\n\tbackground-color: #7796f1; /* Cambia el color de fondo cuando se presiona */\n}\n\ncustom-coforms {\n\tmargin-top: 28%;\n\tmargin-bottom: 5%;\n}\n@media (max-width: 800px) {\n\t.coonfi {\n\t\twidth: 632px;\n\t\tleft: 5%;\n\t\ttop: 55%;\n\t}\n}\n@media (max-width: 400px) {\n\t.coonfi {\n\t\twidth: 325px;\n\t\theight: 650px;\n\t\tleft: 5%;\n\t\ttop: 55%;\n\t}\n}\n",""]);const a=o},6008:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box-Forms {\n\twidth: 100%;\n\theight: 400px;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-top: 20px;\n}\n.Forms {\n\twidth: 350px;\n\theight: 40px;\n\tmargin: 10px;\n\tbackground-color: #393879;\n\tborder-color: transparent;\n\tborder-radius: 5px;\n\tcolor: #fff;\n\tfont-size: 18px;\n}\n\n::placeholder {\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 18px;\n\tborder-color: transparent;\n}\n\n@media (max-width: 400px) {\n\t.Forms {\n\t\twidth: 300px;\n\t}\n}\n",""]);const a=o},5058:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".container {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n}\n\nimg {\n\tposition: absolute;\n\ttop: 18%;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\tmargin-top: 20px; /* Agrega un espacio entre la imagen y los dems elementos */\n\twidth: 100px;\n\theight: 100px;\n\tborder-radius: 50%;\n\tbackground: lightgray 50% / cover no-repeat;\n\tbackground-size: cover;\n}\n\n.top {\n\ttext-align: center;\n\tcolor: #fff;\n}\n\n.top h1 {\n\tposition: absolute;\n\ttop: 29%;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\tfont-family: Satoshi;\n\tfont-size: 20px;\n\tfont-weight: 500;\n\tline-height: 27px;\n}\n\n.top h2 {\n\tposition: absolute;\n\ttop: 35%;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\tmargin-top: -15px;\n\tcolor: #7796f1;\n\tfont-size: 14px;\n\tfont-weight: 500;\n\tline-height: 18.9px;\n}\n\n@media (max-width: 400px) {\n\timg {\n\t\ttop: 12%;\n\t}\n}\n\n@media (max-width: 400px) {\n\t.top h1 {\n\t\ttop: 25%;\n\t}\n}\n\n@media (max-width: 400px) {\n\t.top h2 {\n\t\ttop: 32%;\n\t}\n}\n",""]);const a=o},6140:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box-head {\n\tdisplay: flex;\n\tposition: absolute;\n\twidth: 100%;\n\ttop: 3%;\n\tleft: 3%;\n}\n.box-text {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-left: 0.5%;\n}\n\n.Bar-text {\n\twidth: 190px;\n\theight: 30px;\n\tbackground-color: #393879;\n\tborder-radius: 5px;\n\tfont-family: Satoshi;\n\tborder: none;\n}\n::placeholder {\n\tcolor: #171640;\n\tfont-family: Satoshi;\n\tfont-size: 16px;\n}\n.box-Buttons {\n\tposition: absolute;\n\tleft: 65%;\n\tdisplay: flex;\n\ttop: 25%;\n}\n@media (max-width: 800px) {\n\t.box-text {\n\t\tdisplay: none;\n\t}\n}\n\nbutton {\n\tbackground-color: transparent;\n\tborder: none;\n}\n.box-home {\n\tbackground-color: #d9d9d9;\n\tborder-radius: 20px;\n\theight: 30px;\n\twidth: 80px;\n\tdisplay: flex;\n\talign-items: center;\n}\np {\n\tmargin: 0;\n}\n.bxs-home {\n\tcolor: #3f59a6;\n\tfont-size: 20px;\n}\n.bxs-chat {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n.bxs-bell {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n@media (max-width: 800px) {\n\t.box-Buttons {\n\t\tposition: absolute;\n\t\tleft: 20%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n\t.bxs-chat {\n\t\tmargin-left: 20px;\n\t}\n\t.bxs-bell {\n\t\tmargin-left: 20px;\n\t}\n}\n\n@media (max-width: 400px) {\n\t.box-Buttons {\n\t\tdisplay: none;\n\t}\n}\n.box-user {\n\tposition: absolute;\n\tleft: 78%;\n\tdisplay: flex;\n\ttop: 25%;\n\tbackground-color: #25245e;\n\tborder-radius: 20px;\n\twidth: 120px;\n\theight: 30px;\n\talign-items: center;\n\tjustify-content: center;\n}\n@media (max-width: 800px) {\n\t.box-user {\n\t\tposition: absolute;\n\t\tleft: 55%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n@media (max-width: 400px) {\n\t.box-user {\n\t\tposition: absolute;\n\t\tleft: 30%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n.box-menu {\n\tposition: absolute;\n\tleft: 90%;\n\tdisplay: flex;\n\ttop: 25%;\n}\n.bxs-cog {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n@media (max-width: 800px) {\n\t.bxs-cog {\n\t\tposition: absolute;\n\t\tleft: 85%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n@media (max-width: 400px) {\n\t.bxs-cog {\n\t\tposition: absolute;\n\t\tleft: 80%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n.perfil {\n\tborder-radius: 20px;\n\twidth: 25px;\n\theight: 25px;\n\tmargin-right: 5px;\n}\n.name {\n\tcolor: #7796f1;\n}\n",""]);const a=o},677:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".title2 {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between; /* Alinea los elementos al inicio y al final */\n\talign-items: center;\n\tmargin-top: 8%;\n\tmargin-bottom: 9%;\n\tmargin-left: 25%;\n\twidth: 1000px;\n\theight: auto;\n\tbackground-color: #25245e; /* Color de fondo del cuadro */\n\tpadding: 20px; /* Espaciado interno del cuadro */\n\tborder-radius: 10px; /* Borde redondeado del cuadro */\n}\n\n@media (max-width: 800px) {\n\t.title2 {\n\t\ttop: 80px;\n\t\tmargin-left: 8%;\n\t\twidth: 100%;\n\t\tmax-width: 640px;\n\t\theight: 2240px;\n\t\tpadding: 20px 10px;\n\t\tposition: relative;\n\t}\n\n\t.title2 h1 {\n\t\ttext-align: center;\n\t\tfont-size: 20px;\n\t}\n\n\t.go {\n\t\talign-self: flex-end;\n\t\talign-self: center; /* Centra el botn verticalmente */\n\t}\n}\n\n@media (max-width: 400px) {\n\t.title2 {\n\t\tdisplay: none;\n\t}\n\n\t.title2 h1 {\n\t\tfont-size: 20px;\n\t\tmargin-bottom: 20px; /* Espaciado inferior entre el ttulo y el botn */\n\t}\n\n\t.go {\n\t\talign-self: center; /* Centra el botn verticalmente */\n\t}\n}\n.title2 h1 {\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 40px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n\tmargin-bottom: 1080px; /* Espaciado inferior entre el ttulo y el botn */\n}\n\n.go button {\n\tbackground-color: rgb(255, 255, 255);\n\tborder-color: transparent;\n\twidth: 100px;\n\theight: 30px;\n\tborder-radius: 30px;\n\tfont-family: Satoshi;\n\tfont-size: 12px;\n}\n\n.go button:active {\n\tcolor: #25245e; /* Cambia el color del texto cuando se presiona */\n\tbackground-color: #7796f1; /* Cambia el color de fondo cuando se presiona */\n}\n",""]);const a=o},614:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".infoFollo {\n\tdisplay: flex;\n\theight: 60px;\n\twidth: 250px;\n\tjustify-content: center;\n\tmargin: 10px;\n\tposition: sticky;\n\ttop: auto;\n\tmargin-right: 10px;\n}\n@media (max-width: 800px) {\n\t.infoFollo {\n\t\tdisplay: flex;\n\t\theight: 60px;\n\t\twidth: 250px;\n\t\tjustify-content: center;\n\t\tmargin: 10px;\n\t\tposition: sticky;\n\t\tmargin-right: 10px;\n\t}\n}\n\n@media (max-width: 400px) {\n\t.infoFollo {\n\t\tdisplay: flex;\n\t\theight: 40px;\n\t\twidth: 250px;\n\t\tjustify-content: center;\n\t\tmargin: 10px;\n\t\tposition: sticky;\n\t\tmargin-right: 1px;\n\t}\n}\n.ImgUsuario {\n\theight: 60px;\n\twidth: 60px;\n}\n.imagen-usuario {\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 100px;\n}\n.names {\n\theight: 60px;\n\twidth: 130px;\n}\n.ImgUsuario {\n\tdisplay: flex;\n}\n\n.box-button {\n\theight: 60px;\n\twidth: 65px;\n}\n.names p {\n\tmargin: 7px;\n}\n\n.name-follower {\n\tfont-family: 'Satoshi';\n\tfont-style: normal;\n\tfont-weight: 500;\n\tfont-size: 16px;\n\tline-height: 22px;\n\n\tcolor: #ffffff;\n}\n.username-follower {\n\tfont-family: 'Satoshi';\n\tfont-style: normal;\n\tfont-weight: 500;\n\tfont-size: 14px;\n\tline-height: 19px;\n\n\tcolor: #7796f1;\n}\n",""]);const a=o},1744:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".componente {\n\theight: 340px;\n}\n.post {\n\theight: 275px;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n.info {\n\tdisplay: flex;\n\twidth: 150px;\n\theight: 33px;\n}\np {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n.imagen-post {\n\theight: 250px;\n\twidth: 200px;\n\tborder-radius: 8px;\n\tborder: 1px solid #000;\n\tbox-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);\n\tbackground-size: cover;\n}\n.imagen-usuario {\n\twidth: 30px;\n\theight: 30px;\n\tborder-radius: 50%;\n\tmargin-right: 15px;\n\tmargin-bottom: 10px;\n\tmargin-left: 10px;\n}\n.info p {\n\tfont-family: 'Satoshi';\n\tfont-style: normal;\n\tfont-weight: 500;\n\tfont-size: 14px;\n\tline-height: 19px;\n\n\tcolor: #ffffff;\n}\n\n.box-like {\n\twidth: 100%;\n\theight: 25px;\n}\ncustom-like {\n\tmargin-left: 20px;\n}\n\n/* Estilo para el fondo borroso cuando el popup est abierto */\n.body.popup-open {\n\toverflow: hidden; /* Evitar el desplazamiento de la pgina */\n}\n\nbody.popup-open::after {\n\tcontent: '';\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5); /* Fondo negro semitransparente */\n\tz-index: 9998; /* Colocar detrs del popup */\n}\n\n/* Estilo para el popup */\n.popup {\n\tposition: fixed;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tz-index: 9999;\n\twidth: 800px;\n\theight: 800px;\n\tflex-shrink: 0;\n\tborder-radius: 20px;\n\tbackground: #25245e;\n\tpadding: 20px;\n\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n/* Estilo para el contenido del popup */\n.popup-content {\n\ttext-align: center;\n}\n\n/* Estilo para la imagen dentro del popup */\n.popup-image {\n\tposition: absolute;\n\tleft: 20px;\n\tbackground-size: cover;\n\tmax-width: 100%;\n\theight: 790px;\n\twidth: 700px;\n\tborder-radius: 20px;\n\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n/* Estilo para el botn de cerrar el popup */\n.close-popup {\n\tposition: absolute;\n\ttop: 20px;\n\tright: 20px;\n\tcursor: pointer;\n\tfont-size: 30px;\n\tcolor: #fff;\n}\n",""]);const a=o},6778:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".bxs-like {\n\tfont-size: 25px;\n\tcolor: white;\n}\nbutton {\n\n\tbackground-color: transparent;\n\tborder: none;\n}\n\nbutton:active .bxs-like {\n\tcolor: rgb(255, 0, 0);\n}\n\n",""]);const a=o},9834:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box-followers {\n\tposition: absolute;\n\twidth: 328px;\n\theight: 340px;\n\n\tbackground: #25245e;\n\tborder-radius: 20px;\n}\n.Who h2 {\n\tposition: absolute;\n\twidth: 146px;\n\theight: 30px;\n\tleft: 20px;\n\ttop: 15px;\n\tmargin: 0px;\n\tfont-family: 'Satoshi';\n\tfont-style: normal;\n\tfont-weight: 500;\n\tfont-size: 16px;\n\tline-height: 22px;\n\tcolor: #ffffff;\n}\n.Show button {\n\t/* Show more */\n\n\tposition: absolute;\n\twidth: 90px;\n\theight: 30px;\n\tleft: 20px;\n\ttop: 290px;\n\tmargin: 0px;\n\tfont-family: 'Satoshi';\n\tfont-size: 12px;\n\tline-height: 14px;\n\n\tcolor: #7796f1;\n}\n\n.Show button {\n\tbackground-color: #25245e; /* Color de fondo original */\n\tborder: none;\n\tborder-radius: 5px;\n\ttransition: background-color 0.3s; /* Agrega una transicin para suavizar el cambio de color */\n}\n\n.Show button:active {\n\tcolor: #25245e; /* Cambia el color del texto cuando se presiona */\n\tbackground-color: #7796f1; /* Cambia el color de fondo cuando se presiona el botn */\n}\n",""]);const a=o},717:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"\n.infoFollo{\n    display: flex;\n    height: 60px;\n    width: 250px;\n    justify-content: center;\n    margin: 10px;\n    position: sticky;\n    top: auto;\n    margin-right: 10px;\n}\n\n.ImgUsuario{\n    height: 60px;\n    width: 60px;\n}\n.imagen-usuario{\n    width: 50px;\n\theight: 50px;\n\tborder-radius: 100px;\n}\n.names{\n    height: 60px;\n    width: 130px;\n}\n.ImgUsuario{\n    display: flex;\n}\n\n.box-button{\n    height: 60px;\n    width:65px;\n}\n.names p{\n    margin: 7px;\n}\n\n.name-follower{\n    font-family: 'Satoshi';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 22px;\n    \n    \n    color: #FFFFFF;\n}\n.username-follower{\n\n\n    font-family: 'Satoshi';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 19px;\n\n    color: #7796F1;\n\n\n}\n\n",""]);const a=o},6497:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"#seguir {\n\tbackground-color: rgb(255, 255, 255);\n\tmargin-right: 15px;\n\tborder-color: transparent;\n\twidth: 85px;\n\theight: 30px;\n\tborder-radius: 30px;\n\n    font-family: Satoshi;\n\n\tfont-size: 12px;\n\n}\n\n.deshabilitar {\n\tbackground-color: #171640 !important ;\n\tcolor: rgb(255, 255, 255);\n}\n\n.habilitar {\n\tbackground-color: rgb(255, 255, 255) !important ;\n\tcolor: black;\n}",""]);const a=o},7562:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box-trending {\n\tposition: absolute;\n\twidth: 337px;\n\theight: 350px;\n\tflex-shrink: 0;\n\tbackground: #25245e;\n\tborder-radius: 20px;\n}\n.now h2 {\n\tposition: absolute;\n\twidth: 155px;\n\theight: 19px;\n\tleft: 20px;\n\ttop: 56px;\n\tmargin: 0px;\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 14px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n}\n.Show button {\n\tposition: absolute;\n\twidth: 90px;\n\theight: 30px;\n\tleft: 20px;\n\ttop: 300px;\n\tmargin: 0px;\n\tfont-family: 'Satoshi';\n\tfont-size: 12px;\n\tline-height: 14px;\n\n\tcolor: #7796f1;\n}\n\n.Show button {\n\tbackground-color: #25245e; /* Color de fondo original */\n\tborder: none;\n\tborder-radius: 5px;\n\ttransition: background-color 0.3s; /* Agrega una transicin para suavizar el cambio de color */\n}\n\n.Show button:active {\n\tcolor: #25245e; /* Cambia el color del texto cuando se presiona */\n\tbackground-color: #7796f1; /* Cambia el color de fondo cuando se presiona el botn */\n}\n",""]);const a=o},243:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".Trendss {\n\tdisplay: flex;\n}\n\n.Tnames {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.Tnames h2 {\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 16px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n\tmargin: 0;\n}\n\n.number-post {\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 12px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n\tmargin: 0;\n}\n",""]);const a=o},2036:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box {\n\twidth: 110px;\n\theight: 31px;\n}\n\n.box .button {\n\tall: unset;\n\tbox-sizing: border-box;\n\tposition: relative;\n\twidth: 112px;\n\theight: 31px;\n\ttop: 81px;\n\tleft: 100px;\n}\n\n.box .overlap-group {\n\tposition: relative;\n\twidth: 110px;\n\theight: 31px;\n\tborder-radius: 40px;\n}\n\n.box .text-wrapper {\n\tposition: absolute;\n\ttop: 6px;\n\tleft: 38px;\n\tfont-family: 'Satoshi-Medium', Helvetica;\n\tfont-weight: 500;\n\tcolor: #7796f1;\n\tfont-size: 13px;\n\tletter-spacing: 0;\n\tline-height: normal;\n}\n\n.box .rectangle {\n\twidth: 110px;\n\theight: 31px;\n\tborder-radius: 40px;\n\tborder: 1px solid;\n\tborder-color: #393879;\n}\n\n/*hover*/\n\n.box .rectangle {\n\twidth: 110px;\n\theight: 31px;\n\tborder-radius: 40px;\n\tborder: 1px solid;\n\tborder-color: #393879;\n\ttransition: background-color 0.3s; /* Agrega transicin para suavizar el cambio de color */\n}\n\n.box .rectangle:active {\n\tbackground-color: #7796f1; /* Cambia el color cuando se presiona el botn */\n}\n",""]);const a=o},800:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box {\n\twidth: 110px;\n\theight: 31px;\n}\n\n.box .button {\n\tall: unset;\n\tbox-sizing: border-box;\n\tposition: relative;\n\twidth: 112px;\n\theight: 31px;\n\ttop: 50px;\n\tleft: 220px;\n}\n\n.box .overlap-group {\n\tposition: relative;\n\twidth: 110px;\n\theight: 31px;\n\tborder-radius: 40px;\n}\n\n.box .text-wrapper {\n\tposition: absolute;\n\ttop: 6px;\n\tleft: 38px;\n\tfont-family: 'Satoshi-Medium', Helvetica;\n\tfont-weight: 500;\n\tcolor: #7796f1;\n\tfont-size: 13px;\n\tletter-spacing: 0;\n\tline-height: normal;\n}\n\n.box .rectangle {\n\twidth: 110px;\n\theight: 31px;\n\tborder-radius: 40px;\n\tborder: 1px solid;\n\tborder-color: #393879;\n}\n\n/*hover*/\n\n.box .rectangle {\n\twidth: 110px;\n\theight: 31px;\n\tborder-radius: 40px;\n\tborder: 1px solid;\n\tborder-color: #393879;\n\ttransition: background-color 0.3s; /* Agrega transicin para suavizar el cambio de color */\n}\n\n.box .rectangle:active {\n\tbackground-color: #7796f1; /* Cambia el color cuando se presiona el botn */\n}\n",""]);const a=o},5752:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".welBar {\n\twidth: 100%;\n\theight: 120px;\n\tflex-shrink: 0;\n\tborder-radius: 20px;\n\tbackground: #25245e;\n}\n\n.ImgUser img {\n\twidth: 60px;\n\theight: 60px;\n\tflex-shrink: 0;\n\tborder-radius: 60px;\n\tposition: absolute;\n\ttop: 11px;\n\tleft: 30px;\n}\n\n.text {\n\tposition: absolute;\n\ttop: 19px;\n\tleft: 100px;\n\tborder-radius: 40px;\n\tbox-sizing: border-box;\n\twidth: 560px;\n\theight: 45px;\n\tflex-shrink: 0;\n\tborder-radius: 5px;\n\tbackground: #393879;\n\tborder: transparent;\n\tfont-size: 18px;\n\tcolor: #7796F1;\n}\n\n\n::placeholder {\n\tcolor: #7796F1;\n    font-family: Satoshi;\n    font-size: 18px;\n    border-color: transparent; \n   \tpadding: 5px;\n}\n\n.welBar {\n\tdisplay: flexbox;\n\tflex-direction: row;\n}\n",""]);const a=o},4268:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box-head {\n\tdisplay: flex;\n\tposition: absolute;\n\twidth: 100%;\n\ttop: 3%;\n\tleft: 3%;\n}\n.box-text {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-left: 0.5%;\n}\n\n.Bar-text {\n\twidth: 190px;\n\theight: 30px;\n\tbackground-color: #393879;\n\tborder-radius: 5px;\n\tfont-family: Satoshi;\n\tborder: none;\n}\n::placeholder {\n\tcolor: #171640;\n\tfont-family: Satoshi;\n\tfont-size: 16px;\n}\n.box-Buttons {\n\tposition: absolute;\n\tleft: 65%;\n\tdisplay: flex;\n\ttop: 25%;\n}\n@media (max-width: 800px) {\n\t.box-text {\n\t\tdisplay: none;\n\t}\n}\n\nbutton {\n\tbackground-color: transparent;\n\tborder: none;\n}\n.box-home {\n\tbackground-color: #d9d9d9;\n\tborder-radius: 20px;\n\theight: 30px;\n\twidth: 80px;\n\tdisplay: flex;\n\talign-items: center;\n}\np {\n\tmargin: 0;\n}\n.bxs-home {\n\tcolor: #3f59a6;\n\tfont-size: 20px;\n}\n.bxs-chat {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n.bxs-bell {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n@media (max-width: 800px) {\n\t.box-Buttons {\n\t\tposition: absolute;\n\t\tleft: 20%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n\t.bxs-chat {\n\t\tmargin-left: 20px;\n\t}\n\t.bxs-bell {\n\t\tmargin-left: 20px;\n\t}\n}\n\n@media (max-width: 400px) {\n\t.box-Buttons {\n\t\tdisplay: none;\n\t}\n}\n.box-user {\n\tposition: absolute;\n\tleft: 78%;\n\tdisplay: flex;\n\ttop: 25%;\n\tbackground-color: #25245e;\n\tborder-radius: 20px;\n\twidth: 120px;\n\theight: 30px;\n\talign-items: center;\n\tjustify-content: center;\n}\n@media (max-width: 800px) {\n\t.box-user {\n\t\tposition: absolute;\n\t\tleft: 55%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n@media (max-width: 400px) {\n\t.box-user {\n\t\tposition: absolute;\n\t\tleft: 30%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n.box-menu {\n\tposition: absolute;\n\tleft: 90%;\n\tdisplay: flex;\n\ttop: 25%;\n}\n.bxs-cog {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n@media (max-width: 800px) {\n\t.bxs-cog {\n\t\tposition: absolute;\n\t\tleft: 85%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n@media (max-width: 400px) {\n\t.bxs-cog {\n\t\tposition: absolute;\n\t\tleft: 1%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n.perfil {\n\tborder-radius: 20px;\n\twidth: 25px;\n\theight: 25px;\n\tmargin-right: 5px;\n}\n.name {\n\tcolor: #7796f1;\n}\n",""]);const a=o},2618:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"\n.box-nav{\n    position: fixed;\n    width: 100%;\n    top: 100%;\n    z-index: 1;\n\n}\n.box-buttoms{\n    \n    justify-content: center;\n    display: flex;\n    width: 100%;\n    \n    position: absolute;\n    bottom: 0;\n\n    border-radius: 20px 20px 0 0;\n}\nbutton{\n   width: 100%;\n   height: 80px;\n\n}\n.home{\n    width: 20%;\n}\n.search{\n    width: 20%;\n}\n.photo{\n    width: 20%;\n}\n.followers{\n    width: 20%;\n}\n.user{\n    width: 20%;\n}\n.Box-boton1{\n    background-color: #25245E;\n    color: #fff;\n    border: none;\n    border-radius: 20px 0 0 0;\n}\n.Box-boton1:active {\n    background-color: #1E1D48; \n}\n.Box-boton2{\n    background-color: #25245E;\n    color: #fff;\n    border: none;\n}\n.Box-boton2:active {\n    background-color: #1E1D48; \n}\n.Box-boton3{\n    background-color: #25245E;\n    color: #fff;\n    border: none;\n}\n.Box-boton3:active {\n    background-color: #1E1D48; \n}\n.Box-boton4{\n    background-color: #25245E;\n    color: #fff;\n    border: none;\n}\n.Box-boton4:active {\n    background-color: #1E1D48; \n}\n.Box-boton5{\n    background-color: #25245E;\n    color: #fff;\n    border: none;\n    border-radius: 0 20px 0 0;\n}\n.Box-boton5:active {\n    background-color: #1E1D48; \n}\n\n",""]);const a=o},4986:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"/* @media (max-width: 768px) {\n\tsection {\n\t\twidth: 100%;\n\t\theight: auto;\n\t\tborder-radius: 0;\n\t\tmargin: 0;\n\t\tposition: relative;\n\t}\n} */\n\n@media (max-width: 800px) {\n\tsection {\n\t\tdisplay: none;\n\t}\n}\n\nsection {\n\tbox-sizing: border-box;\n\tposition: absolute;\n\twidth: 328px;\n\theight: 500px;\n\ttop: 0;\n\tleft: 0;\n\tbackground: #25245e;\n\tborder-radius: 20px;\n\toutline: 0;\n}\n\nimg {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 61px 0 0 114px;\n\twidth: 100px;\n\theight: 100px;\n\tflex-shrink: 0;\n\tborder-radius: 100px;\n\tbackground: lightgray 50% / cover no-repeat;\n\tbackground-size: cover;\n\tz-index: 8;\n}\n\n.top h1 {\n\tdisplay: block;\n\tposition: relative;\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 20px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: 27px;\n\ttext-align: center;\n\twhite-space: nowrap;\n\tz-index: 2;\n}\n\n.top h2 {\n\tdisplay: block;\n\tposition: relative;\n\theight: 19px;\n\tmargin: 0 0 0 125px;\n\tmargin-top: -15px;\n\tcolor: #7796f1;\n\t\t\n\tfont-size: 14px;\n\tfont-weight: 500;\n\tline-height: 18.9px;\n\twhite-space: nowrap;\n\tz-index: 1;\n}\n\n.following h1 {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tjustify-content: flex-start;\n\tposition: absolute;\n\theight: 27px;\n\ttop: 290px;\n\tleft: 61px;\n\tcolor: #ffffff;\n\tfont-family: Satoshi;\n\tfont-size: 20px;\n\tfont-weight: 500;\n\tline-height: 27px;\n\ttext-align: left;\n\twhite-space: nowrap;\n\tz-index: 3;\n}\n\n.following h2 {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tjustify-content: flex-start;\n\tposition: absolute;\n\theight: 22px;\n\ttop: 321px;\n\tleft: 43px;\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 16px;\n\tfont-weight: 500;\n\tline-height: 21.6px;\n\ttext-align: left;\n\twhite-space: nowrap;\n\tz-index: 5;\n}\n\n.follower h1 {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tjustify-content: flex-start;\n\tposition: absolute;\n\theight: 27px;\n\ttop: 290px;\n\tleft: 226px;\n\tcolor: #ffffff;\n\tfont-family: Satoshi;\n\tfont-size: 20px;\n\tfont-weight: 500;\n\tline-height: 27px;\n\ttext-align: left;\n\twhite-space: nowrap;\n\tz-index: 4;\n}\n\n.follower h2 {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tjustify-content: flex-start;\n\tposition: absolute;\n\theight: 22px;\n\ttop: 321px;\n\tleft: 218px;\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 16px;\n\tfont-weight: 500;\n\tline-height: 21.6px;\n\ttext-align: left;\n\twhite-space: nowrap;\n\tz-index: 7;\n}\n\n.myProfile {\n\tdisplay: block;\n\tposition: relative;\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 12px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: 16px;\n\ttext-align: center;\n\twhite-space: nowrap;\n\tz-index: 6;\n\tmargin-top: 454px;\n\tmargin-left: 100px;\n\twidth: 110px;\n\tbackground-color: #25245e; /* Color de fondo original */\n\tpadding: 5px 0px 5px 5px;\n\tborder-radius: 5px;\n\ttransition: background-color 0.3s, color 0.3s; /* Agrega una transicin para suavizar el cambio de color */\n}\n\n.myProfile:active {\n\tcolor: #25245e; /* Cambia el color del texto cuando se presiona */\n\tbackground-color: #7796f1; /* Cambia el color de fondo cuando se presiona */\n}\n",""]);const a=o},8765:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"section {\n\twidth: 500px;\n\theight: 700px;\n\tbackground-color: #25245e;\n\tposition: relative;\n\tleft: 30%;\n\ttop: 10%;\n\tborder-radius: 20px;\n}\n.box-LogUp {\n\twidth: 100%;\n\theight: 100px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: end;\n}\nh1 {\n\tmargin: 0;\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 30px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n}\n\n.names h1 {\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 18px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n\tleft: 50px;\n}\n\n@media (max-width: 800px) {\n    section{\n        left: 28%;\n        top: 10%;\n    } \n}\n\n@media (max-width: 400px) {\n    section{\n        width: 350px;\n        height: 650px;\n        left: 5%;\n        top: 10%;\n    } \n}",""]);const a=o},1293:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"section {\n\twidth: 100%;\n\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n}\n.Button-Continue {\n\tbackground-color: #d9d9d9;\n\twidth: 160px;\n\theight: 45px;\n\tborder-radius: 25px;\n\tmargin-top: 10px;\n\tfont-size: 20px;\n\tfont-family: Satoshi;\n\tborder: transparent;\n}\n.Button-Continue:active {\n\tcolor: #d9d9d9;\n\tbackground-color: #171640; /* Cambia el color de fondo cuando se presiona el botn */\n}\n.Box-SingIn {\n\tdisplay: flex;\n\tcolor: #7796f1;\n\tfont-size: 18px;\n\tfont-family: Satoshi;\n}\n.Button-SingIn {\n\tbackground-color: transparent;\n\tborder: transparent;\n\tfont-size: 18px;\n\tcolor: #ffffff;\n}\n\n.Button-SingIn:active {\n\tcolor: #171640;\n}\n",""]);const a=o},9451:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box-Forms {\n\twidth: 100%;\n\theight: 400px;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tflex-shrink: 0;\n\tflex-direction: column;\n\tmargin-left: 14%;\n\tmargin-top: 10%;\n}\n.Forms {\n\twidth: 350px;\n\theight: 40px;\n\tbackground-color: #393879;\n\tborder-color: transparent;\n\tborder-radius: 5px;\n\tcolor: #fff;\n\tfont-size: 18px;\n}\n\n::placeholder {\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 18px;\n}\n\n.box-Forms h1 {\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 18px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n\tleft: 50px;\n}\n\n.box-Forms h1 {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-shrink: 0;\n\talign-items: left;\n\tjustify-content: left;\n}\n\n@media (max-width: 400px) {\n\t.box-Forms {\n\t\tmargin-left: 15px;\n\t\tmargin-top: 10%;\n\t}\n\n\t.box-Forms h1 {\n\t\tleft: 10px;\n\t}\n\n\t.Forms {\n\t\twidth: 310px;\n\t}\n}\n",""]);const a=o},5619:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"section {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n}\n.box-img {\n\twidth: 45vw;\n\theight: 100vh;\n}\n\nimg {\n\twidth: 100%;\n\theight: 100%;\n}\n@media (max-width: 800px) {\n\t.box-img {\n\t\tdisplay: none;\n\t}\n}\n\n@media (max-width: 400px) {\n\tcustom-lbackforms {\n\t\tmargin-left: 15px;\n\t\tmargin-top: 10%;\n\t}\n\n\tcustom-lbackforms {\n\t\tleft: 10px;\n\t}\n\n\tcustom-lbackforms {\n\t\theight: 30px;\n\t}\n}\n",""]);const a=o},8110:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"\nsection{\n    width: 500px;\n    height: 700px;\n    background-color: #25245E;\n    position: relative;\n    left: 30%;\n    top: 10%;\n    border-radius: 20px;\n    \n}     \n.box-signUp{\n    width: 100%;\n    height: 100px;\n    display: flex;\n    justify-content: center;\n    align-items: end;\n}  \nh1{\n    margin: 0;\n    font-size: 30px;\n    color: #FFF;\n    font-family: Satoshi;\n}\n\n@media (max-width: 800px) {\n    section{\n        left: 28%;\n        top: 10%;\n    } \n}\n\n@media (max-width: 400px) {\n    section{\n        width: 350px;\n        height: 650px;\n        left: 5%;\n        top: 10%;\n    } \n}",""]);const a=o},2528:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"\nsection{\n    width: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n}\n.Button-Continue{\n    background-color:#D9D9D9 ;\n    width: 160px;\n    height: 45px;\n    border-radius: 25px;\n    margin-top: 10px;\n    font-size: 20px;\n    font-family: Satoshi;\n    border: transparent;\n}\n.Button-Continue:active {\n\tcolor: #D9D9D9;\n\tbackground-color: #171640; /* Cambia el color de fondo cuando se presiona el botn */\n}\n.Box-LogIn{\n    display: flex;\n    color: #7796F1;\n    font-size: 18px;\n    font-family: Satoshi;\n}\n.Button-LogIn{\n   background-color: transparent;\n   border: transparent;\n   font-size: 18px;\n   color: #FFFFFF;\n}\n.Button-LogIn:active{\n    color: #171640 ;\n}\n",""]);const a=o},6806:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"\n.box-Forms{\n    width: 100%;\n    height: 400px;\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    margin-top: 20px;\n\n}\n.Forms{\n    width: 350px;\n    height: 40px;\n    margin: 10px;\n    background-color: #393879;\n    border-color: transparent;  \n    border-radius: 5px;\n    font-size: 18px;    \n    \n}\n\n::placeholder {\n    color: #7796F1;\n    font-family: Satoshi;\n    font-size: 18px;\n    border-color: transparent; \n   \n}\n@media (max-width: 400px) {\n    section{\n        margin: 5px;\n    } \n}",""]);const a=o},9654:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"section{\n    width: 100%;\n    height: 100%;\n    display: flex;\n}\n.box-img{\n    width: 45vw;\n    height: 100vh;\n}\n\nimg {\n    width: 100%;\n    height: 100%;\n}\n@media (max-width: 800px) {\n\n    .box-img{\n        display: none;\n    }\n}",""]);const a=o},5616:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".title {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.title h1 {\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 40px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n}\n\n.title h2 {\n\tcolor: #fff;\n\tfont-family: Satoshi;\n\tfont-size: 18px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n}\n\n.title h3 {\n\tcolor: #7796f1;\n\tfont-family: Satoshi;\n\tfont-size: 20px;\n\tfont-style: normal;\n\tfont-weight: 500;\n\tline-height: normal;\n}\n\n.day {\n\tmargin-top: 8%;\n}\n\n.end {\n\tmargin-top: 62%;\n}\n.go {\n\tposition: relative;\n\n\ttop: 90%;\n}\n.go button {\n\tbackground-color: rgb(255, 255, 255);\n\tmargin-right: 15px;\n\tborder-color: transparent;\n\twidth: 100px;\n\theight: 30px;\n\tborder-radius: 30px;\n\tfont-family: Satoshi;\n\tfont-size: 12px;\n\tmargin-bottom: 90%;\n}\n\n.go button:active {\n\tcolor: #25245e; /* Cambia el color del texto cuando se presiona */\n\tbackground-color: #7796f1; /* Cambia el color de fondo cuando se presiona */\n}\n\n@media (max-width: 400px) {\n\t.now h1 {\n\t\tmargin-bottom: 0;\n\t\tfont-size: 20px;\n\t\ttext-align: center;\n\t}\n\n\t.now {\n\t\ttop: 60%;\n\t}\n\t.title h3 {\n\t\tfont-size: 12px;\n\t}\n\t.end {\n\t\tdisplay: none;\n\t}\n\t.go button {\n\t\tdisplay: none;\n\t}\n}\n\n@media (max-width: 800px) {\n\t.end {\n\t\tdisplay: none;\n\t}\n\t.go button {\n\t\tdisplay: none;\n\t}\n}\n",""]);const a=o},6130:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".box-head {\n\tdisplay: flex;\n\tposition: absolute;\n\twidth: 100%;\n\ttop: 3%;\n\tleft: 3%;\n}\n.box-text {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-left: 0.5%;\n}\n\n.Bar-text {\n\twidth: 190px;\n\theight: 30px;\n\tbackground-color: #393879;\n\tborder-radius: 5px;\n\tfont-family: Satoshi;\n\tborder: none;\n}\n::placeholder {\n\tcolor: #171640;\n\tfont-family: Satoshi;\n\tfont-size: 16px;\n}\n.box-Buttons {\n\tposition: absolute;\n\tleft: 65%;\n\tdisplay: flex;\n\ttop: 25%;\n}\n@media (max-width: 800px) {\n\t.box-text {\n\t\tdisplay: none;\n\t}\n}\n\nbutton {\n\tbackground-color: transparent;\n\tborder: none;\n}\n.box-home {\n\tbackground-color: #d9d9d9;\n\tborder-radius: 20px;\n\theight: 30px;\n\twidth: 92px;\n\tdisplay: flex;\n\talign-items: center;\n}\np {\n\tmargin: 0;\n}\n.bxs-home {\n\tcolor: #3f59a6;\n\tfont-size: 20px;\n}\n.bxs-chat {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n.bxs-bell {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n@media (max-width: 800px) {\n\t.box-Buttons {\n\t\tposition: absolute;\n\t\tleft: 20%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n\t.bxs-chat {\n\t\tmargin-left: 20px;\n\t}\n\t.bxs-bell {\n\t\tmargin-left: 20px;\n\t}\n}\n\n@media (max-width: 400px) {\n\t.box-Buttons {\n\t\tdisplay: none;\n\t}\n}\n.box-user {\n\tposition: absolute;\n\tleft: 78%;\n\tdisplay: flex;\n\ttop: 25%;\n\tbackground-color: #25245e;\n\tborder-radius: 20px;\n\twidth: 120px;\n\theight: 30px;\n\talign-items: center;\n\tjustify-content: center;\n}\n@media (max-width: 800px) {\n\t.box-user {\n\t\tposition: absolute;\n\t\tleft: 55%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n@media (max-width: 400px) {\n\t.box-user {\n\t\tposition: absolute;\n\t\tleft: 30%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n.box-menu {\n\tposition: absolute;\n\tleft: 90%;\n\tdisplay: flex;\n\ttop: 25%;\n}\n.bxs-cog {\n\tcolor: #ffffff;\n\tfont-size: 32px;\n}\n@media (max-width: 800px) {\n\t.bxs-cog {\n\t\tposition: absolute;\n\t\tleft: 85%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n@media (max-width: 400px) {\n\t.bxs-cog {\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\tdisplay: flex;\n\t\ttop: 25%;\n\t}\n}\n.perfil {\n\tborder-radius: 20px;\n\twidth: 25px;\n\theight: 25px;\n\tmargin-right: 5px;\n}\n.name {\n\tcolor: #7796f1;\n}\n",""]);const a=o},9612:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".componente {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.tag img {\n\theight: 300px;\n\twidth: 300px;\n\tbackground-size: cover;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\nh2 {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n.imagen-tag {\n\theight: 90%;\n\twidth: 90%;\n\tborder-radius: 8px;\n\tborder: 1px solid #000;\n\tbox-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);\n}\n\n.tag h2 {\n\tfont-family: 'Satoshi';\n\tfont-style: normal;\n\tfont-weight: 500;\n\tfont-size: 20px;\n\tline-height: 19px;\n\tcolor: #ffffff;\n}\n@media (max-width: 800px) {\n    .tag img {\n\t\theight: 150px;\n\t\twidth: 150px;\n\t\t\n\t}\n}\n\n@media (max-width: 400px) {\n    .tag img {\n\t\theight: 100px;\n\t\twidth: 100px;\n\t}\n\t.tag h2 {\n\t\tfont-size: 16px;\n\t\tline-height: 15px;\n\n\t}\n}",""]);const a=o},9044:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".contenedorfollo {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(2, 1fr); /* Dos columnas de igual tamao */\n\tgap: 20px 300px;\n\tposition: absolute;\n\ttop: 28%;\n\tleft: 28%;\n}\n@media (max-width: 800px) {\n\t.contenedorfollo {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20px 300px;\n\t\tposition: absolute;\n\t\ttop: 30%;\n\t\tleft: 33%;\n\t}\n}\n@media (max-width: 400px) {\n\t.contenedorfollo {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20px 300px;\n\t\tposition: absolute;\n\t\ttop: 10%;\n\t\tleft: 14%;\n\t}\n}\nnav-app {\n\tdisplay: none;\n}\n\n@media (max-width: 800px) {\n\tnav-app {\n\t\tdisplay: flex;\n\t}\n}\n",""]);const a=o},7148:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,"/*feed*/\n\n.contenedorfeed {\n\tposition: absolute;\n\twidth: 50%;\n\theight: 50%;\n\tleft: 25%;\n\tright: 25%;\n\ttop: 27%;\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: 10px;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n\n\t/*background-color: rgb(255, 0, 0);*/\n}\n\n@media (max-width: 800px) {\n\t.contenedorfeed {\n\t\twidth: 90%;\n\t\theight: 90%;\n\t\tleft: 5%;\n\t\tright: 10%;\n\t\ttop: 15%;\n\t}\n}\n@media (max-width: 400px) {\n\t.contenedorfeed {\n\t\twidth: 90%;\n\t\theight: 90%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n}\n\n/*followers*/\n\n.contenedorfollowers {\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: absolute;\n\ttop: 670px;\n\tleft: 4%;\n}\n\n@media (max-width: 800px) {\n\t.contenedorfollowers {\n\t\tdisplay: none;\n\t}\n}\n@media (max-width: 800px) {\n\tcustom-follobackgrond {\n\t\tdisplay: none;\n\t}\n}\ncustom-follobackgrond {\n\tposition: absolute;\n\tleft: 2.3%;\n\ttop: 620px;\n}\n\n/*user*/\n\n.contenedoruser {\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\ttop: 100px;\n\tleft: 2%;\n}\n\n@media (max-width: 800px) {\n\t.contenedoruser {\n\t\tdisplay: none;\n\t}\n}\n\n/*trend*/\n\n.contenedortrend {\n\tflex-direction: column;\n\tposition: absolute;\n\ttop: 20%;\n\tleft: 76%;\n}\n\ncustom-trending {\n\tflex-direction: column;\n\tposition: relative;\n\ttop: 100px;\n\tleft: 75%;\n}\n\n@media (max-width: 1280px) {\n\t.contenedortrend {\n\t\tdisplay: none;\n\t}\n}\n\n@media (max-width: 1280px) {\n\tcustom-trending {\n\t\tdisplay: none;\n\t}\n}\n\n/*nav-app*/\n\nnav-app {\n\tdisplay: none;\n}\n@media (max-width: 800px) {\n\tnav-app {\n\t\tdisplay: flex;\n\t}\n}\n\n/*welcome*/\n\n.contenedorwelcome {\n\tflex-direction: column;\n\tposition: absolute;\n\tleft: 26%;\n\ttop: 110px;\n\twidth: 47%;\n}\n\n@media (max-width: 800px) {\n\t.contenedorwelcome {\n\t\tdisplay: none;\n\t}\n}\n",""]);const a=o},340:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([t.id,".contenedortag {\n\tposition: absolute;\n\twidth: 80%;\n\theight: 80%;\n\tleft: 15%;\n\ttop: 32%;\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: 30px;\n\tflex-wrap: wrap;\n}\nnav-app {\n\tdisplay: none;\n}\n\n@media (max-width: 800px) {\n\tnav-app {\n\t\tdisplay: flex;\n\t}\n}\n",""]);const a=o},6314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},1601:t=>{"use strict";t.exports=function(t){return t[1]}},1831:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r=n.p+"images/089605431e44e8256edab3087bcf19a3.png"},1073:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r=n.p+"images/afafb2ad50963fbd2ead46fd0e2983cb.png"},9244:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r=n.p+"images/023f39cc043efdaed4e0bf514d993785.png"},5577:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6199);r.registerVersion("firebase","10.7.2","app"),Object.keys(r).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}))},9815:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1241);Object.keys(r).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}))},5310:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(807),s=n(2997),o=r(n(1626));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}connectedCallback(){var t,e;this.render();const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#lerorle");null==n||n.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Home"))}));const r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#bye");null==r||r.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("LogIn"))}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\n            <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>\n                <style> ${o.default}</style>\n                <div class="coonfi">\n\t\t\t\t\t\t\t\t<div class="back">\n\t\t\t\t\t\t\t\t<button id="lerorle"><i class='bx bx-chevron-left bx-lg'></i></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<custom-coforms></custom-coforms>\n\t\t\t\t\t\t\t\t<div class="done">\n                        <button>Done</button>\n                    </div>\n                    <div class="exit">\n                        <button id="bye" >Close session</button>\n                    </div>\n\n                </div>\n            `}}}customElements.define("custom-backed",a),e.default=a},7185:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6008));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<section>\n\t\t\t<div class="box-Forms">\n\t\t\t\t<input class="Forms" type="text" name="Name" id="" placeholder="Name">\n                <input class="Forms" type="text" name="Lastname" id="" placeholder="Lastname">\n                <input class="Forms" type="email" name="Username" id="" placeholder="Username">\n                <input class="Forms" type="Passaword" name="Email" id="" placeholder="Email">\n                <input class="Forms" type="Passaword" name="Passaword" id="" placeholder="Passaword">\n\n\t\t\t</div>\n\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-coforms",s),e.default=s},4771:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute3=void 0;const i=r(n(5058));var s;!function(t){t.image="image",t.username="username",t.name="name",t.uid="uid"}(s||(e.Attribute3=s={}));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.handleClick=this.handleClick.bind(this)}static get observedAttributes(){return Object.keys({image:null,username:null,name:null,uid:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){t===s.uid?this.uid=n?Number(n):void 0:this[t]=n,this.render()}handleClick(){const t=prompt("Enter new image URL:");t&&(this.image=t,this.render())}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n            <style> ${i.default}</style>\n            <section class= "user">\n            <div class="top">\n            <img src="${this.image}" onclick="this.parentElement.parentElement.parentElement.handleClick()"></img>\n            <h1>${this.name}</h1>\n            <h2>${this.username}</h2>\n            </div>\n            </section>\n            `}}}customElements.define("custom-confiuser",o),e.default=o},4329:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute6=void 0;const i=r(n(6140)),s=r(n(1831));var o;!function(t){t.image="image",t.username="username",t.uid="uid"}(o||(e.Attribute6=o={}));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image:null,username:null,uid:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){t===o.uid?this.uid=n?Number(n):void 0:this[t]=n,this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t\t\t\t<href ="https://api.fontshare.com/v2/css?f[]=satoshi@500&f[]=cabinet-grotesk@800&display=swap" rel="stylesheet" />\n            <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>\n\t\t\t\t\t<div class="box-head">\n                        <div class="box-logo">\n                            <img src="${s.default}" alt="logosai"  draggable="false"/>\n\n                        </div>\n                        <div class="box-text">\n                            <input type="text" class="Bar-text" placeholder="search">\n\n                        </div>\n                        <div class="box-Buttons">\n\n                            <div class="box-home" >\n                                <button><i class='bx bxs-home'></i></i></button>\n                                <p>User</p>\n                            </div>\n                            <button><i class='bx bxs-chat bx-tada-hover'></i></button>\n                            <button><i class='bx bxs-bell bx-tada-hover'></i></button>\n\n\n                        </div>\n                        <div class="box-user">\n                            <img src="${this.image}" class="perfil"></img>\n                            <p class="name">@${this.username}</p>\n                        </div>\n                        <div class="box-menu">\n                            <button><i class='bx bxs-cog bx-spin-hover' ></i></button>\n\n                        </div>\n\t\t\t\t\t</div>\n\n            `}}}customElements.define("custom-heade",a),e.default=a},2410:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(807),s=n(2997),o=r(n(677));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#goback");null==e||e.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Home"))}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n                <style> ${o.default}</style>\n                <div class="title2">\n                    <div class="now">\n                        <h1>Here are some people you might know</h1>\n                    </div>\n\n                    <div class="go">\n                        <button id="goback">Back to Home</button>\n                    </div>\n\n                </div>\n            `}}}customElements.define("custom-backi",a),e.default=a},7895:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute3=void 0;const i=r(n(614));var s;!function(t){t.image="image",t.username="username",t.name="name",t.uid="uid"}(s||(e.Attribute3=s={}));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image:null,username:null,name:null,uid:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){t===s.uid?this.uid=n?Number(n):void 0:this[t]=n,this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\n\t\t\t\t\t<div class="infoFollo">\n\t\t\t\t\t\t<div class="ImgUsuario">\n\t\t\t\t\t\t\t<img src="${this.image}" class="imagen-usuario"></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="names">\n\t\t\t\t\t\t\t\t<p class="name-follower">${this.name}</p>\n\t\t\t\t\t\t\t\t<p class="username-follower">@${this.username}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="box-button ">\n\t\t\t\t\t\t\t<custom-button></custom-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n            `}}}customElements.define("custom-follows",o),e.default=o},39:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute2=void 0;const s=i(n(1744));var o;!function(t){t.image="image",t.username="username",t.postimage="postimage"}(o||(e.Attribute2=o={}));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image:null,username:null,postimage:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){this[t]=n,this.render()}render(){return r(this,void 0,void 0,(function*(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=s.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n        <style> ${s.default}</style>\n        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>\n        <div class="componente">\n          <div class="info">\n            <img src="${this.image}" class="imagen-usuario"></img>\n            <p>@${this.username}</p>\n          </div>\n          <div class="post">\n            <img class="imagen-post" src="${this.postimage}"></img>\n          </div>\n          <div class="box-like">\n            <custom-like></custom-like>\n          </div>\n        </div>\n      `,this.shadowRoot.querySelector(".post .imagen-post").addEventListener("click",this.openPopup.bind(this))}}))}openPopup(){var t;const e=document.createElement("div");e.classList.add("popup"),e.innerHTML=`\n      <div class="popup-content">\n        <img src="${this.postimage}" class="popup-image"></img>\n        <span class="close-popup">&times;</span>\n      </div>\n    `,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),document.body.classList.add("popup-open"),e.querySelector(".close-popup").addEventListener("click",(()=>{e.remove(),document.body.classList.remove("popup-open")}))}}customElements.define("custom-feed",a),e.default=a},8645:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6778));class s extends HTMLElement{constructor(){super(),this.megusta=!1,this.attachShadow({mode:"open"})}corazontoggle(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#corazon");this.megusta?(null==e||e.setAttribute("type","regular"),null==e||e.setAttribute("color","#ffffff")):(null==e||e.setAttribute("type","solid"),null==e||e.setAttribute("color","#7796F1")),this.megusta=!this.megusta}connectedCallback(){var t,e;this.render(),null===(e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#corazon"))||void 0===e||e.addEventListener("click",(()=>{this.corazontoggle()}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n            <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"><\/script>\n\t\t\t\n\n\t\t\t`;const n=this.ownerDocument.createElement("box-icon");n.setAttribute("id","corazon"),n.setAttribute("name","like"),n.setAttribute("size","sm"),n.setAttribute("color","#ffffff"),this.shadowRoot.appendChild(n)}}}customElements.define("custom-like",s),e.default=s},8407:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(807),s=n(2997),o=r(n(9834));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#shownf");null==e||e.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Follow"))}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${o.default}</style>\n\n\t\t\t<div class="box-followers">\n\t\t\t\t<div class="Who">\n\t\t\t\t\t<h2>Who is follow you </h2>\n\t\t\t\t</div>\n\t\t\t\t<div class="Show">\n\t\t\t\t\t<button id="shownf">Show more</button>\n\t\t\t\t</div>\n\t\t\t</div>\n            `}}}customElements.define("custom-follobackgrond",a),e.default=a},1970:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute3=void 0;const i=r(n(717));var s;!function(t){t.image="image",t.username="username",t.name="name",t.uid="uid"}(s||(e.Attribute3=s={}));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image:null,username:null,name:null,uid:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){t===s.uid?this.uid=n?Number(n):void 0:this[t]=n,this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n            \n\t\t\t\n\t\t\t\t\t<div class="infoFollo">\n\t\t\t\t\t\t<div class="ImgUsuario">\n\t\t\t\t\t\t\t<img src="${this.image}" class="imagen-usuario"></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="names">\n\t\t\t\t\t\t\t\t<p class="name-follower">${this.name}</p>\n\t\t\t\t\t\t\t\t<p class="username-follower">@${this.username}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="box-button ">\n\t\t\t\t\t\t\t<custom-button></custom-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\n            `}}}customElements.define("custom-followers",o),e.default=o},2278:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6497));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}followprofile(){console.log("123",this),"UNFOLLOW"==this.innerHTML?(this.innerHTML="FOLLOW",this.className="habilitar"):(this.innerHTML="UNFOLLOW",this.className="deshabilitar")}connectedCallback(){var t,e;this.render(),null===(e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#seguir"))||void 0===e||e.addEventListener("click",this.followprofile)}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<href ="https://api.fontshare.com/v2/css?f[]=satoshi@500&f[]=cabinet-grotesk@800&display=swap" rel="stylesheet" />\n\n\t\t\t\t\n                <button id="seguir">FOLLOW</button>\n\t\t\t`}}}customElements.define("custom-button",s),e.default=s},7969:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(807),s=n(2997),o=r(n(7562));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#showmt");null==e||e.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Trend"))}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${o.default}</style>\n\n\t\t\t<div class="box-trending">\n\t\t\t\t<div class="now">\n\t\t\t\t\t<h2>TRENDING RIGHT NOW</h2>\n\t\t\t\t</div>\n\t\t\t\t<div class="Show">\n\t\t\t\t\t<button id="showmt">Show more</button>\n\t\t\t\t</div>\n\t\t\t</div>\n            `}}}customElements.define("custom-trending",a),e.default=a},740:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute4=void 0;const i=r(n(243));var s;!function(t){t.uid="uid",t.trend="trend",t.post="post"}(s||(e.Attribute4=s={}));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,trend:null,post:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){switch(t){case s.uid:this.uid=n?Number(n):void 0;break;case s.post:this.post=n?Number(n):void 0;break;default:this[t]=n}this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n          \n            <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />\n\n            <div class="Trendss">\n\n\t\t\t\t\t\t<div class="Tnames">\n\t\t\t\t\t\t\t\t<h2>#${this.trend}</h2>\n\t\t\t\t\t\t\t\t<p class="number-post">${this.post} Posts</p>\n\t\t\t\t\t\t</div>\n            </div>\n\n\n            `}}}customElements.define("custom-trends",o),e.default=o},4189:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(2036));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\t\t\t<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"><\/script>\n        <div class="box">\n        <button class="button">\n\t\t\n          <div class="overlap-group">\n            <div class="text-wrapper">Photo</div>\n            <div class="rectangle"></div>\n          </div>\n\t\t  \n        </button>\n      </div>\n\t\t\t`}}}customElements.define("custom-photo",s),e.default=s},4017:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(800));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n        <div class="box">\n        <button class="button">\n          <div class="overlap-group">\n            <div class="text-wrapper">Video</div>\n            <div class="rectangle"></div>\n          </div>\n\t\t\t`}}}customElements.define("custom-video",s),e.default=s},3241:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute5=void 0;const i=r(n(5752)),s=n(6164);var o;!function(t){t.image="image"}(o||(e.Attribute5=o={}));const a={link:"",user:"",avatarImg:""};class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image:null})}connectedCallback(){var t,e,n;this.render();const r=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#changeFomrs1");null==r||r.addEventListener("change",this.addLink);const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("custom-photo");null==i||i.addEventListener("click",this.submitform);const s=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("custom-video");null==s||s.addEventListener("click",this.submitform)}addLink(t){var e;a.link=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value,a.user="SophiArt",a.avatarImg="https://i.pinimg.com/564x/20/6f/0b/206f0bad1f2f2a4db78e1cd5ba04b1cd.jpg"}submitform(){(0,s.addpost)(a)}attributeChangedCallback(t,e,n){this[t]=n,this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\n\t\t\t\t\t<div class="welBar">\n\n\t\t\t\t\t\t<div class="ImgUser">\n            <img src="${this.image}"></img>\n            \t</div>\n\t\t\t<input id="changeFomrs1" class="text" type="text" name="Image link"  placeholder="Image link">\n            <div class="Buttons">\n            <custom-photo></custom-photo>\n            <custom-video></custom-video>\n            </div>\n\n\t\t\t\t\t</div>\n\n            `}}}customElements.define("custom-welcome",c),e.default=c},7995:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute6=void 0;const i=n(807),s=n(2997),o=r(n(4268)),a=r(n(1831));var c;!function(t){t.image="image",t.username="username",t.uid="uid"}(c||(e.Attribute6=c={}));class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}static get observedAttributes(){return Object.keys({image:null,username:null,uid:null})}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#mypro");null==e||e.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("User"))}))}attributeChangedCallback(t,e,n){t===c.uid?this.uid=n?Number(n):void 0:this[t]=n,this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${o.default}</style>\n\n\t\t\t\t\t\t<href ="https://api.fontshare.com/v2/css?f[]=satoshi@500&f[]=cabinet-grotesk@800&display=swap" rel="stylesheet" />\n            <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>\n\t\t\t\t\t<div class="box-head">\n                        <div class="box-logo">\n                            <img src="${a.default}" alt="logosai"  draggable="false"/>\n\n                        </div>\n                        <div class="box-text">\n                            <input type="text" class="Bar-text" placeholder="search">\n\n                        </div>\n                        <div class="box-Buttons">\n\n                            <div class="box-home" >\n                                <button><i class='bx bxs-home'></i></i></button>\n                                <p>Home</p>\n                            </div>\n                            <button><i class='bx bxs-chat bx-tada-hover'></i></button>\n                            <button><i class='bx bxs-bell bx-tada-hover'></i></button>\n\n\n                        </div>\n                        <div class="box-user">\n                            <img src="${this.image}" class="perfil"></img>\n                            <p class="name">@${this.username}</p>\n                        </div>\n                        <div class="box-menu">\n                            <button id="mypro"><i class='bx bxs-cog bx-spin-hover' ></i></button>\n\n                        </div>\n\t\t\t\t\t</div>\n\n            `}}}customElements.define("custom-head",u),e.default=u},5837:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(807),s=n(2997),o=r(n(2618));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}connectedCallback(){var t,e,n;this.render();const r=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#changeHome");null==r||r.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Home"))}));const o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#showmt");null==o||o.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Trend"))}));const a=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#shownf");null==a||a.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Follow"))}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${o.default}</style>\n            <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>\n           <div class="box-nav">\n                <div class="box-buttoms">\n                    <div class="home">\n                        <button id="changeHome" class="Box-boton1"><i class='bx bx-home-alt-2 bx-md' style='color:#ffffff' ></i></button>\n                    </div>\n                    <div class="search">\n                        <button id="showmt" class="Box-boton2"><i class='bx bx-search bx-md' style='color:#ffffff' ></i></button>\n                    </div>\n                    <div class="photo">\n                        <button class="Box-boton3"><i class='bx bx-plus bx-md' style='color:#ffffff' ></i></button>\n                    </div>\n                    <div class="followers">\n                        <button id="shownf" class="Box-boton4"><i class='bx bx-user-plus bx-md' style='color:#ffffff'  ></i></button>\n                    </div>\n                    <div class="user">\n                        <button class="Box-boton5"><i class='bx bx-user-circle bx-md' style='color:#ffffff' ></i></button>\n                    </div>\n                </div>\n           </div>\n            `}}}customElements.define("nav-app",a),e.default=a},7665:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const i=r(n(4986));var s;!function(t){t.image="image",t.name="name",t.username="username",t.followers="followers",t.following="following"}(s||(e.Attribute=s={}));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({name:null,image:null,username:null,followers:null,following:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){switch(t){case s.following:this.following=n?Number(n):void 0;break;case s.followers:this.followers=n?Number(n):void 0;break;default:this[t]=n}this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\t\t\t<section class= "user">\n      \t\t\t<div class="top">\n      \t\t\t<img src="${this.image}"></img>\n      \t\t\t<h1>${this.name}</h1>\n      \t\t\t<h2>${this.username}</h2>\n      \t\t\t</div>\n\t\t\t\t\t\t<section class="bottom">\n\t\t\t\t\t\t<div class="following">\n\t\t\t\t\t\t<h1>${this.following}</h1>\n\t\t\t\t\t\t<h2>Following</h2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="follower">\n\t\t\t\t\t\t<h1>${this.followers}</h1>\n\t\t\t\t\t\t<h2>Followers</h2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<nav class="myProfile">My Profle</nav>\n\n\t\t\t\t\t\t</section>\n\n            </section>\n            `}}}customElements.define("custom-user",o),e.default=o},5700:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(8765));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<section>\n\n\t\t\t\t<div class="box-LogUp">\n\t\t\t\t\t<h1>Welcome Back</h1>\n\t\t\t\t</div>\n\t\t\t\t<div class="names">\n\n\t\t\t\t<custom-formsl></custom-formsl>\n\t\t\t\t<custom-logbutton></custom-logbutton>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-lbackforms",s),e.default=s},1600:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1293)),s=n(807),o=n(2997);class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,s.addObserver)(this)}connectedCallback(){var t,e;this.render();const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#changeHome");null==n||n.addEventListener("click",(()=>{(0,s.dispatch)((0,o.navigate)("Home"))}));const r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#changeSignIn");null==r||r.addEventListener("click",(()=>{(0,s.dispatch)((0,o.navigate)("SignIn"))}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<section>\n\n\t\t\t<button id="changeHome" class="Button-Continue">Continue</button>\n\t\t\t\t<div class="Box-SingIn">\n\t\t\t\t\t<p>Don't have a account?</p>\n\t\t\t\t\t<button id="changeSignIn" class="Button-SingIn">Sign in</button>\n\t\t\t\t</div>\n\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-logbutton",a),e.default=a},4478:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9451));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<section>\n\t\t\t<div class="box-Forms">\n\t\t\t<h1>Email/Username</h1>\n\n                <input class="Forms" type="email" name="Email" id="" placeholder="Email">\n\t\t\t\t\t\t\t\t<h1>Password</h1>\n                <input class="Forms" type="Passaword" name="Passaword" id="" placeholder="Passaword">\n\t\t\t</div>\n\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-formsl",s),e.default=s},1782:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1073)),s=r(n(5619));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=s.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${s.default}</style>\n\n\t\t\t<section>\n\t\t\t<div class="box-img">\n\t\t\t\t<img src="${i.default}" alt="logosai"  draggable="false"/>\n\t\t\t</div>\n\t\t\t\t<custom-lbackforms></custom-lbackforms>\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-login",o),e.default=o},1879:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(8110));class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<section>\n\n\t\t\t\t<div class="box-signUp">\n\t\t\t\t\t<h1>Sign Up</h1>\n\t\t\t\t</div>\n\t\t\t\t<custom-forms></custom-forms>\n\t\t\t\t\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-backforms",s),e.default=s},1521:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(2528)),s=n(807),o=n(2997);class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,s.addObserver)(this)}connectedCallback(){var t,e;this.render();const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#changeHome");null==n||n.addEventListener("click",(()=>{(0,s.dispatch)((0,o.navigate)("Home"))}));const r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#changeLogIn");null==r||r.addEventListener("click",(()=>{(0,s.dispatch)((0,o.navigate)("LogIn"))}))}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<section>\n\n\n\t\t\t<button id="changeHome" class="Button-Continue">Continue</button>\n\t\t\t\t<div class="Box-LogIn">\n\t\t\t\t\t<p>Already have an occount?</p>\n\t\t\t\t\t<button id="changeLogIn" class="Button-LogIn">Log in</button>\n\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-singbutton",a),e.default=a},4759:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6806)),s=n(6164),o={name:"",username:"",email:"",passoword:"",confirmpass:""};class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){var t,e,n,r,i,s;this.render();const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#changeFomrs1");null==o||o.addEventListener("change",this.chageName);const a=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#changeFomrs2");null==a||a.addEventListener("change",this.chageUsername);const c=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#changeFomrs3");null==c||c.addEventListener("change",this.chageEmail);const u=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#changeFomrs4");null==u||u.addEventListener("change",this.chagePassword);const l=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#changeFomrs5");null==l||l.addEventListener("change",this.chageConfirmPass);const h=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector("custom-singbutton");null==h||h.addEventListener("click",this.submitform)}chageName(t){var e;o.name=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}chageUsername(t){var e;o.username=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}chageEmail(t){var e;o.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}chagePassword(t){var e;o.passoword=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}chageConfirmPass(t){var e;o.confirmpass=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitform(){(0,s.adduser)(o)}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t<section>\n\t\t\t<div class="box-Forms">\n\t\t\t\t<input id="changeFomrs1" class="Forms" type="text" name="Name"  placeholder="Name">\n                <input id="changeFomrs2" class="Forms" type="text" name="Username"  placeholder="Username">\n                <input id="changeFomrs3" class="Forms" type="email" name="Email"  placeholder="Email">\n                <input id="changeFomrs4" class="Forms" type="Passaword" name="Passaword"  placeholder="Passaword">\n                <input id="changeFomrs5" class="Forms" type="Passaword" name="Passaword"  placeholder="Confirm Passaword">\n\t\t\t</div>\n\t\t\t\t<custom-singbutton></custom-singbutton>\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-forms",a),e.default=a},1319:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9244)),s=r(n(9654));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=s.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${s.default}</style>\n\n\t\t\t<section>\n\t\t\t<div class="box-img">\n\t\t\t\t<img src="${i.default}" alt="logosai"  draggable="false"/>\n\t\t\t</div>\n\t\t\t\t<custom-backforms></custom-backforms>\n\t\t\t</section>\n\t\t\t`}}}customElements.define("custom-signin",o),e.default=o},2811:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(807),s=n(2997),o=r(n(5616));class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#goback");null==e||e.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("Home"))}))}render(){var t;if(this.shadowRoot){const e=(new Date).toLocaleDateString("en-US",{weekday:"long"});this.shadowRoot.innerHTML="";const n=this.ownerDocument.createElement("style");n.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(n),this.shadowRoot.innerHTML=`\n                <style> ${o.default}</style>\n                <div class="title">\n                    <div class="day">\n                        <h3>${e}</h3>\n                    </div>\n                    <div class="now">\n                        <h1>Keep inspiring yourself</h1>\n                    </div>\n                    <div class="end">\n                        <h2>Come back tomorrow for more inspiration</h2>\n                    </div>\n                    <div class="go">\n                        <button id="goback">Back to Home</button>\n                    </div>\n\n                </div>\n            `}}}customElements.define("custom-back",a),e.default=a},8785:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute6=void 0;const i=n(807),s=n(2997),o=r(n(6130)),a=r(n(1831));var c;!function(t){t.image="image",t.username="username",t.uid="uid"}(c||(e.Attribute6=c={}));class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}static get observedAttributes(){return Object.keys({image:null,username:null,uid:null})}connectedCallback(){var t;this.render();const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#mypro");null==e||e.addEventListener("click",(()=>{(0,i.dispatch)((0,s.navigate)("User"))}))}attributeChangedCallback(t,e,n){t===c.uid?this.uid=n?Number(n):void 0:this[t]=n,this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=o.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${o.default}</style>\n\n\t\t\t\t\t\t<href ="https://api.fontshare.com/v2/css?f[]=satoshi@500&f[]=cabinet-grotesk@800&display=swap" rel="stylesheet" />\n            <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>\n\t\t\t\t\t<div class="box-head">\n                        <div class="box-logo">\n                            <img src="${a.default}" alt="logosai"  draggable="false"/>\n\n                        </div>\n                        <div class="box-text">\n                            <input type="text" class="Bar-text" placeholder="search">\n\n                        </div>\n                        <div class="box-Buttons">\n\n                            <div class="box-home" >\n                                <button><i class='bx bxs-home'></i></i></button>\n                                <p>Explore</p>\n                            </div>\n                            <button><i class='bx bxs-chat bx-tada-hover'></i></button>\n                            <button><i class='bx bxs-bell bx-tada-hover'></i></button>\n\n\n                        </div>\n                        <div class="box-user">\n                            <img src="${this.image}" class="perfil"></img>\n                            <p class="name">@${this.username}</p>\n                        </div>\n                        <div class="box-menu">\n\t\t\t\t\t\t\t<button id="mypro"><i class='bx bxs-cog bx-spin-hover' ></i></button>\n\n                        </div>\n\t\t\t\t\t</div>\n\n            `}}}customElements.define("custom-headexplore",u),e.default=u},6779:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeTa=void 0;const i=r(n(9612));var s;!function(t){t.image="image",t.trend="trend"}(s||(e.AttributeTa=s={}));class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({image:null,trend:null})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){this[t]=n,this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=i.default,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.innerHTML=`\n\t\t\t<style> ${i.default}</style>\n\n\t\t\t\t<div class="componente">\n\t\t\t\t\t<div class="tag">\n\t\t\t\t\t\t<img class="imagen-tag" src="${this.image}"></img>\n            \t\t\t<h2>${this.trend}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n      `}}}customElements.define("custom-trenfe",o),e.default=o},8793:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoUser=e.CoForms=e.heade=e.ConfBack=e.TagsBacki=e.FollBack=e.headexplore=e.tags=e.TagsBack=e.LogButton=e.FormsL=e.LogInBackForms=e.LogIn=e.SingButton=e.Forms=e.SingInBackForms=e.SingIn=e.likeButton=e.head=e.folloButton=e.VideoButton=e.PhotoButton=e.welcome=e.trending=e.trends=e.NavApp=e.FolloBackgrond=e.followers=e.feed=e.user=void 0;var i=n(7665);Object.defineProperty(e,"user",{enumerable:!0,get:function(){return r(i).default}});var s=n(39);Object.defineProperty(e,"feed",{enumerable:!0,get:function(){return r(s).default}});var o=n(1970);Object.defineProperty(e,"followers",{enumerable:!0,get:function(){return r(o).default}});var a=n(8407);Object.defineProperty(e,"FolloBackgrond",{enumerable:!0,get:function(){return r(a).default}});var c=n(5837);Object.defineProperty(e,"NavApp",{enumerable:!0,get:function(){return r(c).default}});var u=n(740);Object.defineProperty(e,"trends",{enumerable:!0,get:function(){return r(u).default}});var l=n(7969);Object.defineProperty(e,"trending",{enumerable:!0,get:function(){return r(l).default}});var h=n(3241);Object.defineProperty(e,"welcome",{enumerable:!0,get:function(){return r(h).default}});var d=n(4189);Object.defineProperty(e,"PhotoButton",{enumerable:!0,get:function(){return r(d).default}});var f=n(4017);Object.defineProperty(e,"VideoButton",{enumerable:!0,get:function(){return r(f).default}});var p=n(2278);Object.defineProperty(e,"folloButton",{enumerable:!0,get:function(){return r(p).default}});var m=n(7995);Object.defineProperty(e,"head",{enumerable:!0,get:function(){return r(m).default}});var g=n(8645);Object.defineProperty(e,"likeButton",{enumerable:!0,get:function(){return r(g).default}});var y=n(1319);Object.defineProperty(e,"SingIn",{enumerable:!0,get:function(){return r(y).default}});var v=n(1879);Object.defineProperty(e,"SingInBackForms",{enumerable:!0,get:function(){return r(v).default}});var b=n(4759);Object.defineProperty(e,"Forms",{enumerable:!0,get:function(){return r(b).default}});var w=n(1521);Object.defineProperty(e,"SingButton",{enumerable:!0,get:function(){return r(w).default}});var x=n(1782);Object.defineProperty(e,"LogIn",{enumerable:!0,get:function(){return r(x).default}});var _=n(5700);Object.defineProperty(e,"LogInBackForms",{enumerable:!0,get:function(){return r(_).default}});var E=n(4478);Object.defineProperty(e,"FormsL",{enumerable:!0,get:function(){return r(E).default}});var I=n(1600);Object.defineProperty(e,"LogButton",{enumerable:!0,get:function(){return r(I).default}});var S=n(2811);Object.defineProperty(e,"TagsBack",{enumerable:!0,get:function(){return r(S).default}});var T=n(6779);Object.defineProperty(e,"tags",{enumerable:!0,get:function(){return r(T).default}});var C=n(8785);Object.defineProperty(e,"headexplore",{enumerable:!0,get:function(){return r(C).default}});var D=n(2410);Object.defineProperty(e,"FollBack",{enumerable:!0,get:function(){return r(D).default}});var k=n(2410);Object.defineProperty(e,"TagsBacki",{enumerable:!0,get:function(){return r(k).default}});var A=n(5310);Object.defineProperty(e,"ConfBack",{enumerable:!0,get:function(){return r(A).default}});var N=n(4329);Object.defineProperty(e,"heade",{enumerable:!0,get:function(){return r(N).default}});var L=n(7185);Object.defineProperty(e,"CoForms",{enumerable:!0,get:function(){return r(L).default}});var M=n(4771);Object.defineProperty(e,"CoUser",{enumerable:!0,get:function(){return r(M).default}})},7153:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserData=void 0,e.UserData=[{id:1,name:"Sofa Rodrguez",username:"SophiArt",image:"https://i.pinimg.com/564x/20/6f/0b/206f0bad1f2f2a4db78e1cd5ba04b1cd.jpg",following:514,followers:1020,postimage:"https://i.pinimg.com/736x/5d/62/56/5d6256b2311dd6e08a5a1e3b269a8c7d.jpg"},{id:2,name:"Lucas Smith",username:"LSmithy",image:"https://i.pinimg.com/564x/6d/5f/78/6d5f78f90d6c86b418dff1f529cb1f0d.jpg",following:409,followers:600,postimage:"https://i.pinimg.com/564x/e1/e9/47/e1e947932d1cb620ee2a4ae7fe7ca7de.jpg"},{id:3,name:"Diego Ramrez",username:"DexRRR",image:"https://i.pinimg.com/564x/3b/17/e8/3b17e8caa28529d8dccac61bc0c70f50.jpg",following:200,followers:13e3,postimage:"https://i.pinimg.com/564x/d2/64/93/d2649367cf87ad44b57b9bd4a9c7b1a3.jpg"},{id:4,name:"Annie Martnez",username:"AnnieWonderland",image:"https://i.pinimg.com/564x/2b/fc/b2/2bfcb2acadbed0094faf6e6af21a186f.jpg",following:20,followers:160,postimage:"https://i.pinimg.com/564x/62/80/53/628053f93672c05dbb85f1ee93ea96e6.jpg"},{id:5,name:"Daniel Rodrguez",username:"DanTheMan",image:"https://i.pinimg.com/564x/34/53/3a/34533a55ffd99a67143f066c38dc31ac.jpg",following:46,followers:1220,postimage:"https://i.pinimg.com/564x/6f/70/10/6f701099714c983225eb3b3038c896ae.jpg"},{id:6,name:"Mara Gonzlez",username:"MiaGonz",image:"https://i.pinimg.com/564x/6e/f1/3b/6ef13baae58cd95503b90412340f5b56.jpg",following:345,followers:14e4,postimage:"https://i.pinimg.com/564x/e0/c8/b5/e0c8b55ed4ec89ddc75eefc63bcb7f7b.jpg"},{id:7,name:"Sebastin Cruz",username:"SebbyCruz",image:"https://i.pinimg.com/564x/48/8a/73/488a73a3b069d07df92ac3ec9a143236.jpg",following:129,followers:1452,postimage:"https://i.pinimg.com/736x/41/c8/4b/41c84b371c3ee70d36b5eee78c97cfad.jpg"},{id:8,name:"Valentina Snchez",username:"Val_intheStars",image:"https://i.pinimg.com/564x/c3/13/25/c31325b4a2c910c880d52f0eb9cbf8d3.jpg",following:400,followers:15e3,postimage:"https://i.pinimg.com/564x/df/fe/87/dffe8757a9fd8c967d904b13ab14f8c3.jpg"},{id:9,name:"Juan Lpez",username:"JayL",image:"https://i.pinimg.com/564x/34/48/9b/34489b9b3f9c585eb9af8c1be80fc0bf.jpg",following:1200,followers:1e3,postimage:"https://i.pinimg.com/564x/46/3e/c8/463ec8a4f6e7f350fe34127cba59e2f9.jpg"},{id:10,name:"Carlos Garca",username:"CarlitosG",image:"https://i.pinimg.com/564x/e6/fe/f1/e6fef1b1e9f0a0ad375da838f70db178.jpg",following:600,followers:4e4,postimage:"https://i.pinimg.com/564x/ed/21/3a/ed213aade929d0527e1e49b24f096978.jpg"},{id:11,name:"Gabriela Daz",username:"GabyDOO",image:"https://i.pinimg.com/564x/5e/75/c5/5e75c53d06246a3a1de5b61e70a74bfd.jpg",following:200,followers:1e3,postimage:"https://i.pinimg.com/736x/a5/ab/f8/a5abf825ad3f3882f0daba2fdbdc5113.jpg"},{id:12,name:"Andrs Prez",username:"AndyPerezL",image:"https://i.pinimg.com/564x/0a/97/d9/0a97d94d23672cd55fe065dfe513fbd0.jpg",following:500,followers:13e3,postimage:"https://i.pinimg.com/564x/da/c2/79/dac2790dafa5acbace3f752cb9d221d4.jpg"},{id:13,name:"Natalia Lpez",username:"NatyStarlet",image:"https://i.pinimg.com/564x/8e/34/9c/8e349c3f1a4efdc1015a36d08f5d33b9.jpg",following:200,followers:1300,postimage:"https://i.pinimg.com/564x/68/ee/59/68ee5916b32d01c5519cf69d9a39f5ac.jpg"},{id:14,name:"Andrea Flores",username:"AndyFOO",image:"https://i.pinimg.com/564x/42/8d/71/428d71de5adc8105091a2825587ef9ee.jpg",following:340,followers:120300,postimage:"https://i.pinimg.com/564x/2e/51/ec/2e51ec76b6ead6d7c6f2affe56df299a.jpg"},{id:15,name:"Isabella Ruiz",username:"BellaRose",image:"https://i.pinimg.com/564x/81/e2/9b/81e29b3c7353b11ca0580bea99e9f41d.jpg",following:20,followers:200,postimage:"https://i.pinimg.com/564x/ca/f3/31/caf331b93b58766479e675c71a739dc0.jpg"},{id:16,name:"Mateo Morales",username:"MattyMo",image:"https://i.pinimg.com/564x/fe/e2/ed/fee2ed6090c25ce98880982ea1e7b1ea.jpg",following:670,followers:9e3,postimage:"https://i.pinimg.com/564x/e8/12/18/e81218689803f1dcf7f3a697362ffda4.jpg"},{id:17,name:"Laura Prez",username:"LauDreamer",image:"https://i.pinimg.com/564x/dc/b2/ed/dcb2edae125daa3ff3069a8f17a2fb08.jpg",following:100,followers:13e4,postimage:"https://i.pinimg.com/736x/3c/28/3d/3c283d816511ab0369e9efadb39d22df.jpg"},{id:18,name:"Gabriel Gonzlez",username:"GabeMGonzo",image:"https://i.pinimg.com/564x/b3/f3/42/b3f342b65105eb6143284a110ec857f1.jpg",following:10,followers:12e3,postimage:"https://i.pinimg.com/736x/34/dd/b3/34ddb3cdf51c7e27dd850c59b66356f7.jpg"},{id:19,name:"Camila Torres",username:"CamiSunshine",image:"https://i.pinimg.com/564x/3c/f2/88/3cf2882de424d4c52cbd9bc21bb09bca.jpg",following:2,followers:3e3,postimage:"https://i.pinimg.com/564x/de/07/d0/de07d0dd2ce364c69a7d9d0b958d0683.jpg"},{id:20,name:"Nicols Martnez",username:"NicoMM",image:"https://i.pinimg.com/564x/41/64/d1/4164d14aaaebaa0034fd29cb7c2beb77.jpg",following:120,followers:14e3,postimage:"https://i.pinimg.com/564x/6d/5f/78/6d5f78f90d6c86b418dff1f529cb1f0d.jpg"}]},4349:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.trendData=void 0,e.trendData=[{id:1,trend:"Cats",post:21e3,image:"https://i.pinimg.com/564x/6a/fc/5c/6afc5c43a5050054d7482202e3b75239.jpg"},{id:2,trend:"Paint",post:20700,image:"https://i.pinimg.com/564x/1e/a4/e2/1ea4e2bfe0d4019e7f39f42ad87da4f7.jpg"},{id:3,trend:"Sketch",post:2e4,image:"https://i.pinimg.com/474x/2b/4c/2b/2b4c2b2ef15b26af333ee88dd1148a7d.jpg"},{id:4,trend:"Acrylics",post:19680,image:"https://i.pinimg.com/474x/36/e6/64/36e664cc6ef41dfbd056126f02cb5370.jpg"},{id:5,trend:"Halloween",post:19400,image:"https://i.pinimg.com/474x/32/ac/33/32ac33d9c077ed665f7c5797b87240a4.jpg"},{id:6,trend:"Oil Painting",post:18e3,image:"https://i.pinimg.com/474x/4a/37/a1/4a37a15af8eb661f6a052ada06309607.jpg"},{id:7,trend:"Watercolors",post:17900,image:"https://i.pinimg.com/474x/82/c5/ef/82c5ef45944a7007b13bdb285933caa0.jpg"},{id:8,trend:"Realism",post:17050,image:"https://i.pinimg.com/474x/64/c2/7f/64c27faa1c1d12ee93c1ea8ee62c021e.jpg"},{id:9,trend:"Green",post:16780,image:"https://i.pinimg.com/474x/0f/fd/46/0ffd46d5d00c52d89ac316a565e76b90.jpg"},{id:10,trend:"Forest",post:16200,image:"https://i.pinimg.com/474x/51/ad/fb/51adfb0b067f177c3b301990ebb8a4ae.jpg"}]},7285:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(8793);const i=n(7153),s=n(7895),o=r(n(9044)),a=n(8785);class c extends HTMLElement{constructor(){super(),this.follows=[],this.headexplore=[],this.currentUserIndex=0,this.attachShadow({mode:"open"})}connectedCallback(){i.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-follows");e.setAttribute(s.Attribute3.image,t.image),e.setAttribute(s.Attribute3.username,t.username),e.setAttribute(s.Attribute3.name,t.name),this.follows.push(e)})),i.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-headexplore");e.setAttribute(a.Attribute6.image,t.image),e.setAttribute(a.Attribute6.username,t.username),this.headexplore.push(e)})),this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\n\t\t\t<style>\n\t\t\t${o.default}\n\t\t</style>\n\t\t\t<custom-backi></custom-backi>\n\t\t\t<nav-app></nav-app>\n\n\t\t\t`;const e=this.ownerDocument.createElement("section");e.className="contenedorfollo",this.follows.forEach((t=>{null==e||e.appendChild(t)})),null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.appendChild(this.headexplore[this.currentUserIndex])}}}customElements.define("app-follow",c)},2447:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(7153),o=n(4349);n(8793);const a=n(7665),c=n(39),u=n(1970),l=n(740),h=n(3241),d=i(n(7148)),f=n(6164),p=n(7995);class m extends HTMLElement{constructor(){super(),this.users=[],this.feeds=[],this.followers=[],this.trends=[],this.welcomes=[],this.head=[],this.currentTrendIndex=0,this.currentTrendIndex2=1,this.currentTrendIndex3=2,this.currentTrendIndex4=4,this.currentUserIndex=0,this.currentUserIndex2=1,this.currentUserIndex3=2,this.currentUserIndex4=3,this.attachShadow({mode:"open"})}connectedCallback(){return r(this,void 0,void 0,(function*(){o.trendData.forEach((t=>{const e=this.ownerDocument.createElement("custom-trends");e.setAttribute(l.Attribute4.trend,t.trend),e.setAttribute(l.Attribute4.post,String(t.post)),this.trends.push(e)})),s.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-user");e.setAttribute(a.Attribute.name,t.name),e.setAttribute(a.Attribute.image,t.image),e.setAttribute(a.Attribute.username,t.username),e.setAttribute(a.Attribute.following,String(t.following)),e.setAttribute(a.Attribute.followers,String(t.followers)),this.users.push(e)}));const t=yield(0,f.getpost)();console.log(t),t.forEach((t=>{const e=this.ownerDocument.createElement("custom-feed");e.setAttribute(c.Attribute2.image,t.avatarImg),e.setAttribute(c.Attribute2.username,t.user),e.setAttribute(c.Attribute2.postimage,t.link),this.feeds.push(e)})),s.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-followers");e.setAttribute(u.Attribute3.image,t.image),e.setAttribute(u.Attribute3.username,t.username),e.setAttribute(u.Attribute3.name,t.name),this.followers.push(e)})),s.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-welcome");e.setAttribute(h.Attribute5.image,t.image),this.welcomes.push(e)})),s.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-head");e.setAttribute(p.Attribute6.image,t.image),e.setAttribute(p.Attribute6.username,t.username),this.head.push(e)})),this.render()}))}render(){var t,e,n,r,i;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\n\t\t\t\t<style>\n\t\t\t\t\t${d.default}\n\t\t\t\t</style>\n\t\t\t\t<custom-trending></custom-trending>\n\t\t\t\t<nav-app></nav-app>\n\t\t\t\t<custom-follobackgrond></custom-follobackgrond>\n\t\t\t`;const s=this.ownerDocument.createElement("div");s.className="contenedoruser",s.appendChild(this.users[this.currentUserIndex]),null===(t=this.shadowRoot)||void 0===t||t.appendChild(s);const o=this.ownerDocument.createElement("div");o.className="contenedorwelcome",o.appendChild(this.welcomes[this.currentUserIndex]),null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);const a=this.ownerDocument.createElement("section");a.className="contenedorfeed",this.feeds.forEach((t=>{null==a||a.appendChild(t)})),null===(n=this.shadowRoot)||void 0===n||n.appendChild(a);const c=this.ownerDocument.createElement("div");c.className="contenedortrend",c.appendChild(this.trends[this.currentTrendIndex]),c.appendChild(this.trends[this.currentTrendIndex2]),c.appendChild(this.trends[this.currentTrendIndex3]),c.appendChild(this.trends[this.currentTrendIndex4]),null===(r=this.shadowRoot)||void 0===r||r.appendChild(c);const u=this.ownerDocument.createElement("div");u.className="contenedorfollowers",u.appendChild(this.followers[this.currentUserIndex2]),u.appendChild(this.followers[this.currentUserIndex3]),u.appendChild(this.followers[this.currentUserIndex4]),null===(i=this.shadowRoot)||void 0===i||i.appendChild(u),this.shadowRoot.appendChild(this.head[this.currentUserIndex])}}}customElements.define("app-home",m)},9450:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML="");const e=this.ownerDocument.createElement("custom-login");null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-login",n)},961:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML="");const e=this.ownerDocument.createElement("custom-signin");null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("app-signin",n)},7849:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(8793);const i=n(4349),s=n(7153),o=n(6779),a=r(n(340)),c=n(8785);class u extends HTMLElement{constructor(){super(),this.tags=[],this.headexplore=[],this.currentUserIndex=0,this.attachShadow({mode:"open"})}connectedCallback(){i.trendData.forEach((t=>{const e=this.ownerDocument.createElement("custom-trenFe");e.setAttribute(o.AttributeTa.image,t.image),e.setAttribute(o.AttributeTa.trend,t.trend),this.tags.push(e)})),s.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-headexplore");e.setAttribute(c.Attribute6.image,t.image),e.setAttribute(c.Attribute6.username,t.username),this.headexplore.push(e)})),this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\n\t\t\t<style>\n\t\t\t${a.default}\n\t\t</style>\n\t\t\t<custom-back></custom-back>\n\t\t\t<custom-headexplore></custom-headexplore>\n\t\t\t<nav-app></nav-app>\n\n\t\t\t`;const e=this.ownerDocument.createElement("section");e.className="contenedortag",this.tags.forEach((t=>{null==e||e.appendChild(t)})),null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.shadowRoot.appendChild(this.headexplore[this.currentUserIndex])}}}customElements.define("app-trends",u)},2467:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(8793);const r=n(4771),i=n(7153),s=n(4329);class o extends HTMLElement{constructor(){super(),this.users=[],this.currentUserIndex=0,this.heade=[],this.attachShadow({mode:"open"})}connectedCallback(){i.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-confiuser");e.setAttribute(r.Attribute3.name,t.name),e.setAttribute(r.Attribute3.image,t.image),e.setAttribute(r.Attribute3.username,t.username),this.users.push(e)})),i.UserData.forEach((t=>{const e=this.ownerDocument.createElement("custom-heade");e.setAttribute(s.Attribute6.image,t.image),e.setAttribute(s.Attribute6.username,t.username),this.heade.push(e)})),this.render()}render(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="\n\n                <custom-backed></custom-backed>\n                <custom-heade></custom-heade>\n            ";const e=this.ownerDocument.createElement("div");e.className="contenedoruser",e.appendChild(this.users[this.currentUserIndex]),null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),this.users[this.currentUserIndex].addEventListener("click",(()=>{const t=prompt("Enter new image URL:");t&&(this.users[this.currentUserIndex].setAttribute(r.Attribute3.image,t),localStorage.setItem("userImage",t))})),this.shadowRoot.appendChild(this.heade[this.currentUserIndex])}}}customElements.define("app-user",o)},6164:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.listenpsrts=e.getpost=e.addpost=e.adduser=e.db=e.app=e.firebaseConfig=void 0;const i=n(5577),s=n(9815),o=n(9815),a=n(9815);e.firebaseConfig={apiKey:"AIzaSyDgAJvGH4dhqzoRVxqP7xB48nCS9HspO4g",authDomain:"sai-project-9c598.firebaseapp.com",projectId:"sai-project-9c598",storageBucket:"sai-project-9c598.appspot.com",messagingSenderId:"133078057541",appId:"1:133078057541:web:c94d6d0fb1f2648dd0992c",measurementId:"G-XSVD4VFKFS"},e.app=(0,i.initializeApp)(e.firebaseConfig),e.db=(0,s.getFirestore)(e.app),e.adduser=t=>r(void 0,void 0,void 0,(function*(){try{const n=yield(0,o.addDoc)((0,o.collection)(e.db,"users2"),t);console.log("Document written with ID: ",n.id)}catch(t){console.error("Error adding document: ",t)}})),e.addpost=t=>r(void 0,void 0,void 0,(function*(){if(t.user)try{const n=yield(0,o.addDoc)((0,o.collection)(e.db,"posts"),t);console.log("Document written with ID: ",n.id)}catch(t){console.error("Error adding document: ",t)}})),e.getpost=()=>r(void 0,void 0,void 0,(function*(){const t=yield(0,o.getDocs)((0,o.collection)(e.db,"posts")),n=[];return t.forEach((t=>{const e=t.data();n.push(Object.assign({id:t.id},e))})),console.log("get",n),n})),e.listenpsrts=()=>{a.onSnapshot}},2997:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.navigate=void 0,e.navigate=t=>({action:"navigate",payload:t})},6950:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reducer=void 0,e.reducer=(t,e)=>{const{action:n,payload:r}=t;return"navigate"===n&&(e.screen=r),e}},807:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addObserver=e.dispatch=e.appState=void 0;const r=n(6950);let i=[];e.appState=JSON.parse(localStorage.getItem("appState")||JSON.stringify({screen:"SignIn"})),e.dispatch=t=>{const n=JSON.parse(JSON.stringify(e.appState));e.appState=(0,r.reducer)(t,n),i.forEach((t=>t.render())),localStorage.setItem("appState",JSON.stringify(e.appState))},e.addObserver=t=>{i=[...i,t]}},6148:(t,e,n)=>{"use strict";n.r(e),n.d(e,{deleteDB:()=>g,openDB:()=>m,unwrap:()=>p,wrap:()=>f});const r=(t,e)=>e.some((e=>t instanceof e));let i,s;const o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap;let h={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return a.get(t);if("objectStoreNames"===e)return t.objectStoreNames||c.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function d(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(p(this),t),f(o.get(this))}:function(...t){return f(e.apply(p(this),t))}:function(t,...n){const r=e.call(p(this),t,...n);return c.set(r,t.sort?t.sort():[t]),f(r)}:(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));a.set(t,e)}(t),r(t,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,h):t);var e}function f(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(f(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&o.set(e,t)})).catch((()=>{})),l.set(e,t),e}(t);if(u.has(t))return u.get(t);const e=d(t);return e!==t&&(u.set(t,e),l.set(e,t)),e}const p=t=>l.get(t);function m(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=f(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(f(o.result),t.oldVersion,t.newVersion,f(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}function g(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",(t=>e(t.oldVersion,t))),f(n).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function w(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(b.get(e))return b.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return b.set(e,s),s}var x;x=h,h={...x,get:(t,e,n)=>w(t,e)||x.get(t,e,n),has:(t,e)=>!!w(t,e)||x.has(t,e)}},1635:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__addDisposableResource:()=>O,__assign:()=>s,__asyncDelegator:()=>S,__asyncGenerator:()=>I,__asyncValues:()=>T,__await:()=>E,__awaiter:()=>p,__classPrivateFieldGet:()=>N,__classPrivateFieldIn:()=>M,__classPrivateFieldSet:()=>L,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>P,__esDecorate:()=>u,__exportStar:()=>y,__extends:()=>i,__generator:()=>m,__importDefault:()=>A,__importStar:()=>k,__makeTemplateObject:()=>C,__metadata:()=>f,__param:()=>c,__propKey:()=>h,__read:()=>b,__rest:()=>o,__runInitializers:()=>l,__setFunctionName:()=>d,__spread:()=>w,__spreadArray:()=>_,__spreadArrays:()=>x,__values:()=>v,default:()=>F});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},s.apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e,n,r,i,s){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,c=r.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!e&&t?r.static?t:t.prototype:null,h=e||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d=!1,f=n.length-1;f>=0;f--){var p={};for(var m in r)p[m]="access"===m?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(t||null))};var g=(0,n[f])("accessor"===c?{get:h.get,set:h.set}:h[u],p);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=o(g.get))&&(h.get=a),(a=o(g.set))&&(h.set=a),(a=o(g.init))&&i.unshift(a)}else(a=o(g))&&("field"===c?i.unshift(a):h[u]=a)}l&&Object.defineProperty(l,r.name,h),d=!0}function l(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function h(t){return"symbol"==typeof t?t:"".concat(t)}function d(t,e,n){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function p(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}function m(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var g=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function y(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||g(e,t,n)}function v(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function w(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function x(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function _(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function E(t){return this instanceof E?(this.v=t,this):new E(t)}function I(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){s.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof E?Promise.resolve(n.value.v).then(c,u):l(s[0][2],n)}catch(t){l(s[0][3],t)}var n}function c(t){a("next",t)}function u(t){a("throw",t)}function l(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function S(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:E(t[r](e)),done:!1}:i?i(e):e}:i}}function T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=v(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var D=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&g(e,t,n);return D(e,t),e}function A(t){return t&&t.__esModule?t:{default:t}}function N(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function L(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function M(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}function O(t,e,n){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if("function"!=typeof r)throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var R="function"==typeof SuppressedError?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function P(t){function e(e){t.error=t.hasError?new R(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}return function n(){for(;t.stack.length;){var r=t.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,(function(t){return e(t),n()}))}catch(t){e(t)}}if(t.hasError)throw t.error}()}const F={__extends:i,__assign:s,__rest:o,__decorate:a,__param:c,__metadata:f,__awaiter:p,__generator:m,__createBinding:g,__exportStar:y,__values:v,__read:b,__spread:w,__spreadArrays:x,__spreadArray:_,__await:E,__asyncGenerator:I,__asyncDelegator:S,__asyncValues:T,__makeTemplateObject:C,__importStar:k,__importDefault:A,__classPrivateFieldGet:N,__classPrivateFieldSet:L,__classPrivateFieldIn:M,__addDisposableResource:O,__disposeResources:P}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={id:r,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";n(2447),n(961),n(9450),n(8793),n(7285),n(7849),n(2467);const t=n(807),e=n(807);class r extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,e.addObserver)(this)}connectedCallback(){this.render()}render(){var e,n,r,i,s,o;switch(this.shadowRoot&&(this.shadowRoot.innerHTML=""),t.appState.screen){case"SignIn":const t=this.ownerDocument.createElement("app-signin");null===(e=this.shadowRoot)||void 0===e||e.appendChild(t);break;case"Home":const a=this.ownerDocument.createElement("app-home");null===(n=this.shadowRoot)||void 0===n||n.appendChild(a);break;case"LogIn":const c=this.ownerDocument.createElement("app-login");null===(r=this.shadowRoot)||void 0===r||r.appendChild(c);break;case"Trend":const u=this.ownerDocument.createElement("app-trends");null===(i=this.shadowRoot)||void 0===i||i.appendChild(u);break;case"Follow":const l=this.ownerDocument.createElement("app-follow");null===(s=this.shadowRoot)||void 0===s||s.appendChild(l);break;case"User":const h=this.ownerDocument.createElement("app-user");null===(o=this.shadowRoot)||void 0===o||o.appendChild(h)}}}customElements.define("app-container",r)})()})();